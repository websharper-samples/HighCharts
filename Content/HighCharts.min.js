try{Object.defineProperty(Error.prototype,"message",{enumerable:!0})}catch(e){}var IntelliFactory={Runtime:{Class:function(n,t){function i(){}i.prototype=n;for(var r in t)i[r]=t[r];return i},Define:function(n,t){function i(n,t){var u,f,e;for(u in t)if(f=typeof n[u],e=typeof t[u],f=="object"&&e=="object")i(n[u],t[u]);else if(f=="undefined"||r)n[u]=t[u];else throw new Error("Name conflict: "+u);}var r=!!this.overwrite;i(n,t)},Field:function(n){var t,i=!1;return function(){return i||(i=!0,t=n()),t}},For:function(n,t,i){for(var r=n;r<=t;r++)i(r)},ForEach:function(n,t){for(var i in n)t(i)},New:function(n,t){var i=new n;for(var r in t)r in i||(i[r]=t[r]);return i},OnInit:function(n){"init"in this||(this.init=[]);this.init.push(n)},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Inherit:function(n,t){var r=n.prototype,i;n.prototype=new t;for(i in r)n.prototype[i]=r[i]},Safe:function(n){return n===undefined?{}:n},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"init"in this&&(n(this.init),this.init=[]);"load"in this&&(n(this.load),this.load=[])},Throw:function(n){throw n;},Tupled:function(n){return function(t){return arguments.length>1?n(arguments):n(t)}},Try:function(n,t){try{return n()}catch(i){return t(i)}},TryFinally:function(n,t){try{return n()}finally{t()}},While:function(n,t){while(n())t()}}};Date.now||(Date.now=function(){return(new Date).getTime()});
var JSON;JSON||(JSON={}),function(){"use strict";function i(n){return n<10?"0"+n:n}function f(n){return o.lastIndex=0,o.test(n)?'"'+n.replace(o,function(n){var t=s[n];return typeof t=="string"?t:"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+n+'"'}function r(i,e){var s,l,h,a,v=n,c,o=e[i];o&&typeof o=="object"&&typeof o.toJSON=="function"&&(o=o.toJSON(i));typeof t=="function"&&(o=t.call(e,i,o));switch(typeof o){case"string":return f(o);case"number":return isFinite(o)?String(o):"null";case"boolean":case"null":return String(o);case"object":if(!o)return"null";if(n+=u,c=[],Object.prototype.toString.apply(o)==="[object Array]"){for(a=o.length,s=0;s<a;s+=1)c[s]=r(s,o)||"null";return h=c.length===0?"[]":n?"[\n"+n+c.join(",\n"+n)+"\n"+v+"]":"["+c.join(",")+"]",n=v,h}if(t&&typeof t=="object")for(a=t.length,s=0;s<a;s+=1)typeof t[s]=="string"&&(l=t[s],h=r(l,o),h&&c.push(f(l)+(n?": ":":")+h));else for(l in o)Object.prototype.hasOwnProperty.call(o,l)&&(h=r(l,o),h&&c.push(f(l)+(n?": ":":")+h));return h=c.length===0?"{}":n?"{\n"+n+c.join(",\n"+n)+"\n"+v+"}":"{"+c.join(",")+"}",n=v,h}}typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+i(this.getUTCMonth()+1)+"-"+i(this.getUTCDate())+"T"+i(this.getUTCHours())+":"+i(this.getUTCMinutes())+":"+i(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var e=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,o=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,n,u,s={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},t;typeof JSON.stringify!="function"&&(JSON.stringify=function(i,f,e){var o;if(n="",u="",typeof e=="number")for(o=0;o<e;o+=1)u+=" ";else typeof e=="string"&&(u=e);if(t=f,f&&typeof f!="function"&&(typeof f!="object"||typeof f.length!="number"))throw new Error("JSON.stringify");return r("",{"":i})});typeof JSON.parse!="function"&&(JSON.parse=function(n,t){function r(n,i){var f,e,u=n[i];if(u&&typeof u=="object")for(f in u)Object.prototype.hasOwnProperty.call(u,f)&&(e=r(u,f),e!==undefined?u[f]=e:delete u[f]);return t.call(n,i,u)}var i;if(n=String(n),e.lastIndex=0,e.test(n)&&(n=n.replace(e,function(n){return"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(n.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return i=eval("("+n+")"),typeof t=="function"?r({"":i},""):i;throw new SyntaxError("JSON.parse");})}();
(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U;$.Define($$,{IntelliFactory:{WebSharper:{AggregateException:$.Class({},{New:function($innerExceptions){var $0=this,$this=this;return $$.e=new $$.Error("AggregateException"),$$.e.InnerExceptions=$innerExceptions,$$.e;}}),Arrays:{Find:function(V,W){var X,Y,Z;X=b.tryFind(V,W);if(X.$==0){Y=c.FailWith("KeyNotFoundException");}else{Z=X.$0;Y=Z;}return Y;},FindIndex:function(_0,_1){var _2,_3,_4;_2=b.tryFindIndex(_0,_1);if(_2.$==0){_3=c.FailWith("KeyNotFoundException");}else{_4=_2.$0;_3=_4;}return _3;},Pick:function(_5,_6){var _7,_8,_9;_7=b.tryPick(_5,_6);if(_7.$==0){_8=c.FailWith("KeyNotFoundException");}else{_9=_7.$0;_8=_9;}return _8;},average:function(_){return d(b.sum(_))/d(e.GetLength(_));},averageBy:function(ba,bb){return d(b.sumBy(ba,bb))/d(e.GetLength(bb));},blit:function(bb,bc,bd,be,bf){var bg;b.checkRange(bb,bc,bf);b.checkRange(bd,be,bf);for(bg=0;bg<=bf-1;bg++){e.SetArray(bd,be+bg,e.GetArray(bb,bc+bg));}return;},checkLength:function(bh,bi){return e.GetLength(bh)!==e.GetLength(bi)?c.FailWith("Arrays differ in length."):null;},checkRange:function(bj,bk,bl){return((bl<0?true:bk<0)?true:e.GetLength(bj)<bk+bl)?c.FailWith("Index was outside the bounds of the array."):null;},choose:function(bm,bn){var bo,bp,bq,br,bs;bo=[];for(bp=0;bp<=e.GetLength(bn)-1;bp++){bq=bm(e.GetArray(bn,bp));if(bq.$==0){br=null;}else{bs=bq.$0;br=bo.push(bs);}}return bo;},collect:function(bt,bu){return f.prototype.concat.apply([],b.map(bt,bu));},concat:function(bv){return f.prototype.concat.apply([],b.ofSeq(bv));},create:function(bw,bx){var by,bz;by=f(bw);for(bz=0;bz<=bw-1;bz++){e.SetArray(by,bz,bx);}return by;},exists2:function(bA,bB,bC){b.checkLength(bB,bC);return g.exists2(bA,bB,bC);},fill:function(bD,bE,bF,bG){var bH;b.checkRange(bD,bE,bF);for(bH=bE;bH<=bE+bF-1;bH++){e.SetArray(bD,bH,bG);}return;},filter:function(bI,bJ){var bK,bL;bK=[];for(bL=0;bL<=e.GetLength(bJ)-1;bL++){bI(e.GetArray(bJ,bL))?bK.push(e.GetArray(bJ,bL)):null;}return bK;},fold:function(bM,bN,bO){var bP,bQ;bP=bN;for(bQ=0;bQ<=e.GetLength(bO)-1;bQ++){bP=(bM(bP))(e.GetArray(bO,bQ));}return bP;},fold2:function(bR,bS,bT,bU){var bV,bW;b.checkLength(bT,bU);bV=bS;for(bW=0;bW<=bT.length-1;bW++){bV=((bR(bV))(e.GetArray(bT,bW)))(e.GetArray(bU,bW));}return bV;},foldBack:function(bX,bY,bZ){var b0,b1,b2;b0=bZ;b1=e.GetLength(bY);for(b2=1;b2<=b1;b2++){b0=(bX(e.GetArray(bY,b1-b2)))(b0);}return b0;},foldBack2:function(b3,b4,b5,b6){var b7,b8,b9;b.checkLength(b4,b5);b7=e.GetLength(b4);b8=b6;for(b9=1;b9<=b7;b9++){b8=((b3(e.GetArray(b4,b7-b9)))(e.GetArray(b5,b7-b9)))(b8);}return b8;},forall2:function(b_,b$,ca){b.checkLength(b$,ca);return g.forall2(b_,b$,ca);},init:function(cb,cc){var cd,ce;cb<0?c.FailWith("Negative size given."):null;cd=f(cb);for(ce=0;ce<=cb-1;ce++){e.SetArray(cd,ce,cc(ce));}return cd;},iter:function(cf,cg){var ch;for(ch=0;ch<=e.GetLength(cg)-1;ch++){cf(e.GetArray(cg,ch));}return;},iter2:function(ci,cj,ck){var cl;b.checkLength(cj,ck);for(cl=0;cl<=e.GetLength(cj)-1;cl++){(ci(e.GetArray(cj,cl)))(e.GetArray(ck,cl));}return;},iteri:function(cm,cn){var co;for(co=0;co<=e.GetLength(cn)-1;co++){(cm(co))(e.GetArray(cn,co));}return;},iteri2:function(cp,cq,cr){var cs;b.checkLength(cq,cr);for(cs=0;cs<=e.GetLength(cq)-1;cs++){((cp(cs))(e.GetArray(cq,cs)))(e.GetArray(cr,cs));}return;},map:function(ct,cu){var cv,cw;cv=f(e.GetLength(cu));for(cw=0;cw<=e.GetLength(cu)-1;cw++){e.SetArray(cv,cw,ct(e.GetArray(cu,cw)));}return cv;},map2:function(cx,cy,cz){var cA,cB;b.checkLength(cy,cz);cA=f(e.GetLength(cz));for(cB=0;cB<=e.GetLength(cz)-1;cB++){e.SetArray(cA,cB,(cx(e.GetArray(cy,cB)))(e.GetArray(cz,cB)));}return cA;},mapi:function(cC,cD){var cE,cF;cE=f(e.GetLength(cD));for(cF=0;cF<=e.GetLength(cD)-1;cF++){e.SetArray(cE,cF,(cC(cF))(e.GetArray(cD,cF)));}return cE;},mapi2:function(cG,cH,cI){var cJ,cK;b.checkLength(cH,cI);cJ=f(e.GetLength(cH));for(cK=0;cK<=e.GetLength(cH)-1;cK++){e.SetArray(cJ,cK,((cG(cK))(e.GetArray(cH,cK)))(e.GetArray(cI,cK)));}return cJ;},max:function(cL){return b.reduce(function(cM){return function(cN){return c.Max(cM,cN);};},cL);},maxBy:function(cO,cP){return b.reduce(function(cQ){return function(cR){return h.Compare(cO(cQ),cO(cR))===1?cQ:cR;};},cP);},min:function(cS){return b.reduce(function(cT){return function(cU){return c.Min(cT,cU);};},cS);},minBy:function(cV,cW){return b.reduce(function(cX){return function(cY){return h.Compare(cV(cX),cV(cY))===-1?cX:cY;};},cW);},nonEmpty:function(cZ){return e.GetLength(cZ)===0?c.FailWith("The input array was empty."):null;},ofSeq:function(c0){var c1,c2;c1=[];c2=i.Get(c0);while(c2.MoveNext()){c1.push(c2.get_Current());}return c1;},partition:function(c3,c4){var c5,c6,c7;c5=[];c6=[];for(c7=0;c7<=e.GetLength(c4)-1;c7++){c3(e.GetArray(c4,c7))?c5.push(e.GetArray(c4,c7)):c6.push(e.GetArray(c4,c7));}return[c5,c6];},permute:function(c8,c9){var c_,c$;c_=f(e.GetLength(c9));for(c$=0;c$<=e.GetLength(c9)-1;c$++){e.SetArray(c_,c8(c$),e.GetArray(c9,c$));}return c_;},reduce:function(da,db){var dc,dd;b.nonEmpty(db);dc=e.GetArray(db,0);for(dd=1;dd<=e.GetLength(db)-1;dd++){dc=(da(dc))(e.GetArray(db,dd));}return dc;},reduceBack:function(de,df){var dg,dh,di;b.nonEmpty(df);dg=e.GetLength(df);dh=e.GetArray(df,dg-1);for(di=2;di<=dg;di++){dh=(de(e.GetArray(df,dg-di)))(dh);}return dh;},reverse:function(dj,dk,dl){var dm;dm=b.sub(dj,dk,dl).slice().reverse();return b.blit(dm,0,dj,dk,e.GetLength(dm));},scan:function(dn,_do,dp){var dq,dr;dq=f(1+e.GetLength(dp));e.SetArray(dq,0,_do);for(dr=0;dr<=e.GetLength(dp)-1;dr++){e.SetArray(dq,dr+1,(dn(e.GetArray(dq,dr)))(e.GetArray(dp,dr)));}return dq;},scanBack:function(ds,dt,du){var dv,dw,dx;dv=e.GetLength(dt);dw=f(1+dv);e.SetArray(dw,dv,du);for(dx=0;dx<=dv-1;dx++){e.SetArray(dw,dv-dx-1,(ds(e.GetArray(dt,dv-dx-1)))(e.GetArray(dw,dv-dx)));}return dw;},sort:function(dy){return b.sortBy(function(dz){return dz;},dy);},sortBy:function(dA,dB){var dC;dC=$.Tupled(function(dD){var dE,dF;dE=dD[0];dF=dD[1];return c.Compare(dA(dE),dA(dF));});return dB.slice().sort(dC);},sortInPlace:function(dG){return b.sortInPlaceBy(function(dH){return dH;},dG);},sortInPlaceBy:function(dI,dJ){var dK;dK=$.Tupled(function(dL){var dM,dN;dM=dL[0];dN=dL[1];return c.Compare(dI(dM),dI(dN));});return dJ.sort(dK);},sortInPlaceWith:function(dO,dP){var dQ;dQ=$.Tupled(function(dR){var dS,dT;dS=dR[0];dT=dR[1];return(dO(dS))(dT);});return dP.sort(dQ);},sortWith:function(dU,dV){var dW;dW=$.Tupled(function(dX){var dY,dZ;dY=dX[0];dZ=dX[1];return(dU(dY))(dZ);});return dV.slice().sort(dW);},sub:function(d0,d1,d2){b.checkRange(d0,d1,d2);return d0.slice(d1,d1+d2);},sum:function($arr){var $0=this,$this=this;var sum=0;for(var i=0;i<$arr.length;i++)sum+=$arr[i];return sum;},sumBy:function($f,$arr){var $0=this,$this=this;var sum=0;for(var i=0;i<$arr.length;i++)sum+=$f($arr[i]);return sum;},tryFind:function(d3,d4){var d5,d6;d5={$:0};d6=0;while(d6<e.GetLength(d4)?d5.$==0:false){d3(e.GetArray(d4,d6))?d5={$:1,$0:e.GetArray(d4,d6)}:null;d6=d6+1;}return d5;},tryFindIndex:function(d7,d8){var d9,d_;d9={$:0};d_=0;while(d_<e.GetLength(d8)?d9.$==0:false){d7(e.GetArray(d8,d_))?d9={$:1,$0:d_}:null;d_=d_+1;}return d9;},tryPick:function(d$,ea){var eb,ec,ed;eb={$:0};ec=0;while(ec<e.GetLength(ea)?eb.$==0:false){ed=d$(e.GetArray(ea,ec));ed.$==1?eb=ed:null;ec=ec+1;}return eb;},unzip:function(ee){var ef,eg,eh,ei,ej,ek;ef=[];eg=[];for(eh=0;eh<=e.GetLength(ee)-1;eh++){ei=e.GetArray(ee,eh);ej=ei[1];ek=ei[0];ef.push(ek);eg.push(ej);}return[ef,eg];},unzip3:function(el){var em,en,eo,ep,eq,er,es,et;em=[];en=[];eo=[];for(ep=0;ep<=e.GetLength(el)-1;ep++){eq=e.GetArray(el,ep);er=eq[2];es=eq[1];et=eq[0];em.push(et);en.push(es);eo.push(er);}return[em,en,eo];},zip:function(eu,ev){var ew,ex;b.checkLength(eu,ev);ew=f(eu.length);for(ex=0;ex<=e.GetLength(eu)-1;ex++){e.SetArray(ew,ex,[e.GetArray(eu,ex),e.GetArray(ev,ex)]);}return ew;},zip3:function(ey,ez,eA){var eB,eC;b.checkLength(ey,ez);b.checkLength(ez,eA);eB=f(ey.length);for(eC=0;eC<=e.GetLength(ey)-1;eC++){e.SetArray(eB,eC,[e.GetArray(ey,eC),e.GetArray(ez,eC),e.GetArray(eA,eC)]);}return eB;}},Arrays2D:{copy:function(eD){return j.init(eD.length,eD.length?eD[0].length:0,function(eE){return function(eF){return e.GetArray2D(eD,eE,eF);};});},init:function(eG,eH,eI){var eJ,eK,eL;eJ=j.zeroCreate(eG,eH);for(eK=0;eK<=eG-1;eK++){for(eL=0;eL<=eH-1;eL++){e.SetArray2D(eJ,eK,eL,(eI(eK))(eL));}}return eJ;},iter:function(eM,eN){var eO,eP,eQ,eR;eO=eN.length;eP=eN.length?eN[0].length:0;for(eQ=0;eQ<=eO-1;eQ++){for(eR=0;eR<=eP-1;eR++){eM(e.GetArray2D(eN,eQ,eR));}}return;},iteri:function(eS,eT){var eU,eV,eW,eX;eU=eT.length;eV=eT.length?eT[0].length:0;for(eW=0;eW<=eU-1;eW++){for(eX=0;eX<=eV-1;eX++){((eS(eW))(eX))(e.GetArray2D(eT,eW,eX));}}return;},map:function(eY,eZ){return j.init(eZ.length,eZ.length?eZ[0].length:0,function(e0){return function(e1){return eY(e.GetArray2D(eZ,e0,e1));};});},mapi:function(e2,e3){return j.init(e3.length,e3.length?e3[0].length:0,function(e4){return function(e5){return((e2(e4))(e5))(e.GetArray2D(e3,e4,e5));};});},zeroCreate:function(e6,e7){return e.Array2DZeroCreate(e6,e7);}},AsyncProxy:$.Class({},{get_CancellationToken:function(){return k.GetCT();},get_DefaultCancellationToken:function(){return k.defCTS().contents;}}),CancellationTokenSource:$.Class({Cancel:function(){var e8,e9,fb,fc;if(!this.c){this.c=true;e9=function(e_){var e$,fa;try{e_(null);e$={$:0};}catch(fa){e$={$:1,$0:fa};}return e$;};fb=this.r;fc=b.choose(e9,fb);e8=e.GetLength(fc)>0?c.Raise(l.New(fc)):null;}else{e8=null;}return e8;},Cancel1:function(fd){var fe,ff,fg,fi;if(!fd){fe=this.Cancel();}else{if(!this.c){this.c=true;fg=function(fh){return fh(null);};fi=this.r;ff=b.iter(fg,fi);}else{ff=null;}fe=ff;}return fe;},CancelAfter:function(fj){var fk,fl,fn,fp=this;if(!this.c){fl=this.pending;m.iter(function(fm){return n(fm);},fl);fn=o(function(){return fp.Cancel();},fj);fk=void(this.pending={$:1,$0:fn});}else{fk=null;}return fk;},get_IsCancellationRequested:function(){return this.c;}},{CreateLinkedTokenSource:function(fq,fr){return p.CreateLinkedTokenSource1([fq,fr]);},CreateLinkedTokenSource1:function(fs){var ft,fu;ft=p.New();fu=function(fv){var fw,fy;fw=function(){return ft.Cancel();};fy=k.Register(fv,function(){return fw();});return;};return b.iter(fu,fs);},New:function(){var fA;fA=$.New(this,{});fA.c=false;fA.pending={$:0};fA.r=[];return fA;}}),Char:$.Class({},{GetNumericValue:function(fB){return(fB>=48?fB<=57:false)?d(fB)-d(48):-1;},IsControl:function(fC){return(fC>=0?fC<=31:false)?true:fC>=128?fC<=159:false;},IsDigit:function(fD){return fD>=48?fD<=57:false;},IsLetter:function(fE){return(fE>=65?fE<=90:false)?true:fE>=97?fE<=122:false;},IsLetterOrDigit:function(fF){return q.IsLetter(fF)?true:q.IsDigit(fF);},IsLower:function(fG){return fG>=97?fG<=122:false;},IsUpper:function(fH){return fH>=65?fH<=90:false;},IsWhiteSpace:function($c){var $0=this,$this=this;return $$.String.fromCharCode($c).match(/\s/)!==null;},Parse:function(fI){return fI.length===1?fI.charCodeAt(0):c.FailWith("String must be exactly one character long.");}}),Concurrency:{AwaitEvent:function(fJ){var fK;fK=function(fL){var fM,fN,fO,fP,fQ,fR;fM=function(){return r.subscribeTo(fJ,function(fT){var fU;s.Force(fN).Dispose();s.Force(fP).Dispose();fU=function(){return fL.k.call(null,{$:0,$0:fT});};return k.scheduler().Fork(fU);});};fN=s.Create(fM);fO=function(){return k.Register(fL.ct,function(){var fY;s.Force(fN).Dispose();fY=function(){return fL.k.call(null,{$:2,$0:new t("OperationCanceledException")});};return k.scheduler().Fork(fY);});};fP=s.Create(fO);fQ=s.Force(fN);fR=s.Force(fP);return null;};return k.checkCancel(fK);},Bind:function(f0,f1){var f2;f2=function(f3){return f0({k:function(f4){var f5,f6,f7,f$;if(f4.$==0){f6=f4.$0;f7=function(){var f9,f_;try{f9=(f1(f6))(f3);}catch(f_){f9=f3.k.call(null,{$:1,$0:f_});}return f9;};f5=k.scheduler().Fork(f7);}else{f$=function(){return f3.k.call(null,f4);};f5=k.scheduler().Fork(f$);}return f5;},ct:f3.ct});};return k.checkCancel(f2);},Catch:function(gb){var gc;gc=function(gd){var ge,gj;try{ge=gb({k:function(gf){var gg,gh,gi;if(gf.$==0){gh=gf.$0;gg=gd.k.call(null,{$:0,$0:{$:0,$0:gh}});}else{if(gf.$==1){gi=gf.$0;gg=gd.k.call(null,{$:0,$0:{$:1,$0:gi}});}else{gg=gd.k.call(null,gf);}}return gg;},ct:gd.ct});}catch(gj){ge=gd.k.call(null,{$:0,$0:{$:1,$0:gj}});}return ge;};return k.checkCancel(gc);},Combine:function(gk,gl){return k.Bind(gk,function(){return gl;});},Delay:function(gn){var go;go=function(gp){var gq,gr;try{gq=(gn(null))(gp);}catch(gr){gq=gp.k.call(null,{$:1,$0:gr});}return gq;};return k.checkCancel(go);},For:function(gs,gt){var gu;gu=i.Get(gs);return k.While(function(){return gu.MoveNext();},k.Delay(function(){return gt(gu.get_Current());}));},FromContinuations:function(gx){var gy;gy=function(gz){var gA,gB;gA={contents:false};gB=function(gC){var gD;if(gA.contents){gD=c.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");}else{gA.contents=true;gD=k.scheduler().Fork(gC);}return gD;};return gx([function(gE){return gB(function(){return gz.k.call(null,{$:0,$0:gE});});},function(gG){return gB(function(){return gz.k.call(null,{$:1,$0:gG});});},function(gI){return gB(function(){return gz.k.call(null,{$:2,$0:gI});});}]);};return k.checkCancel(gy);},GetCT:$.Field(function(){var gK;gK=function(gL){return gL.k.call(null,{$:0,$0:gL.ct});};return k.checkCancel(gK);}),Ignore:function(gM){return k.Bind(gM,function(){return k.Return(null);});},OnCancel:function(gO){var gP;gP=function(gQ){return gQ.k.call(null,{$:0,$0:k.Register(gQ.ct,gO)});};return k.checkCancel(gP);},Parallel:function(gR){var gS,gT,gU;gS=b.ofSeq(gR);if(e.GetLength(gS)===0){gT=k.Return([]);}else{gU=function(gV){var gW,gX,gY,gZ;gW=gS.length;gX={contents:gW};gY=b.create(gW,undefined);gZ=function(g0){return function(g1){var g2,g3,g4,g5,g6,g7,g8,g9,g_;g2=[gX.contents,g1];if(g2[0]===0){g3=null;}else{if(g2[0]===1){if(g2[1].$==0){g5=g2[1].$0;e.SetArray(gY,g0,g5);gX.contents=0;g4=gV.k.call(null,{$:0,$0:gY});}else{g2[0];g6=g2[1];gX.contents=0;g4=gV.k.call(null,g6);}g3=g4;}else{if(g2[1].$==0){g8=g2[1].$0;g9=g2[0];e.SetArray(gY,g0,g8);g7=void(gX.contents=g9-1);}else{g2[0];g_=g2[1];gX.contents=0;g7=gV.k.call(null,g_);}g3=g7;}}return g3;};};return b.iteri(function(g$){return function(ha){var hb;hb=function(){return ha({k:gZ(g$),ct:gV.ct});};return k.scheduler().Fork(hb);};},gS);};gT=k.checkCancel(gU);}return gT;},Register:function(hd,he){var hf;hf=hd.r.push(he)-1;return u.NewFromList(v.ofArray([["Dispose",function(){return e.SetArray(hd.r,hf,function(){});}]]));},Return:function(hi){var hj;hj=function(hk){return hk.k.call(null,{$:0,$0:hi});};return k.checkCancel(hj);},Scheduler:$.Class({Fork:function(hl){var hm,hn,hp=this;this.robin.push(hl);if(this.idle){this.idle=false;hn=o(function(){return hp.tick();},0);hm=void hn;}else{hm=null;}return hm;},tick:function(){var hq,hr,hs,ht,hu,hv,hx=this;hq=w.now();hr=true;while(hr){hs=this.robin.length;if(hs===0){this.idle=true;ht=hr=false;}else{(this.robin.shift())(null);if(w.now()-hq>40){hv=o(function(){return hx.tick();},0);hu=hr=false;}else{hu=null;}ht=hu;}}return;}},{New:function(){var hy;hy=$.New(this,{});hy.idle=true;hy.robin=[];return hy;}}),Sleep:function(hz){var hA;hA=function(hB){var hC,hD,hE,hF,hG,hH;hC=function(){return o(function(){var hK;s.Force(hF).Dispose();hK=function(){return hB.k.call(null,{$:0,$0:null});};return k.scheduler().Fork(hK);},hz);};hD=s.Create(hC);hE=function(){return k.Register(hB.ct,function(){var hO;n(s.Force(hD));hO=function(){return hB.k.call(null,{$:2,$0:new t("OperationCanceledException")});};return k.scheduler().Fork(hO);});};hF=s.Create(hE);hG=s.Force(hD);hH=s.Force(hF);return null;};return k.checkCancel(hA);},Start:function(hQ,hR){return k.StartWithContinuations(hQ,function(){},function(hT){var hU;hU=["WebSharper: Uncaught asynchronous exception",hT];return x?x.log.apply(x,hU):undefined;},function(){},hR);},StartChild:function(hW){var hX;hX=function(hY){var hZ,h0,h1,h4,h9;hZ={contents:{$:0}};h0=[];h1=function(){return hW({k:function(h3){hZ.contents={$:1,$0:h3};while(h0.length>0){(h0.shift())(h3);}return;},ct:hY.ct});};k.scheduler().Fork(h1);h4=function(h5){var h6,h7,h8;h6=hZ.contents;if(h6.$==0){h7=h0.push(h5.k);}else{h8=h6.$0;h7=h5.k.call(null,h8);}return h7;};h9=k.checkCancel(h4);return hY.k.call(null,{$:0,$0:h9});};return k.checkCancel(hX);},StartWithContinuations:function(h_,h$,ia,ib,ic){var id,ie;id=c.DefaultArg(ic,k.defCTS().contents);ie=function(){return h_({k:function(ig){var ih,ii,ij,ik;if(ig.$==1){ii=ig.$0;ih=ia(ii);}else{if(ig.$==2){ij=ig.$0;ih=ib(ij);}else{ik=ig.$0;ih=h$(ik);}}return ih;},ct:id});};return k.scheduler().Fork(ie);},TryCancelled:function(il,im){var _in;_in=function(io){return il({k:function(ip){var iq,ir;if(ip.$==2){ir=ip.$0;im(ir);iq=io.k.call(null,ip);}else{iq=io.k.call(null,ip);}return iq;},ct:io.ct});};return k.checkCancel(_in);},TryFinally:function(is,it){var iu;iu=function(iv){return is({k:function(iw){var ix,iy;try{it(null);ix=iv.k.call(null,iw);}catch(iy){ix=iv.k.call(null,{$:1,$0:iy});}return ix;},ct:iv.ct});};return k.checkCancel(iu);},TryWith:function(iz,iA){var iB;iB=function(iC){return iz({k:function(iD){var iE,iF,iG,iH,iI;if(iD.$==0){iF=iD.$0;iE=iC.k.call(null,{$:0,$0:iF});}else{if(iD.$==1){iG=iD.$0;try{iH=(iA(iG))(iC);}catch(iI){iH=iC.k.call(null,iD);}iE=iH;}else{iE=iC.k.call(null,iD);}}return iE;},ct:iC.ct});};return k.checkCancel(iB);},Using:function(iJ,iK){return k.TryFinally(iK(iJ),function(){return iJ.Dispose();});},While:function(iM,iN){return iM(null)?k.Bind(iN,function(){return k.While(iM,iN);}):k.Return(null);},checkCancel:function(iP){return function(iQ){return iQ.ct.c?iQ.k.call(null,{$:2,$0:new t("OperationCanceledException")}):iP(iQ);};},defCTS:$.Field(function(){return{contents:p.New()};}),scheduler:$.Field(function(){return y.New();})},Control:{createEvent:function(iR,iS,iT){return u.NewFromList(v.ofArray([["AddHandler",iR],["RemoveHandler",iS],["Subscribe",function(iU){var iV;iV=iT(function(){return function(iX){return iU.OnNext.call(null,iX);};});iR(iV);return u.NewFromList(v.ofArray([["Dispose",function(){return iS(iV);}]]));}]]));}},DateTimeHelpers:{AddMonths:function(iZ,i0){var i1;i1=new w(iZ);return(new w(i1.getFullYear(),i1.getMonth()+i0,i1.getDate(),i1.getHours(),i1.getMinutes(),i1.getSeconds(),i1.getMilliseconds())).getTime();},AddYears:function(i2,i3){var i4;i4=new w(i2);return(new w(i4.getFullYear()+i3,i4.getMonth(),i4.getDate(),i4.getHours(),i4.getMinutes(),i4.getSeconds(),i4.getMilliseconds())).getTime();},DatePortion:function(i5){var i6;i6=new w(i5);return(new w(i6.getFullYear(),i6.getMonth(),i6.getDate())).getTime();},TimePortion:function(i7){var i8;i8=new w(i7);return(((24*0+i8.getHours())*60+i8.getMinutes())*60+i8.getSeconds())*1000+i8.getMilliseconds();}},Enumerable:{Of:function(i9){return{GetEnumerator:i9};}},Enumerator:{Get:function(i_){var i$,ja,jg,jh;if(i_ instanceof $$.Array){ja=function(jb){var jc,jd,je,jf;jc=jb.s;if(jc<e.GetLength(i_)){je=e.GetArray(i_,jc);jb.c=je;jf=jc+1;jb.s=jf;jd=true;}else{jd=false;}return jd;};i$=z.New(0,null,ja);}else{if(h.Equals(typeof i_,"string")){jh=function(ji){var jj,jk,jl,jm;jj=ji.s;if(jj<i_.length){jl=i_.charCodeAt(jj);ji.c=jl;jm=jj+1;ji.s=jm;jk=true;}else{jk=false;}return jk;};jg=z.New(0,null,jh);}else{jg=i_.GetEnumerator();}i$=jg;}return i$;},T:$.Class({MoveNext:function(){return this.n.call(null,this);},get_Current:function(){return this.c;}},{New:function(jn,jo,jp){var jq;jq=$.New(this,{});jq.s=jn;jq.c=jo;jq.n=jp;return jq;}})},ExtraTopLevelOperatorsProxy:{array2D:function(jr){var js,ju,jv;js=function(jt){return b.ofSeq(jt);};ju=g.map(js,jr);jv=b.ofSeq(ju);jv.dims=2;return jv;}},Html:{Client:{Activator:{Activate:$.Field(function(){var jw,jx;if(C.hasDocument()){jx=D.getElementById("websharper-data");jw=jx?E(D).ready(function(){var jz,jA,jB,jC;jz=jx.getAttribute("content");jA=F.Activate(G.parse(jz));jB=I.GetFields(jA);jC=$.Tupled(function(jD){var jE,jF,jG,jH;jE=jD[0];jF=jD[1];jG=jF.get_Body();jH=D.getElementById(jE);return jG.ReplaceInDom(jH);});return b.iter(jC,jB);}):null;}else{jw=null;}return jw;}),hasDocument:function(){var $0=this,$this=this;return typeof $$.document!=="undefined";}},HtmlContentExtensions:{"IControlBody.SingleNode.Static":function(jI){return K.New(jI);},SingleNode:$.Class({ReplaceInDom:function(jJ){var jK;jK=this.node.parentNode.replaceChild(this.node,jJ);return;}},{New:function(jL){var jM;jM=$.New(this,{});jM.node=jL;return jM;}})}}},IntrinsicFunctionProxy:{Array2DZeroCreate:function(jN,jO){var jP;jP=b.init(jN,function(){return f(jO);});jP.dims=2;return jP;},BoundsCheck:function(jR,jS){return(jS<0?true:jS>=e.GetLength(jR))?c.Raise(new t("IndexOutOfRangeException")):null;},BoundsCheck2D:function(jT,jU,jV){return(((jU<0?true:jV<0)?true:jU>=jT.length)?true:jV>=(jT.length?jT[0].length:0))?c.Raise(new t("IndexOutOfRangeException")):null;},GetArray:function(jW,jX){e.BoundsCheck(jW,jX);return jW[jX];},GetArray2D:function(jY,jZ,j0){e.BoundsCheck2D(jY,jZ,j0);return jY[jZ][j0];},GetArray2DSub:function(j1,j2,j3,j4,j5){var j6,j7,j8,j9,j_;j6=j4<0?0:j4;j7=j5<0?0:j5;j8=e.Array2DZeroCreate(j6,j7);for(j9=0;j9<=j6-1;j9++){for(j_=0;j_<=j7-1;j_++){e.SetArray2D(j8,j9,j_,e.GetArray2D(j1,j2+j9,j3+j_));}}return j8;},GetArraySub:function(j$,ka,kb){var kc,kd;kc=f(kb);for(kd=0;kd<=kb-1;kd++){e.SetArray(kc,kd,e.GetArray(j$,ka+1));}return kc;},GetLength:function(ke){var kf;kf=ke.dims;return kf===2?ke.length*ke.length:ke.length;},SetArray:function(kg,kh,ki){e.BoundsCheck(kg,kh);kg[kh]=ki;return;},SetArray2D:function(kj,kk,kl,km){e.BoundsCheck2D(kj,kk,kl);kj[kk][kl]=km;return;},SetArray2DSub:function(kn,ko,kp,kq,kr,ks){var kt,ku;for(kt=0;kt<=kq-1;kt++){for(ku=0;ku<=kr-1;ku++){e.SetArray2D(kn,ko+kt,kp+ku,e.GetArray2D(ks,kt,ku));}}return;},SetArraySub:function(kv,kw,kx,ky){var kz;for(kz=0;kz<=kx-1;kz++){e.SetArray(kv,kw+kz,e.GetArray(ky,kz));}return;}},JavaScript:{JS:{Delete:function($x,$field){var $0=this,$this=this;return delete $x[$field];},ForEach:function($x,$iter){var $0=this,$this=this;for(var k in $x){if($iter(k))break;}},GetFieldNames:function($o){var $0=this,$this=this;var r=[];for(var k in $o)r.push(k);return r;},GetFieldValues:function($o){var $0=this,$this=this;var r=[];for(var k in $o)r.push($o[k]);return r;},GetFields:function($o){var $0=this,$this=this;var r=[];for(var k in $o)r.push([k,$o[k]]);return r;},Log:function($x){var $0=this,$this=this;if($$.console)$$.console.log($x);},LogMore:function($args){var $0=this,$this=this;if($$.console)$$.console.log.apply($$.console,$args);}},Pervasives:{NewFromList:function(kA){var kB,kC,kD,kE,kF;kB={};kC=i.Get(kA);while(kC.MoveNext()){kD=kC.get_Current();kE=kD[1];kF=kD[0];kB[kF]=kE;}return kB;}}},Json:{Activate:function(kG){var kH,kI,kJ;kH=kG.$TYPES;for(kI=0;kI<=e.GetLength(kH)-1;kI++){e.SetArray(kH,kI,F.lookup(e.GetArray(kH,kI)));}kJ=function(kK){var kL,kM,kN,kO,kP,kQ;if(h.Equals(kK,null)){kL=kK;}else{kM=typeof kK;if(kM==="object"){if(kK instanceof $$.Array){kO=F.shallowMap(kJ,kK);}else{kP=F.shallowMap(kJ,kK.$V);kQ=kK.$T;kO=h.Equals(typeof kQ,"undefined")?kP:F.restore(e.GetArray(kH,kQ),kP);}kN=kO;}else{kN=kK;}kL=kN;}return kL;};return kJ(kG.$DATA);},lookup:function(kR){var kS,kT,kU,kV,kW,kX;kS=e.GetLength(kR);kT=$$;kU=0;while(kU<kS){kV=e.GetArray(kR,kU);kW=kT[kV];if(!h.Equals(typeof kW,undefined)){kT=kW;kX=kU=kU+1;}else{kX=c.FailWith("Invalid server reply. Failed to find type: "+kV);}}return kT;},restore:function(kY,kZ){var k0;k0=new kY();I.ForEach(kZ,function(k1){k0[k1]=kZ[k1];return false;});return k0;},shallowMap:function(k2,k3){var k4,k5,k6,k7;if(k3 instanceof $$.Array){k4=b.map(k2,k3);}else{k5=typeof k3;if(k5==="object"){k7={};I.ForEach(k3,function(k8){k7[k8]=k2(k3[k8]);return false;});k6=k7;}else{k6=k3;}k4=k6;}return k4;}},Lazy:{Create:function(k9){var k_,k$;k_={value:undefined,created:false,eval:k9};k$=function(){var lb;if(k_.created){lb=k_.value;}else{k_.created=true;k_.value=k9(null);lb=k_.value;}return lb;};k_.eval=k$;return k_;},CreateFromValue:function(lc){return{value:lc,created:true,eval:function(){return lc;},eval:function(){return lc;}};},Force:function(lf){return lf.eval.call(null,null);}},List:{T:$.Class({GetEnumerator:function(){var lg;lg=function(lh){var li,lj,lk,ll;li=lh.s;if(li.$==0){lj=false;}else{lk=li.$1;ll=li.$0;lh.c=ll;lh.s=lk;lj=true;}return lj;};return z.New(this,null,lg);},get_Item:function(lm){return g.nth(lm,this);},get_Length:function(){return g.length(this);}},{Construct:function(ln,lo){return $.New(L,{$:1,$0:ln,$1:lo});},get_Nil:function(){return $.New(L,{$:0});}}),append:function(lp,lq){return v.ofSeq(g.append(lp,lq));},choose:function(lr,ls){return v.ofSeq(g.choose(lr,ls));},collect:function(lt,lu){return v.ofSeq(g.collect(lt,lu));},concat:function(lv){return v.ofSeq(g.concat(lv));},exists2:function(lw,lx,ly){return b.exists2(lw,b.ofSeq(lx),b.ofSeq(ly));},filter:function(lz,lA){return v.ofSeq(g.filter(lz,lA));},fold2:function(lB,lC,lD,lE){return b.fold2(lB,lC,b.ofSeq(lD),b.ofSeq(lE));},foldBack:function(lF,lG,lH){return b.foldBack(lF,b.ofSeq(lG),lH);},foldBack2:function(lI,lJ,lK,lL){return b.foldBack2(lI,b.ofSeq(lJ),b.ofSeq(lK),lL);},forall2:function(lM,lN,lO){return b.forall2(lM,b.ofSeq(lN),b.ofSeq(lO));},head:function(lP){var lQ,lR;if(lP.$==1){lR=lP.$0;lQ=lR;}else{lQ=c.FailWith("The input list was empty.");}return lQ;},init:function(lS,lT){return v.ofArray(b.init(lS,lT));},iter2:function(lU,lV,lW){return b.iter2(lU,b.ofSeq(lV),b.ofSeq(lW));},iteri2:function(lX,lY,lZ){return b.iteri2(lX,b.ofSeq(lY),b.ofSeq(lZ));},map:function(l0,l1){return v.ofSeq(g.map(l0,l1));},map2:function(l2,l3,l4){return v.ofArray(b.map2(l2,b.ofSeq(l3),b.ofSeq(l4)));},map3:function(l5,l6,l7,l8){var l9;l9=b.map2(function(l_){return function(l$){return l_(l$);};},b.map2(l5,b.ofSeq(l6),b.ofSeq(l7)),b.ofSeq(l8));return v.ofArray(l9);},mapi:function(ma,mb){return v.ofSeq(g.mapi(ma,mb));},mapi2:function(mc,md,me){return v.ofArray(b.mapi2(mc,b.ofSeq(md),b.ofSeq(me)));},max:function(mf){return g.reduce(function(mg){return function(mh){return c.Max(mg,mh);};},mf);},maxBy:function(mi,mj){return g.reduce(function(mk){return function(ml){return h.Compare(mi(mk),mi(ml))===1?mk:ml;};},mj);},min:function(mm){return g.reduce(function(mn){return function(mo){return c.Min(mn,mo);};},mm);},minBy:function(mp,mq){return g.reduce(function(mr){return function(ms){return h.Compare(mp(mr),mp(ms))===-1?mr:ms;};},mq);},ofArray:function(mt){var mu,mv;mu=$.New(L,{$:0});for(mv=0;mv<=e.GetLength(mt)-1;mv++){mu=$.New(L,{$:1,$0:e.GetArray(mt,e.GetLength(mt)-mv-1),$1:mu});}return mu;},ofSeq:function(mw){var mx,my,mz;mx=[];my=i.Get(mw);while(my.MoveNext()){mx.unshift(my.get_Current());}mz=mx.slice(0);mz.reverse();return v.ofArray(mz);},partition:function(mA,mB){var mC,mD,mE;mC=b.partition(mA,b.ofSeq(mB));mD=mC[1];mE=mC[0];return[v.ofArray(mE),v.ofArray(mD)];},permute:function(mF,mG){return v.ofArray(b.permute(mF,b.ofSeq(mG)));},reduceBack:function(mH,mI){return b.reduceBack(mH,b.ofSeq(mI));},replicate:function(mJ,mK){return v.ofArray(b.create(mJ,mK));},rev:function(mL){var mM;mM=b.ofSeq(mL);mM.reverse();return v.ofArray(mM);},scan:function(mN,mO,mP){return v.ofSeq(g.scan(mN,mO,mP));},scanBack:function(mQ,mR,mS){return v.ofArray(b.scanBack(mQ,b.ofSeq(mR),mS));},sort:function(mT){var mU;mU=b.ofSeq(mT);b.sortInPlace(mU);return v.ofArray(mU);},sortBy:function(mV,mW){return v.sortWith(function(mX){return function(mY){return c.Compare(mV(mX),mV(mY));};},mW);},sortWith:function(mZ,m0){var m1;m1=b.ofSeq(m0);b.sortInPlaceWith(mZ,m1);return v.ofArray(m1);},tail:function(m2){var m3,m4;if(m2.$==1){m4=m2.$1;m3=m4;}else{m3=c.FailWith("The input list was empty.");}return m3;},unzip:function(m5){var m6,m7,m8,m9,m_,m$;m6=[];m7=[];m8=i.Get(m5);while(m8.MoveNext()){m9=m8.get_Current();m_=m9[1];m$=m9[0];m6.push(m$);m7.push(m_);}return[v.ofArray(m6.slice(0)),v.ofArray(m7.slice(0))];},unzip3:function(na){var nb,nc,nd,ne,nf,ng,nh,ni;nb=[];nc=[];nd=[];ne=i.Get(na);while(ne.MoveNext()){nf=ne.get_Current();ng=nf[2];nh=nf[1];ni=nf[0];nb.push(ni);nc.push(nh);nd.push(ng);}return[v.ofArray(nb.slice(0)),v.ofArray(nc.slice(0)),v.ofArray(nd.slice(0))];},zip:function(nj,nk){return v.ofArray(b.zip(b.ofSeq(nj),b.ofSeq(nk)));},zip3:function(nl,nm,nn){return v.ofArray(b.zip3(b.ofSeq(nl),b.ofSeq(nm),b.ofSeq(nn)));}},OperatorIntrinsics:{GetArraySlice:function(no,np,nq){var nr,ns,nt,nu,nv,nw,nx,ny;nr=[np,nq];if(nr[0].$==0){if(nr[1].$==1){nu=nr[1].$0;nt=no.slice(0,nu+1);}else{nt=[];}ns=nt;}else{if(nr[1].$==0){nw=nr[0].$0;nv=no.slice(nw);}else{nx=nr[1].$0;ny=nr[0].$0;nv=no.slice(ny,nx+1);}ns=nv;}return ns;},GetArraySlice2D:function(nz,nA,nB,nC,nD){var nE,nF,nG,nH,nI,nJ,nK,nL,nM,nN,nO,nP,nQ,nR;if(nA.$==1){nG=nA.$0;nF=nG;}else{nF=0;}nE=nF;if(nC.$==1){nJ=nC.$0;nI=nJ;}else{nI=0;}nH=nI;if(nB.$==1){nM=nB.$0;nL=nM;}else{nL=nz.length-1;}nK=nL;if(nD.$==1){nP=nD.$0;nO=nP;}else{nO=(nz.length?nz[0].length:0)-1;}nN=nO;nQ=nK-nE+1;nR=nN-nH+1;return e.GetArray2DSub(nz,nE,nH,nQ,nR);},GetArraySlice2DFixed1:function(nS,nT,nU,nV){var nW,nX,nY,nZ,n0,n1,n2,n3,n4;if(nU.$==1){nY=nU.$0;nX=nY;}else{nX=0;}nW=nX;if(nV.$==1){n1=nV.$0;n0=n1;}else{n0=(nS.length?nS[0].length:0)-1;}nZ=n0;n2=nZ-nW+1;n3=f(n2);for(n4=0;n4<=n2-1;n4++){e.SetArray(n3,n4,e.GetArray2D(nS,nT,nW+n4));}return n3;},GetArraySlice2DFixed2:function(n5,n6,n7,n8){var n9,n_,n$,oa,ob,oc,od,oe,of;if(n6.$==1){n$=n6.$0;n_=n$;}else{n_=0;}n9=n_;if(n7.$==1){oc=n7.$0;ob=oc;}else{ob=n5.length-1;}oa=ob;od=oa-n9+1;oe=f(od);for(of=0;of<=od-1;of++){e.SetArray(oe,of,e.GetArray2D(n5,n9+of,n8));}return oe;},GetStringSlice:function(og,oh,oi){var oj,ok,ol,om,on,oo,op,oq;oj=[oh,oi];if(oj[0].$==0){if(oj[1].$==1){om=oj[1].$0;ol=og.slice(0,om+1);}else{ol="";}ok=ol;}else{if(oj[1].$==0){oo=oj[0].$0;on=og.slice(oo);}else{op=oj[1].$0;oq=oj[0].$0;on=og.slice(oq,op+1);}ok=on;}return ok;},SetArraySlice:function(or,os,ot,ou){var ov,ow,ox,oy,oz,oA;if(os.$==1){ox=os.$0;ow=ox;}else{ow=0;}ov=ow;if(ot.$==1){oA=ot.$0;oz=oA;}else{oz=e.GetLength(or)-1;}oy=oz;return e.SetArraySub(or,ov,oy-ov+1,ou);},SetArraySlice2D:function(oB,oC,oD,oE,oF,oG){var oH,oI,oJ,oK,oL,oM,oN,oO,oP,oQ,oR,oS;if(oC.$==1){oJ=oC.$0;oI=oJ;}else{oI=0;}oH=oI;if(oE.$==1){oM=oE.$0;oL=oM;}else{oL=0;}oK=oL;if(oD.$==1){oP=oD.$0;oO=oP;}else{oO=oB.length-1;}oN=oO;if(oF.$==1){oS=oF.$0;oR=oS;}else{oR=(oB.length?oB[0].length:0)-1;}oQ=oR;return e.SetArray2DSub(oB,oH,oK,oN-oH+1,oQ-oK+1,oG);},SetArraySlice2DFixed1:function(oT,oU,oV,oW,oX){var oY,oZ,o0,o1,o2,o3,o4,o5;if(oV.$==1){o0=oV.$0;oZ=o0;}else{oZ=0;}oY=oZ;if(oW.$==1){o3=oW.$0;o2=o3;}else{o2=(oT.length?oT[0].length:0)-1;}o1=o2;o4=o1-oY+1;for(o5=0;o5<=o4-1;o5++){e.SetArray2D(oT,oU,oY+o5,e.GetArray(oX,o5));}return;},SetArraySlice2DFixed2:function(o6,o7,o8,o9,o_){var o$,pa,pb,pc,pd,pe,pf,pg;if(o7.$==1){pb=o7.$0;pa=pb;}else{pa=0;}o$=pa;if(o8.$==1){pe=o8.$0;pd=pe;}else{pd=o6.length-1;}pc=pd;pf=pc-o$+1;for(pg=0;pg<=pf-1;pg++){e.SetArray2D(o6,o$+pg,o9,e.GetArray(o_,pg));}return;}},Operators:{Compare:function(ph,pi){return h.Compare(ph,pi);},Decrement:function(pj){pj.contents=pj.contents-1;},DefaultArg:function(pk,pl){var pm,pn;if(pk.$==0){pm=pl;}else{pn=pk.$0;pm=pn;}return pm;},FailWith:function(po){return c.Raise(new t(po));},Increment:function(pp){pp.contents=pp.contents+1;},KeyValue:function(pq){return[pq.K,pq.V];},Max:function(pr,ps){return h.Compare(pr,ps)===1?pr:ps;},Min:function(pt,pu){return h.Compare(pt,pu)===-1?pt:pu;},Pown:function(pv,pw){var px;px=function(py){var pz,pA,pB;if(py===1){pz=pv;}else{if(py%2===0){pB=px(py/2>>0);pA=pB*pB;}else{pA=pv*px(py-1);}pz=pA;}return pz;};return px(pw);},Raise:function($e){var $0=this,$this=this;throw $e;},Sign:function(pC){return pC===0?0:pC<0?-1:1;},Truncate:function(pD){return pD<0?M.ceil(pD):M.floor(pD);},Using:function(pE,pF){var pG;try{pG=pF(pE);}finally{pE.Dispose();}return pG;},range:function(pH,pI){return g.init(1+pI-pH,function(pJ){return pJ+pH;});},step:function(pK,pL,pM){var pN,pO,pQ,pS;pN=c.Sign(pL);pO=function(pP){return pN*(pM-pP)>=0;};pQ=g.initInfinite(function(pR){return pK+pR*pL;});pS=g.takeWhile(pO,pQ);return pS;}},Option:{bind:function(pT,pU){var pV,pW;if(pU.$==0){pV={$:0};}else{pW=pU.$0;pV=pT(pW);}return pV;},exists:function(pX,pY){var pZ,p0;if(pY.$==0){pZ=false;}else{p0=pY.$0;pZ=pX(p0);}return pZ;},fold:function(p1,p2,p3){var p4,p5;if(p3.$==0){p4=p2;}else{p5=p3.$0;p4=(p1(p2))(p5);}return p4;},foldBack:function(p6,p7,p8){var p9,p_;if(p7.$==0){p9=p8;}else{p_=p7.$0;p9=(p6(p_))(p8);}return p9;},forall:function(p$,qa){var qb,qc;if(qa.$==0){qb=true;}else{qc=qa.$0;qb=p$(qc);}return qb;},iter:function(qd,qe){var qf,qg;if(qe.$==0){qf=null;}else{qg=qe.$0;qf=qd(qg);}return qf;},map:function(qh,qi){var qj,qk;if(qi.$==0){qj={$:0};}else{qk=qi.$0;qj={$:1,$0:qh(qk)};}return qj;},toArray:function(ql){var qm,qn;if(ql.$==0){qm=[];}else{qn=ql.$0;qm=[qn];}return qm;},toList:function(qo){var qp,qq;if(qo.$==0){qp=$.New(L,{$:0});}else{qq=qo.$0;qp=v.ofArray([qq]);}return qp;}},PrintfHelpers:{padNumLeft:function(qr,qs){var qt,qu,qv,qw;qt=e.GetArray(qr,0);if((qt===" "?true:qt==="+")?true:qt==="-"){qv=qr.substr(1);qw=qs-1;qu=qt+N.PadLeftWith(qv,qw,48);}else{qu=N.PadLeftWith(qr,qs,48);}return qu;},plusForPos:function(qx,qy){return 0<=qx?"+"+qy:qy;},plusForPos0:function(qz,qA){return 0<=qz?"+"+qA:qA;},prettyPrint:function(qC){var qD,qN,qO,qP,qQ,qR,qT;qD=function(qE){var qF,qG,qH,qI,qM;qF=$$.String(qE);if(qF==="[object Object]"){qH=I.GetFields(qE);qI=$.Tupled(function(qJ){var qK,qL;qK=qJ[0];qL=qJ[1];return qK+" = "+O.prettyPrint(qL);});qM=b.map(qI,qH);qG="{"+N.concat("; ",qM)+"}";}else{qG=qF;}return qG;};qN=typeof qC;if(qN=="string"){qO="\""+qC+"\"";}else{if(qN=="object"){if(qC instanceof $$.Array){qR=function(qS){return O.prettyPrint(qS);};qT=b.map(qR,qC);qQ="[|"+N.concat("; ",qT)+"|]";}else{qQ=qD(qC);}qP=qQ;}else{qP=$$.String(qC);}qO=qP;}return qO;},printArray:function(qU,qV){var qW;qW=b.map(qU,qV);return"[|"+N.concat("; ",qW)+"|]";},printArray2D:function(qX,qY){var qZ;qZ=g.delay(function(){var q1;q1=qY.length?qY[0].length:0;return g.map(function(q2){var q3;q3=g.delay(function(){return g.map(function(q5){return qX(e.GetArray2D(qY,q2,q5));},c.range(0,q1-1));});return N.concat("; ",q3);},c.range(0,qY.length-1));});return"[["+N.concat("][",qZ)+"]]";},printList:function(q6,q7){var q8;q8=g.map(q6,q7);return"["+N.concat("; ",q8)+"]";},spaceForPos:function(q9,q_){return 0<=q9?" "+q_:q_;},toSafe:function(q$){return q$==null?"":q$;}},Queue:{Clear:function(ra){return ra.splice(0,e.GetLength(ra));},Contains:function(rb,rc){return g.exists(function(rd){return h.Equals(rc,rd);},rb);},CopyTo:function(re,rf,rg){return b.blit(re,0,rf,rg,e.GetLength(re));}},Remoting:{AjaxProvider:$.Field(function(){return Q.New();}),Async:function(rh,ri){var rj,rk,rl;rj=P.makeHeaders(rh);rk=P.makePayload(ri);rl=function(){var rn,ro;rn=R.get_CancellationToken();ro=function(rp){var rq,rI;rq=$.Tupled(function(rr){var rs,rt,ru,rv,rw,rz,rB,rE,rH;rs=rr[0];rt=rr[1];ru=rr[2];rv={contents:true};rw=function(){var ry;if(rv.contents){rv.contents=false;ry=ru(new t("OperationCanceledException"));}else{ry=null;}return ry;};rz=k.Register(rp,function(){return rw();});rB=function(rC){var rD;if(rv.contents){rv.contents=false;rz.Dispose();rD=rs(F.Activate(G.parse(rC)));}else{rD=null;}return rD;};rE=function(rF){var rG;if(rv.contents){rv.contents=false;rz.Dispose();rG=rt(rF);}else{rG=null;}return rG;};rH=P.EndPoint();return P.AjaxProvider().Async(rH,rj,rk,rB,rE);});rI=k.FromContinuations(rq);return rI;};return k.Bind(rn,ro);};return k.Delay(rl);},Call:function(rJ,rK){var rL,rM,rN,rO;rL=P.EndPoint();rM=P.makeHeaders(rJ);rN=P.makePayload(rK);rO=P.AjaxProvider().Sync(rL,rM,rN);return F.Activate(G.parse(rO));},EndPoint:$.Field(function(){return"?";}),Send:function(rP,rQ){var rR,rS,rT;rR=P.Async(rP,rQ);rS=k.Ignore(rR);rT={$:0};return k.Start(rS,rT);},XhrProvider:$.Class({Async:function(rU,rV,rW,rX,rY){return P.ajax(true,rU,rV,rW,rX,rY);},Sync:function(rZ,r0,r1){var r2;r2={contents:undefined};P.ajax(false,rZ,r0,r1,function(r3){r2.contents=r3;},function(r4){return c.Raise(r4);});return r2.contents;}},{New:function(){return $.New(this,{});}}),ajax:function($async,$url,$headers,$data,$ok,$err){var $0=this,$this=this;var xhr=new $$.XMLHttpRequest();xhr.open("POST",$url,$async);for(var h in $headers){xhr.setRequestHeader(h,$headers[h]);}function k(){if(xhr.status==200){$ok(xhr.responseText);}else{var msg="Response status is not 200: ";$err(new $$.Error(msg+xhr.status));}}if("onload"in xhr){xhr.onload=xhr.onerror=xhr.onabort=k;}else{xhr.onreadystatechange=function(){if(xhr.readyState==4){k();}};}xhr.send($data);},makeHeaders:function(r5){var r6;r6={};r6["content-type"]="application/json";r6["x-websharper-rpc"]=r5;return r6;},makePayload:function(r7){return G.stringify(r7);}},Seq:{append:function(r8,r9){return S.Of(function(){var r$,sa;r$=i.Get(r8);sa=function(sb){var sc,sd,se,sf,sg,sh;if(sb.s.MoveNext()){sd=sb.s.get_Current();sb.c=sd;sc=true;}else{if(sb.s===r$){sf=i.Get(r9);sb.s=sf;if(sf.MoveNext()){sh=sf.get_Current();sb.c=sh;sg=true;}else{sg=false;}se=sg;}else{se=false;}sc=se;}return sc;};return z.New(r$,null,sa);});},average:function(si){var sj,so,sp;sj=g.fold($.Tupled(function(sk){var sl,sm;sl=sk[0];sm=sk[1];return function(sn){return[sl+1,sm+sn];};}),[0,0],si);so=sj[1];sp=sj[0];return so/sp;},averageBy:function(sq,sr){var ss,sx,sy;ss=g.fold($.Tupled(function(st){var su,sv;su=st[0];sv=st[1];return function(sw){return[su+1,sv+sq(sw)];};}),[0,0],sr);sx=ss[1];sy=ss[0];return sx/sy;},cache:function(sz){var sA,sB,sC;sA=[];sB=i.Get(sz);sC=function(){var sE;sE=function(sF){var sG,sH,sI,sJ,sK,sL;if(sF.s+1<sA.length){sH=sF.s+1;sF.s=sH;sI=sA[sF.s];sF.c=sI;sG=true;}else{if(sB.MoveNext()){sK=sF.s+1;sF.s=sK;sL=sB.get_Current();sF.c=sL;sA.push(sF.get_Current());sJ=true;}else{sJ=false;}sG=sJ;}return sG;};return z.New(0,null,sE);};return S.Of(sC);},choose:function(sM,sN){var sO;sO=function(sP){var sQ,sR,sS;sQ=sM(sP);if(sQ.$==0){sR=$.New(L,{$:0});}else{sS=sQ.$0;sR=v.ofArray([sS]);}return sR;};return g.collect(sO,sN);},collect:function(sT,sU){return g.concat(g.map(sT,sU));},compareWith:function(sV,sW,sX){var sY,sZ,s0,s1,s2;sY=i.Get(sW);sZ=i.Get(sX);s0=0;s1=true;while(s1?s0===0:false){s2=[sY.MoveNext(),sZ.MoveNext()];s2[0]?s2[1]?s0=(sV(sY.get_Current()))(sZ.get_Current()):s0=1:s2[1]?s0=-1:s1=false;}return s0;},concat:function(s3){return S.Of(function(){var s5,s6;s5=i.Get(s3);s6=function(s7){var s8,s9,s_,s$,ta,tb;s8=s7.s;if(h.Equals(s8,null)){if(s5.MoveNext()){s$=i.Get(s5.get_Current());s7.s=s$;s_=s6(s7);}else{s_=false;}s9=s_;}else{if(s8.MoveNext()){tb=s8.get_Current();s7.c=tb;ta=true;}else{s7.s=null;ta=s6(s7);}s9=ta;}return s9;};return z.New(null,null,s6);});},countBy:function(tc,td){var te;te=function(){var tg,th,ti,tj,tk,tl,tm,to,tp;tg={};th=i.Get(td);ti=[];while(th.MoveNext()){tj=tc(th.get_Current());tk=h.Hash(tj);if(tg.hasOwnProperty(tk)){tl=void(tg[tk]=tg[tk]+1);}else{ti.push(tj);tl=void(tg[tk]=1);}}tm=function(tn){return[tn,tg[h.Hash(tn)]];};to=ti.slice(0);tp=b.map(tm,to);return tp;};return g.delay(te);},delay:function(tq){return S.Of(function(){return i.Get(tq(null));});},distinct:function(ts){return g.distinctBy(function(tt){return tt;},ts);},distinctBy:function(tu,tv){var tw;tw=function(){var ty,tz,tA;ty=i.Get(tv);tz={};tA=function(tB){var tC,tD,tE,tH,tJ,tK,tL;if(ty.MoveNext()){tD=ty.get_Current();tE=function(tF){var tG;tG=tu(tF);return h.Hash(tG);};tH=function(tI){return tz.hasOwnProperty(tE(tI));};tJ=tH(tD);while(tJ?ty.MoveNext():false){tD=ty.get_Current();tJ=tH(tD);}if(tJ){tK=false;}else{tz[tE(tD)]=null;tL=tD;tB.c=tL;tK=true;}tC=tK;}else{tC=false;}return tC;};return z.New(null,null,tA);};return S.Of(tw);},empty:function(){return[];},enumFinally:function(tM,tN){return S.Of(function(){var tP,tQ,tR,tS;try{tQ=i.Get(tM);}catch(tR){tN(null);tQ=c.Raise(tR);}tP=tQ;tS=function(tT){var tU,tV,tW,tX;try{if(tP.MoveNext()){tW=tP.get_Current();tT.c=tW;tV=true;}else{tN(null);tV=false;}tU=tV;}catch(tX){tN(null);tU=c.Raise(tX);}return tU;};return z.New(null,null,tS);});},enumUsing:function(tY,tZ){return tZ(tY);},enumWhile:function(t0,t1){return S.Of(function(){var t3,ub;t3=function(t4){var t5,t6,t7,t8,t9,t_,t$,ua;t5=t4.s;if(t5.$==1){t7=t5.$0;if(t7.MoveNext()){t9=t7.get_Current();t4.c=t9;t8=true;}else{t_={$:0};t4.s=t_;t8=t3(t4);}t6=t8;}else{if(t0(null)){ua={$:1,$0:i.Get(t1)};t4.s=ua;t$=t3(t4);}else{t$=false;}t6=t$;}return t6;};ub={$:0};return z.New(ub,null,t3);});},exists:function(uc,ud){var ue,uf;ue=i.Get(ud);uf=false;while(!uf?ue.MoveNext():false){uf=uc(ue.get_Current());}return uf;},exists2:function(ug,uh,ui){var uj,uk,ul;uj=i.Get(uh);uk=i.Get(ui);ul=false;while((!ul?uj.MoveNext():false)?uk.MoveNext():false){ul=(ug(uj.get_Current()))(uk.get_Current());}return ul;},filter:function(um,un){var uo;uo=function(){var uq,ur;uq=i.Get(un);ur=function(us){var ut,uu,uv,uw,ux;ut=uq.MoveNext();uu=uq.get_Current();uv=false;while(ut){if(um(uu)){ux=uu;us.c=ux;uv=true;uw=ut=false;}else{uw=uq.MoveNext()?uu=uq.get_Current():ut=false;}}return uv;};return z.New(null,null,ur);};return S.Of(uo);},find:function(uy,uz){var uA,uB,uC;uA=g.tryFind(uy,uz);if(uA.$==0){uB=c.FailWith("KeyNotFoundException");}else{uC=uA.$0;uB=uC;}return uB;},findIndex:function(uD,uE){var uF,uG,uH;uF=g.tryFindIndex(uD,uE);if(uF.$==0){uG=c.FailWith("KeyNotFoundException");}else{uH=uF.$0;uG=uH;}return uG;},fold:function(uI,uJ,uK){var uL,uM;uL=uJ;uM=i.Get(uK);while(uM.MoveNext()){uL=(uI(uL))(uM.get_Current());}return uL;},forall:function(uN,uO){return!g.exists(function(uP){return!uN(uP);},uO);},forall2:function(uQ,uR,uS){return!g.exists2(function(uT){return function(uU){return!(uQ(uT))(uU);};},uR,uS);},groupBy:function(uV,uW){return g.delay(function(){var uY,uZ,u0,u1,u2,u3,u4;uY={};uZ={};u0=[];u1=i.Get(uW);while(u1.MoveNext()){u2=u1.get_Current();u3=uV(u2);u4=h.Hash(u3);!uY.hasOwnProperty(u4)?u0.push(u3):null;uZ[u4]=u3;uY.hasOwnProperty(u4)?uY[u4].push(u2):void(uY[u4]=[u2]);}return b.map(function(u5){return[u5,uY[h.Hash(u5)]];},u0);});},head:function(u6){var u7;u7=i.Get(u6);return u7.MoveNext()?u7.get_Current():g.insufficient();},init:function(u8,u9){return g.take(u8,g.initInfinite(u9));},initInfinite:function(u_){var u$;u$=function(){var vb;vb=function(vc){var vd,ve;vd=u_(vc.s);vc.c=vd;ve=vc.s+1;vc.s=ve;return true;};return z.New(0,null,vb);};return S.Of(u$);},insufficient:function(){return c.FailWith("The input sequence has an insufficient number of elements.");},isEmpty:function(vf){var vg;vg=i.Get(vf);return!vg.MoveNext();},iter:function(vh,vi){return g.iteri(function(){return function(vk){return vh(vk);};},vi);},iter2:function(vl,vm,vn){var vo,vp;vo=i.Get(vm);vp=i.Get(vn);while(vo.MoveNext()?vp.MoveNext():false){(vl(vo.get_Current()))(vp.get_Current());}return;},iteri:function(vq,vr){var vs,vt;vs=0;vt=i.Get(vr);while(vt.MoveNext()){(vq(vs))(vt.get_Current());vs=vs+1;}return;},length:function(vu){var vv,vw;vv=0;vw=i.Get(vu);while(vw.MoveNext()){vv=vv+1;}return vv;},map:function(vx,vy){var vz;vz=function(){var vB,vC;vB=i.Get(vy);vC=function(vD){var vE,vF;if(vB.MoveNext()){vF=vx(vB.get_Current());vD.c=vF;vE=true;}else{vE=false;}return vE;};return z.New(null,null,vC);};return S.Of(vz);},mapi:function(vG,vH){return g.mapi2(vG,g.initInfinite(function(vI){return vI;}),vH);},mapi2:function(vJ,vK,vL){var vM;vM=function(){var vO,vP,vQ;vO=i.Get(vK);vP=i.Get(vL);vQ=function(vR){var vS,vT;if(vO.MoveNext()?vP.MoveNext():false){vT=(vJ(vO.get_Current()))(vP.get_Current());vR.c=vT;vS=true;}else{vS=false;}return vS;};return z.New(null,null,vQ);};return S.Of(vM);},max:function(vU){return g.reduce(function(vV){return function(vW){return h.Compare(vV,vW)>=0?vV:vW;};},vU);},maxBy:function(vX,vY){return g.reduce(function(vZ){return function(v0){return h.Compare(vX(vZ),vX(v0))>=0?vZ:v0;};},vY);},min:function(v1){return g.reduce(function(v2){return function(v3){return h.Compare(v2,v3)<=0?v2:v3;};},v1);},minBy:function(v4,v5){return g.reduce(function(v6){return function(v7){return h.Compare(v4(v6),v4(v7))<=0?v6:v7;};},v5);},nth:function(v8,v9){var v_,v$;v8<0?c.FailWith("negative index requested"):null;v_=-1;v$=i.Get(v9);while(v_<v8){!v$.MoveNext()?g.insufficient():null;v_=v_+1;}return v$.get_Current();},pairwise:function(wa){var wb,wd;wb=function(wc){return[e.GetArray(wc,0),e.GetArray(wc,1)];};wd=g.windowed(2,wa);return g.map(wb,wd);},pick:function(we,wf){var wg,wh,wi;wg=g.tryPick(we,wf);if(wg.$==0){wh=c.FailWith("KeyNotFoundException");}else{wi=wg.$0;wh=wi;}return wh;},readOnly:function(wj){return S.Of(function(){return i.Get(wj);});},reduce:function(wl,wm){var wn,wo;wn=i.Get(wm);!wn.MoveNext()?c.FailWith("The input sequence was empty"):null;wo=wn.get_Current();while(wn.MoveNext()){wo=(wl(wo))(wn.get_Current());}return wo;},scan:function(wp,wq,wr){var ws;ws=function(){var wu,wv;wu=i.Get(wr);wv=function(ww){var wx,wy,wz;if(ww.s){if(wu.MoveNext()){wz=(wp(ww.get_Current()))(wu.get_Current());ww.c=wz;wy=true;}else{wy=false;}wx=wy;}else{ww.c=wq;ww.s=true;wx=true;}return wx;};return z.New(false,null,wv);};return S.Of(ws);},skip:function(wA,wB){return S.Of(function(){var wD,wE;wD=i.Get(wB);for(wE=1;wE<=wA;wE++){!wD.MoveNext()?g.insufficient():null;}return wD;});},skipWhile:function(wF,wG){return S.Of(function(){var wI,wJ,wK,wL,wM;wI=i.Get(wG);wJ=true;while(wI.MoveNext()?wF(wI.get_Current()):false){wJ=false;}if(wJ){wL=g.empty();wK=i.Get(wL);}else{wM=function(wN){var wO,wP,wQ,wR;if(wN.s){wN.s=false;wP=wI.get_Current();wN.c=wP;wO=true;}else{wQ=wI.MoveNext();wR=wI.get_Current();wN.c=wR;wO=wQ;}return wO;};wK=z.New(true,null,wM);}return wK;});},sort:function(wS){return g.sortBy(function(wT){return wT;},wS);},sortBy:function(wU,wV){return g.delay(function(){var wX;wX=b.ofSeq(wV);b.sortInPlaceBy(wU,wX);return wX;});},sum:function(wY){return g.fold(function(wZ){return function(w0){return wZ+w0;};},0,wY);},sumBy:function(w1,w2){return g.fold(function(w3){return function(w4){return w3+w1(w4);};},0,w2);},take:function(w5,w6){return S.Of(function(){var w8,w9;w8=i.Get(w6);w9=function(w_){var w$,xa,xb,xc;if(w_.s>=w5){w$=false;}else{if(w8.MoveNext()){xb=w_.s+1;w_.s=xb;xc=w8.get_Current();w_.c=xc;xa=true;}else{w8.Dispose();w_.s=w5;xa=false;}w$=xa;}return w$;};return z.New(0,null,w9);});},takeWhile:function(xd,xe){return g.delay(function(){return g.enumUsing(i.Get(xe),function(xg){return g.enumWhile(function(){return xg.MoveNext()?xd(xg.get_Current()):false;},g.delay(function(){return[xg.get_Current()];}));});});},toArray:function(xj){var xk,xl,xm;xk=[];xl=i.Get(xj);while(xl.MoveNext()){xm=xl.get_Current();xk.push(xm);}return xk.slice(0);},toList:function(xn){return v.ofSeq(xn);},truncate:function(xo,xp){return g.delay(function(){return g.enumUsing(i.Get(xp),function(xr){var xs;xs={contents:0};return g.enumWhile(function(){return xr.MoveNext()?xs.contents<xo:false;},g.delay(function(){c.Increment(xs);return[xr.get_Current()];}));});});},tryFind:function(xv,xw){var xx,xy,xz;xx=i.Get(xw);xy={$:0};while(xy.$==0?xx.MoveNext():false){xz=xx.get_Current();xv(xz)?xy={$:1,$0:xz}:null;}return xy;},tryFindIndex:function(xA,xB){var xC,xD,xE,xF;xC=i.Get(xB);xD=true;xE=0;while(xD?xC.MoveNext():false){xF=xC.get_Current();xA(xF)?xD=false:xE=xE+1;}return xD?{$:0}:{$:1,$0:xE};},tryPick:function(xG,xH){var xI,xJ;xI=i.Get(xH);xJ={$:0};while(h.Equals(xJ,{$:0})?xI.MoveNext():false){xJ=xG(xI.get_Current());}return xJ;},unfold:function(xK,xL){var xM;xM=function(){var xO;xO=function(xP){var xQ,xR,xS,xT;xQ=xK(xP.s);if(xQ.$==0){xR=false;}else{xS=xQ.$0[0];xT=xQ.$0[1];xP.c=xS;xP.s=xT;xR=true;}return xR;};return z.New(xL,null,xO);};return S.Of(xM);},windowed:function(xU,xV){xU<=0?c.FailWith("The input must be non-negative."):null;return g.delay(function(){return g.enumUsing(i.Get(xV),function(xX){var xY;xY=[];return g.append(g.enumWhile(function(){return xY.length<xU?xX.MoveNext():false;},g.delay(function(){xY.push(xX.get_Current());return g.empty();})),g.delay(function(){return xY.length===xU?g.append([xY.slice(0)],g.delay(function(){return g.enumWhile(function(){return xX.MoveNext();},g.delay(function(){xY.shift();xY.push(xX.get_Current());return[xY.slice(0)];}));})):g.empty();}));});});},zip:function(x5,x6){return g.mapi2(function(x7){return function(x8){return[x7,x8];};},x5,x6);},zip3:function(x9,x_,x$){return g.mapi2(function(ya){return $.Tupled(function(yb){var yc,yd;yc=yb[0];yd=yb[1];return[ya,yc,yd];});},x9,g.zip(x_,x$));}},Stack:{Clear:function(ye){return ye.splice(0,e.GetLength(ye));},Contains:function(yf,yg){return g.exists(function(yh){return h.Equals(yg,yh);},yf);},CopyTo:function(yi,yj,yk){return b.blit(yj,0,yj,yk,e.GetLength(yi));}},Strings:{Compare:function(yl,ym){return c.Compare(yl,ym);},CopyTo:function(yn,yo,yp,yq,yr){return b.blit(N.ToCharArray(yn),yo,yp,yq,yr);},EndsWith:function($x,$s){var $0=this,$this=this;return $x.substring($x.length-$s.length)==$s;},IndexOf:function($s,$c,$i){var $0=this,$this=this;return $s.indexOf($$.String.fromCharCode($c),$i);},Insert:function($x,$index,$s){var $0=this,$this=this;return $x.substring(0,$index-1)+$s+$x.substring($index);},IsNullOrEmpty:function($x){var $0=this,$this=this;return $x==null||$x=="";},Join:function($sep,$values){var $0=this,$this=this;return $values.join($sep);},LastIndexOf:function($s,$c,$i){var $0=this,$this=this;return $s.lastIndexOf($$.String.fromCharCode($c),$i);},PadLeft:function(ys,yt){return N.PadLeftWith(ys,yt,32);},PadLeftWith:function($s,$n,$c){var $0=this,$this=this;return $$.Array($n-$s.length+1).join($$.String.fromCharCode($c))+$s;},PadRight:function(yu,yv){return N.PadRightWith(yu,yv,32);},PadRightWith:function($s,$n,$c){var $0=this,$this=this;return $s+$$.Array($n-$s.length+1).join($$.String.fromCharCode($c));},RegexEscape:function($s){var $0=this,$this=this;return $s.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");},Remove:function($x,$ix,$ct){var $0=this,$this=this;return $x.substring(0,$ix)+$x.substring($ix+$ct);},Replace:function(yw,yx,yy){var yz;yz=function(yA){var yB,yC,yD,yE,yF;yB=yA.indexOf(yx);if(yB!==-1){yD=N.ReplaceOnce(yA,yx,yy);yE=yB+yy.length;yF=yB+yy.length;yC=N.Substring(yD,0,yF)+yz(yD.substring(yE));}else{yC=yA;}return yC;};return yz(yw);},ReplaceChar:function(yG,yH,yI){return N.Replace(yG,T.fromCharCode(yH),T.fromCharCode(yI));},ReplaceOnce:function($string,$search,$replace){var $0=this,$this=this;return $string.replace($search,$replace);},Split:function(yJ,yK,yL){var yM;yM=N.SplitWith(yJ,yK);return yL===1?b.filter(function(yN){return yN!=="";},yM):yM;},SplitChars:function(yO,yP,yQ){var yR;yR="["+N.RegexEscape(T.fromCharCode.apply(undefined,yP))+"]";return N.Split(yO,new U(yR),yQ);},SplitStrings:function(yS,yT,yU){var yV;yV=N.concat("|",b.map(function(yW){return N.RegexEscape(yW);},yT));return N.Split(yS,new U(yV),yU);},SplitWith:function($str,$pat){var $0=this,$this=this;return $str.split($pat);},StartsWith:function($t,$s){var $0=this,$this=this;return $t.substring(0,$s.length)==$s;},Substring:function($s,$ix,$ct){var $0=this,$this=this;return $s.substr($ix,$ct);},ToCharArray:function(yX){return b.init(yX.length,function(yY){return yX.charCodeAt(yY);});},ToCharArrayRange:function(yZ,y0,y1){return b.init(y1,function(y2){return yZ.charCodeAt(y0+y2);});},Trim:function($s){var $0=this,$this=this;return $s.replace(/^\s+/,"").replace(/\s+$/,"");},collect:function(y3,y4){return b.init(y4.length,function(y5){return y3(y4.charCodeAt(y5));}).join("");},concat:function(y6,y7){return g.toArray(y7).join(y6);},exists:function(y8,y9){return g.exists(y8,N.protect(y9));},forall:function(y_,y$){return g.forall(y_,N.protect(y$));},init:function(za,zb){return b.init(za,zb).join("");},iter:function(zc,zd){return g.iter(zc,N.protect(zd));},iteri:function(ze,zf){return g.iteri(ze,N.protect(zf));},length:function(zg){return N.protect(zg).length;},map:function(zh,zi){return N.collect(function(zj){return T.fromCharCode(zh(zj));},N.protect(zi));},mapi:function(zk,zl){return g.toArray(g.mapi(function(zm){return function(zn){return T.fromCharCode((zk(zm))(zn));};},zl)).join("");},protect:function(zo){return zo===null?"":zo;},replicate:function(zp,zq){return N.init(zp,function(){return zq;});}},Unchecked:{Compare:function(zs,zt){var zu,zv,zw,zx;if(zs===zt){zu=0;}else{zv=typeof zs;if(zv==="undefined"){zx=typeof zt;zw=zx==="undefined"?0:-1;}else{zw=zv==="function"?c.FailWith("Cannot compare function values."):zv==="boolean"?zs<zt?-1:1:zv==="number"?zs<zt?-1:1:zv==="string"?zs<zt?-1:1:zs===null?-1:zt===null?1:"CompareTo"in zs?zs.CompareTo(zt):(zs instanceof f?zt instanceof f:false)?h.compareArrays(zs,zt):(zs instanceof w?zt instanceof w:false)?h.compareDates(zs,zt):h.compareArrays(I.GetFields(zs),I.GetFields(zt));}zu=zw;}return zu;},Equals:function(zy,zz){var zA,zB;if(zy===zz){zA=true;}else{zB=typeof zy;zA=zB==="object"?zy===null?false:zz===null?false:"Equals"in zy?zy.Equals(zz):(zy instanceof f?zz instanceof f:false)?h.arrayEquals(zy,zz):(zy instanceof w?zz instanceof w:false)?h.dateEquals(zy,zz):h.arrayEquals(I.GetFields(zy),I.GetFields(zz)):false;}return zA;},Hash:function(zC){var zD;zD=typeof zC;return zD==="function"?0:zD==="boolean"?zC?1:0:zD==="number"?zC:zD==="string"?h.hashString(zC):zD==="object"?zC==null?0:zC instanceof f?h.hashArray(zC):h.hashObject(zC):0;},arrayEquals:function(zE,zF){var zG,zH,zI;if(e.GetLength(zE)===e.GetLength(zF)){zH=true;zI=0;while(zH?zI<e.GetLength(zE):false){!h.Equals(e.GetArray(zE,zI),e.GetArray(zF,zI))?zH=false:null;zI=zI+1;}zG=zH;}else{zG=false;}return zG;},compareArrays:function(zJ,zK){var zL,zM,zN,zO;if(e.GetLength(zJ)<e.GetLength(zK)){zL=-1;}else{if(e.GetLength(zJ)>e.GetLength(zK)){zM=1;}else{zN=0;zO=0;while(zN===0?zO<e.GetLength(zJ):false){zN=h.Compare(e.GetArray(zJ,zO),e.GetArray(zK,zO));zO=zO+1;}zM=zN;}zL=zM;}return zL;},compareDates:function(zP,zQ){return c.Compare(zP.getTime(),zQ.getTime());},dateEquals:function(zR,zS){return zR.getTime()===zS.getTime();},hashArray:function(zT){var zU,zV;zU=-34948909;for(zV=0;zV<=e.GetLength(zT)-1;zV++){zU=h.hashMix(zU,h.Hash(e.GetArray(zT,zV)));}return zU;},hashMix:function(zW,zX){return(zW<<5)+zW+zX;},hashObject:function(zY){var zZ,z0,z3;if("GetHashCode"in zY){zZ=zY.GetHashCode();}else{z0=function(z1,z2){return h.hashMix(z1,z2);};z3={contents:0};I.ForEach(zY,function(z4){z3.contents=z0(z0(z3.contents,h.hashString(z4)),h.Hash(zY[z4]));return false;});zZ=z3.contents;}return zZ;},hashString:function(z5){var z6,z7,z8;if(z5===null){z6=0;}else{z7=5381;for(z8=0;z8<=z5.length-1;z8++){z7=h.hashMix(z7,z5.charCodeAt(z8)<<0);}z6=z7;}return z6;}},Util:{addListener:function(z9,z_){z9.Subscribe(r.observer(z_));},observer:function(z$){return u.NewFromList(v.ofArray([["OnCompleted",function(){}],["OnError",function(){}],["OnNext",z$]]));},subscribeTo:function(Ac,Ad){return Ac.Subscribe(r.observer(Ad));}}}}});$.OnInit(function(){a=$.Safe($$.IntelliFactory.WebSharper);b=$.Safe(a.Arrays);c=$.Safe(a.Operators);d=$.Safe($$.Number);e=$.Safe(a.IntrinsicFunctionProxy);f=$.Safe($$.Array);g=$.Safe(a.Seq);h=$.Safe(a.Unchecked);i=$.Safe(a.Enumerator);j=$.Safe(a.Arrays2D);k=$.Safe(a.Concurrency);l=$.Safe(a.AggregateException);m=$.Safe(a.Option);n=$.Safe($$.clearTimeout);o=$.Safe($$.setTimeout);p=$.Safe(a.CancellationTokenSource);q=$.Safe(a.Char);r=$.Safe(a.Util);s=$.Safe(a.Lazy);t=$.Safe($$.Error);u=$.Safe(a.Pervasives);v=$.Safe(a.List);w=$.Safe($$.Date);x=$.Safe($$.console);y=$.Safe(k.Scheduler);z=$.Safe(i.T);A=$.Safe(a.Html);B=$.Safe(A.Client);C=$.Safe(B.Activator);D=$.Safe($$.document);E=$.Safe($$.jQuery);F=$.Safe(a.Json);G=$.Safe($$.JSON);H=$.Safe(a.JavaScript);I=$.Safe(H.JS);J=$.Safe(B.HtmlContentExtensions);K=$.Safe(J.SingleNode);L=$.Safe(v.T);M=$.Safe($$.Math);N=$.Safe(a.Strings);O=$.Safe(a.PrintfHelpers);P=$.Safe(a.Remoting);Q=$.Safe(P.XhrProvider);R=$.Safe(a.AsyncProxy);S=$.Safe(a.Enumerable);T=$.Safe($$.String);return U=$.Safe($$.RegExp);});$.OnLoad(function(){P.EndPoint();P.AjaxProvider();C.Activate();k.scheduler();k.defCTS();k.GetCT();return;});}());

(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q;$.Define($$,{IntelliFactory:{WebSharper:{Testing:{Assert:{For:function(r,s,t){var u,v,w;u=s.Base;for(v=0;v<=b.GetLength(u)-1;v++){t(b.GetArray(s.Base,v));}for(w=1;w<=r;w++){t(s.Next.call(null,null));}return;},Raises:function(x){var y,z;try{x(null);y=c(false,"Assert raises exception test failed.");}catch(z){y=c(true,"Pass.");}return y;}},Pervasives:{Is:function(A,B){var C,D;if(!d.Equals(A,B)){D=["Equality test failed.",A,B];e?e.log.apply(e,D):undefined;C=c(false,"Equality test failed.");}else{C=c(true,"Pass.");}return C;},Isnt:function(E,F){var G,H;if(d.Equals(E,F)){H=["Inequality test failed.",E,F];e?e.log.apply(e,H):undefined;G=c(false,"Inequality test failed.");}else{G=c(true,"Pass.");}return G;},Test:function(I){return h.New(I);},TestBuilder:$.Class({Delay:function(J){return i(this.name,J);},Zero:function(){return null;}},{New:function(K){var L;L=$.New(this,{});L.name=K;return L;}})},Random:{ArrayOf:function(M){return{Base:[[]],Next:function(){var O;O=j.Natural().Next.call(null,null)%100;return k.init(O,function(){return M.Next.call(null,null);});}};},Boolean:$.Field(function(){return{Base:[true,false],Next:function(){return j.StandardUniform().Next.call(null,null)>0.5;}};}),Const:function(R){return{Base:[R],Next:function(){return R;}};},Exponential:function(T){return{Base:[],Next:function(){var V;V=j.StandardUniform().Next.call(null,null);return-l.log(1-V)/T;}};},Float:$.Field(function(){return{Base:[0],Next:function(){var X;X=j.Boolean().Next.call(null,null)?1:-1;return X*j.Exponential(0.1).Next.call(null,null);}};}),FloatExhaustive:$.Field(function(){return{Base:[0,m,n,-n],Next:function(){return j.Float().Next.call(null,null);}};}),FloatWithin:function(Z,_0){return{Base:[Z,_0],Next:function(){return Z+(_0-Z)*l.random();}};},Implies:function(_2,_3){return!_2?true:_3;},Imply:function(_4,_5){return j.Implies(_4,_5);},Int:$.Field(function(){return{Base:[0,1,-1],Next:function(){return l.round(j.Float().Next.call(null,null));}};}),ListOf:function(_7){var _8,_;_8=function(_9){return o.ofArray(_9);};_=j.ArrayOf(_7);return j.Map(_8,_);},Map:function(ba,bb){var bc;bc=bb.Next;return{Base:k.map(ba,bb.Base),Next:function(bd){return ba(bc(bd));}};},Mix:function(bd,be){var bf;bf={contents:false};return{Base:bd.Base.concat(be.Base),Next:function(){bf.contents=!bf.contents;return bf.contents?bd.Next.call(null,null):be.Next.call(null,null);}};},Natural:$.Field(function(){var bh;bh=j.Int().Next;return{Base:[0,1],Next:function(bi){var bj;bj=bh(bi);return l.abs(bj);}};}),OneOf:function(bk){var bl;bl=j.Within(1,b.GetLength(bk));return{Base:bk,Next:function(){return b.GetArray(bk,bl.Next.call(null,null)-1);}};},OptionOf:function(bn){return j.Mix(j.Const({$:0}),j.Map(function(bo){return{$:1,$0:bo};},bn));},StandardUniform:$.Field(function(){return{Base:[],Next:function(){return l.random();}};}),String:$.Field(function(){return{Base:[""],Next:function(){var br,bs;br=j.Natural().Next.call(null,null)%100;bs=k.init(br,function(){return j.Int().Next.call(null,null)%256;});return p.fromCharCode.apply(undefined,bs);}};}),StringExhaustive:$.Field(function(){return{Base:[null,""],Next:j.String().Next};}),Tuple2Of:function(bu,bv){return{Base:q.toArray(q.delay(function(){return q.collect(function(bx){return q.map(function(by){return[bx,by];},bv.Base);},bu.Base);})),Next:function(){return[bu.Next.call(null,null),bv.Next.call(null,null)];}};},Tuple3Of:function(bA,bB,bC){return{Base:q.toArray(q.delay(function(){return q.collect(function(bE){return q.collect(function(bF){return q.map(function(bG){return[bE,bF,bG];},bC.Base);},bB.Base);},bA.Base);})),Next:function(){return[bA.Next.call(null,null),bB.Next.call(null,null),bC.Next.call(null,null)];}};},Within:function(bI,bJ){return{Base:[bI,bJ],Next:function(){return j.Natural().Next.call(null,null)%(bJ-bI)+bI;}};}}}}}});$.OnInit(function(){a=$.Safe($$.IntelliFactory.WebSharper);b=$.Safe(a.IntrinsicFunctionProxy);c=$.Safe($$.ok);d=$.Safe(a.Unchecked);e=$.Safe($$.console);f=$.Safe(a.Testing);g=$.Safe(f.Pervasives);h=$.Safe(g.TestBuilder);i=$.Safe($$.test);j=$.Safe(f.Random);k=$.Safe(a.Arrays);l=$.Safe($$.Math);m=$.Safe($$.NaN);n=$.Safe($$.Infinity);o=$.Safe(a.List);p=$.Safe($$.String);return q=$.Safe(a.Seq);});$.OnLoad(function(){j.StringExhaustive();j.String();j.StandardUniform();j.Natural();j.Int();j.FloatExhaustive();j.Float();j.Boolean();return;});}());

(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x;$.Define($$,{IntelliFactory:{WebSharper:{Html:{Client:{Attribute:$.Class({get_Body:function(){var y;y=this.HtmlProvider.CreateAttribute(this.Name);y.value=this.Value;return y;}},{New:function(z){var A;A=$.New(this,e.New());A.HtmlProvider=z;return A;},New1:function(B,C,D){var E;E=d.New(B);E.Name=C;E.Value=D;return E;}}),AttributeBuilder:$.Class({Class:function(F){return this.NewAttr("class",F);},NewAttr:function(G,H){var I;I=d.New1(this.HtmlProvider,G,H);return I;},get_CheckBox:function(){return this.NewAttr("type","checkbox");},get_Hidden:function(){return this.NewAttr("type","hidden");},get_Password:function(){return this.NewAttr("type","password");},get_Radio:function(){return this.NewAttr("type","radio");},get_Reset:function(){return this.NewAttr("type","reset");},get_Submit:function(){return this.NewAttr("type","submit");},get_TextField:function(){return this.NewAttr("type","textfield");}},{New:function(J){var K;K=$.New(this,{});K.HtmlProvider=J;return K;}}),Default:{A:function(L){var M;M=f.Tags();return M.NewTag("a",L);},Action:function(N){var O;O=f.Attr();return O.NewAttr("action",N);},Align:function(P){var Q;Q=f.Attr();return Q.NewAttr("align",P);},Alt:function(R){var S;S=f.Attr();return S.NewAttr("alt",R);},Attr:$.Field(function(){return g.Attr();}),B:function(T){var U;U=f.Tags();return U.NewTag("b",T);},Body:function(V){var W;W=f.Tags();return W.NewTag("body",V);},Br:function(X){var Y;Y=f.Tags();return Y.NewTag("br",X);},Button:function(Z){var _0;_0=f.Tags();return _0.NewTag("button",Z);},Code:function(_1){var _2;_2=f.Tags();return _2.NewTag("code",_1);},Deprecated:$.Field(function(){return g.DeprecatedHtml();}),Div:function(_3){return f.Tags().Div(_3);},Em:function(_4){var _5;_5=f.Tags();return _5.NewTag("em",_4);},Form:function(_6){var _7;_7=f.Tags();return _7.NewTag("form",_6);},H1:function(_8){var _9;_9=f.Tags();return _9.NewTag("h1",_8);},H2:function(_){var ba;ba=f.Tags();return ba.NewTag("h2",_);},H3:function(ba){var bb;bb=f.Tags();return bb.NewTag("h3",ba);},H4:function(bc){var bd;bd=f.Tags();return bd.NewTag("h4",bc);},HRef:function(be){var bf;bf=f.Attr();return bf.NewAttr("href",be);},HTML5:{Attr:$.Field(function(){return h.Attr();}),Tags:$.Field(function(){return h.Tags();})},Head:function(bg){var bh;bh=f.Tags();return bh.NewTag("head",bg);},Height:function(bi){var bj;bj=f.Attr();return bj.NewAttr("height",bi);},Hr:function(bk){var bl;bl=f.Tags();return bl.NewTag("hr",bk);},I:function(bm){var bn;bn=f.Tags();return bn.NewTag("i",bm);},IFrame:function(bo){var bp;bp=f.Tags();return bp.NewTag("iframe",bo);},Id:function(bq){var br;br=f.Attr();return br.NewAttr("id",bq);},Img:function(bs){var bt;bt=f.Tags();return bt.NewTag("img",bs);},Input:function(bu){var bv;bv=f.Tags();return bv.NewTag("input",bu);},LI:function(bw){var bx;bx=f.Tags();return bx.NewTag("li",bw);},Name:function(by){var bz;bz=f.Attr();return bz.NewAttr("name",by);},NewAttr:function(bA){return function(bB){return f.Attr().NewAttr(bA,bB);};},OL:function(bC){var bD;bD=f.Tags();return bD.NewTag("ol",bC);},OnLoad:function(bE){return g.HtmlProvider().OnDocumentReady(bE);},P:function(bF){var bG;bG=f.Tags();return bG.NewTag("p",bF);},Pre:function(bH){var bI;bI=f.Tags();return bI.NewTag("pre",bH);},RowSpan:function(bJ){var bK;bK=f.Attr();return bK.NewAttr("rowspan",bJ);},Script:function(bL){var bM;bM=f.Tags();return bM.NewTag("script",bL);},Select:function(bN){var bO;bO=f.Tags();return bO.NewTag("select",bN);},Selected:function(bP){var bQ;bQ=f.Attr();return bQ.NewAttr("selected",bP);},Span:function(bR){var bS;bS=f.Tags();return bS.NewTag("span",bR);},Src:function(bT){var bU;bU=f.Attr();return bU.NewAttr("src",bT);},TBody:function(bV){var bW;bW=f.Tags();return bW.NewTag("tbody",bV);},TD:function(bX){var bY;bY=f.Tags();return bY.NewTag("td",bX);},TFoot:function(bZ){var b0;b0=f.Tags();return b0.NewTag("tfoot",bZ);},TH:function(b1){var b2;b2=f.Tags();return b2.NewTag("th",b1);},THead:function(b3){var b4;b4=f.Tags();return b4.NewTag("thead",b3);},TR:function(b5){var b6;b6=f.Tags();return b6.NewTag("tr",b5);},Table:function(b7){var b8;b8=f.Tags();return b8.NewTag("table",b7);},Tags:$.Field(function(){return g.Tags();}),Text:function(b9){return f.Tags().text(b9);},TextArea:function(b_){var b$;b$=f.Tags();return b$.NewTag("textarea",b_);},UL:function(ca){var cb;cb=f.Tags();return cb.NewTag("ul",ca);},VAlign:function(cc){var cd;cd=f.Attr();return cd.NewAttr("valign",cc);},Width:function(ce){var cf;cf=f.Attr();return cf.NewAttr("width",ce);}},DeprecatedAttributeBuilder:$.Class({NewAttr:function(cg,ch){var ci;ci=d.New1(this.HtmlProvider,cg,ch);return ci;}},{New:function(cj){var ck;ck=$.New(this,{});ck.HtmlProvider=cj;return ck;}}),DeprecatedTagBuilder:$.Class({NewTag:function(cl,cm){var cn,co,cp;cn=i.New1(this.HtmlProvider,cl);co=j.Get(cm);while(co.MoveNext()){cp=co.get_Current();cn.AppendI(cp);}return cn;}},{New:function(cq){var cr;cr=$.New(this,{});cr.HtmlProvider=cq;return cr;}}),Element:$.Class({AppendI:function(cs){var ct,cu,cv,cw,cx,cy,cz,cA,cB;ct=cs.get_Body();if(ct.nodeType===2){cv=this["HtmlProvider@33"];cw=this.get_Body();cu=cv.AppendAttribute(cw,ct);}else{cx=this["HtmlProvider@33"];cy=this.get_Body();cz=cs.get_Body();cu=cx.AppendNode(cy,cz);}if(this.IsRendered){cA=cs.Render();}else{cB=this.RenderInternal;cA=void(this.RenderInternal=function(){cB(null);return cs.Render();});}return cA;},AppendN:function(cD){var cE,cF;cE=this["HtmlProvider@33"];cF=this.get_Body();return cE.AppendNode(cF,cD);},OnLoad:function(cG){var cH,cI;cH=this["HtmlProvider@33"];cI=this.get_Body();return cH.OnLoad(cI,cG);},Render:function(){var cJ;if(!this.IsRendered){this.RenderInternal.call(null,null);cJ=void(this.IsRendered=true);}else{cJ=null;}return cJ;},get_Body:function(){return this.Dom;},get_Html:function(){return this["HtmlProvider@33"].GetHtml(this.get_Body());},get_HtmlProvider:function(){return this["HtmlProvider@33"];},get_Id:function(){var cK,cL,cM,cN,cO,cP,cQ;cK=this["HtmlProvider@33"];cL=this.get_Body();cM=cK.GetProperty(cL,"id");if(cM===undefined?true:cM===""){cO="id"+k.round(k.random()*100000000);cP=this["HtmlProvider@33"];cQ=this.get_Body();cP.SetProperty(cQ,"id",cO);cN=cO;}else{cN=cM;}return cN;},get_Item:function(cR){var cS,cT,cU,cV;cS=this["HtmlProvider@33"];cT=this.get_Body();cS.GetAttribute(cT,cR);cU=this["HtmlProvider@33"];cV=this.get_Body();return cU.GetAttribute(cV,cR);},get_Text:function(){return this["HtmlProvider@33"].GetText(this.get_Body());},get_Value:function(){return this["HtmlProvider@33"].GetValue(this.get_Body());},set_Html:function(cW){var cX,cY;cX=this["HtmlProvider@33"];cY=this.get_Body();return cX.SetHtml(cY,cW);},set_Item:function(cZ,c0){var c1,c2;c1=this["HtmlProvider@33"];c2=this.get_Body();return c1.SetAttribute(c2,cZ,c0);},set_Text:function(c3){var c4,c5;c4=this["HtmlProvider@33"];c5=this.get_Body();return c4.SetText(c5,c3);},set_Value:function(c6){var c7,c8;c7=this["HtmlProvider@33"];c8=this.get_Body();return c7.SetValue(c8,c6);}},{New:function(c9){var c_;c_=$.New(this,e.New());c_["HtmlProvider@33"]=c9;return c_;},New1:function(c$,da){var db,dc;db=i.New(c$);dc=l.createElement(da);db.RenderInternal=function(){};db.Dom=dc;db.IsRendered=false;return db;}}),Events:{JQueryEventSupport:$.Class({OnBlur:function(de,df){return m(df.get_Body()).bind("blur",function(){return de(df);});},OnChange:function(dh,di){return m(di.get_Body()).bind("change",function(){return dh(di);});},OnClick:function(dk,dl){return this.OnMouse("click",dk,dl);},OnDoubleClick:function(dm,dn){return this.OnMouse("dblclick",dm,dn);},OnError:function(_do,dp){return m(dp.get_Body()).bind("error",function(){return _do(dp);});},OnFocus:function(dr,ds){return m(ds.get_Body()).bind("focus",function(){return dr(ds);});},OnKeyDown:function(du,dv){var dw;dw=function(dx){return(du(dv))({KeyCode:dx.keyCode});};return m(dv.get_Body()).bind("keydown",dw);},OnKeyPress:function(dy,dz){return m(dz.get_Body()).keypress(function(dA){return(dy(dz))({CharacterCode:dA.which});});},OnKeyUp:function(dB,dC){var dD;dD=function(dE){return(dB(dC))({KeyCode:dE.keyCode});};return m(dC.get_Body()).bind("keyup",dD);},OnLoad:function(dF,dG){return m(dG.get_Body()).bind("load",function(){return dF(dG);});},OnMouse:function(dI,dJ,dK){var dL;dL=function(dM){return(dJ(dK))({X:dM.pageX,Y:dM.pageY});};return m(dK.get_Body()).bind(dI,dL);},OnMouseDown:function(dN,dO){return this.OnMouse("mousedown",dN,dO);},OnMouseEnter:function(dP,dQ){return this.OnMouse("mouseenter",dP,dQ);},OnMouseLeave:function(dR,dS){return this.OnMouse("mouseleave",dR,dS);},OnMouseMove:function(dT,dU){return this.OnMouse("mousemove",dT,dU);},OnMouseOut:function(dV,dW){return this.OnMouse("mouseout",dV,dW);},OnMouseUp:function(dX,dY){return this.OnMouse("mouseup",dX,dY);},OnResize:function(dZ,d0){return m(d0.get_Body()).bind("resize",function(){return dZ(d0);});},OnScroll:function(d2,d3){return m(d3.get_Body()).bind("scroll",function(){return d2(d3);});},OnSelect:function(d5,d6){return m(d6.get_Body()).bind("select",function(){return d5(d6);});},OnSubmit:function(d8,d9){return m(d9.get_Body()).bind("submit",function(){return d8(d9);});},OnUnLoad:function(d$,ea){return m(ea.get_Body()).bind("unload",function(){return d$(ea);});}},{New:function(){return $.New(this,{});}})},EventsPervasives:{Events:$.Field(function(){return o.New();})},Html5AttributeBuilder:$.Class({NewAttr:function(ec,ed){var ee;ee=d.New1(this.HtmlProvider,ec,ed);return ee;}},{New:function(ef){var eg;eg=$.New(this,{});eg.HtmlProvider=ef;return eg;}}),Html5TagBuilder:$.Class({NewTag:function(eh,ei){var ej,ek,el;ej=i.New1(this.HtmlProvider,eh);ek=j.Get(ei);while(ek.MoveNext()){el=ek.get_Current();ej.AppendI(el);}return ej;}},{New:function(em){var en;en=$.New(this,{});en.HtmlProvider=em;return en;}}),Implementation:{Attr:$.Field(function(){return p.New(g.HtmlProvider());}),DeprecatedHtml:$.Field(function(){return q.New(g.HtmlProvider());}),HTML5:{Attr:$.Field(function(){return r.New(h.Html5Provider());}),Html5Provider:$.Field(function(){return s.New();}),Tags:$.Field(function(){return t.New(h.Html5Provider());})},HtmlProvider:$.Field(function(){return s.New();}),JQueryHtmlProvider:$.Class({AddClass:function(eo,ep){return m(eo).addClass(ep);},AppendAttribute:function(eq,er){var es,et;es=er.nodeName;et=er.value;return this.SetAttribute(eq,es,et);},AppendNode:function(eu,ev){return m(eu).append(m(ev));},Clear:function(ew){return m(ew).contents().detach();},CreateAttribute:function(ex){return l.createAttribute(ex);},CreateElement:function(ey){return l.createElement(ey);},CreateTextNode:function(ez){return l.createTextNode(ez);},GetAttribute:function(eA,eB){return m(eA).attr(eB);},GetHtml:function(eC){return m(eC).html();},GetProperty:function(eD,eE){var eF;eF=m(eD).attr(eE);return eF;},GetText:function(eG){return eG.textContent;},GetValue:function(eH){var eI;eI=m(eH).val();return eI;},HasAttribute:function(eJ,eK){return m(eJ).attr(eK)!=null;},OnDocumentReady:function(eL){return m(l).ready(eL);},OnLoad:function(eM,eN){return m(eM).ready(eN);},Remove:function(eO){return m(eO).remove();},RemoveAttribute:function(eP,eQ){return m(eP).removeAttr(eQ);},RemoveClass:function(eR,eS){return m(eR).removeClass(eS);},SetAttribute:function(eT,eU,eV){return m(eT).attr(eU,eV);},SetCss:function(eW,eX,eY){return m(eW).css(eX,eY);},SetHtml:function(eZ,e0){return m(eZ).html(e0);},SetProperty:function(e1,e2,e3){var e4;e4=m(e1).prop(e2,e3);return e4;},SetStyle:function(e5,e6){return m(e5).attr("style",e6);},SetText:function(e7,e8){e7.textContent=e8;},SetValue:function(e9,e_){return m(e9).val(e_);}},{New:function(){return $.New(this,{});}}),Tags:$.Field(function(){return u.New(g.HtmlProvider());})},Operators:{OnAfterRender:function(e$,fa){var fb;fb=fa.Render;fa.Render=function(){fb.apply(fa);return e$(fa);};return;},OnBeforeRender:function(fd,fe){var ff;ff=fe.Render;fe.Render=function(){fd(fe);return ff.apply(fe);};return;},add:function(fh,fi){var fj,fk;fj=j.Get(fi);while(fj.MoveNext()){fk=fj.get_Current();fh.AppendI(fk);}return fh;}},Pagelet:$.Class({AppendTo:function(fl){var fm,fn;fm=l.getElementById(fl);fn=fm.appendChild(this.get_Body());return this.Render();},Render:function(){return null;},ReplaceInDom:function(fo){var fp;fp=fo.parentNode.replaceChild(this.get_Body(),fo);return this.Render();}},{New:function(){return $.New(this,{});}}),TagBuilder:$.Class({Div:function(fq){return this.NewTag("div",fq);},NewTag:function(fr,fs){var ft,fu,fv;ft=i.New1(this.HtmlProvider,fr);fu=j.Get(fs);while(fu.MoveNext()){fv=fu.get_Current();ft.AppendI(fv);}return ft;},text:function(fw){return v.New(fw);}},{New:function(fx){var fy;fy=$.New(this,{});fy.HtmlProvider=fx;return fy;}}),Text:$.Class({get_Body:function(){return l.createTextNode(this.text);}},{New:function(fz){var fA;fA=$.New(this,e.New());fA.text=fz;return fA;}})}}}}});$.OnInit(function(){a=$.Safe($$.IntelliFactory.WebSharper);b=$.Safe(a.Html);c=$.Safe(b.Client);d=$.Safe(c.Attribute);e=$.Safe(c.Pagelet);f=$.Safe(c.Default);g=$.Safe(c.Implementation);h=$.Safe(g.HTML5);i=$.Safe(c.Element);j=$.Safe(a.Enumerator);k=$.Safe($$.Math);l=$.Safe($$.document);m=$.Safe($$.jQuery);n=$.Safe(c.Events);o=$.Safe(n.JQueryEventSupport);p=$.Safe(c.AttributeBuilder);q=$.Safe(c.DeprecatedTagBuilder);r=$.Safe(c.Html5AttributeBuilder);s=$.Safe(g.JQueryHtmlProvider);t=$.Safe(c.Html5TagBuilder);u=$.Safe(c.TagBuilder);v=$.Safe(c.Text);w=$.Safe(f.HTML5);return x=$.Safe(c.EventsPervasives);});$.OnLoad(function(){$.Inherit(d,e);$.Inherit(i,e);$.Inherit(v,e);g.Tags();g.HtmlProvider();h.Tags();h.Html5Provider();h.Attr();g.DeprecatedHtml();g.Attr();x.Events();f.Tags();w.Tags();w.Attr();f.Deprecated();f.Attr();return;});}());

(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E;$.Define($$,{IntelliFactory:{WebSharper:{Control:{Disposable:{Of:function(F){return{Dispose:F};}},Event:{Event:$.Class({AddHandler:function(G){return this.Handlers.Add(G);},RemoveHandler:function(H){var I,K,L,N,O;I=function(J){return b.Equals(H,J);};K=this.Handlers;L=function(M){return K.RemoveAt(M);};N=this.Handlers;O=c.tryFindIndex(I,N);return d.iter(L,O);},Subscribe:function(P){var Q,T=this;Q=function(R){return P.OnNext(R);};this.AddHandler(Q);return f.Of(function(){return T.RemoveHandler(Q);});},Trigger:function(U){var V,W,X;V=this.Handlers.ToArray();for(W=0;W<=V.length-1;W++){X=g.GetArray(V,W);X(U);}return;}})},EventModule:{Choose:function(Y,Z){var _0;_0=h.New();i.addListener(Z,function(_1){var _2,_3,_4;_2=Y(_1);if(_2.$==0){_3=null;}else{_4=_2.$0;_3=_0.event.Trigger(_4);}return _3;});return _0.event;},Filter:function(_5,_6){var _7;_7=$.New(k,{Handlers:n.New1()});i.addListener(_6,function(_8){return _5(_8)?_7.Trigger(_8):null;});return _7;},Map:function(_9,_){var ba;ba=$.New(k,{Handlers:n.New1()});i.addListener(_,function(bb){return ba.Trigger(_9(bb));});return ba;},Merge:function(bb,bc){var bd;bd=$.New(k,{Handlers:n.New1()});i.addListener(bb,function(be){return bd.Trigger(be);});i.addListener(bc,function(bf){return bd.Trigger(bf);});return bd;},Pairwise:function(bg){var bh,bi;bh={contents:{$:0}};bi=$.New(k,{Handlers:n.New1()});i.addListener(bg,function(bj){var bk,bl,bm;bk=bh.contents;if(bk.$==1){bm=bk.$0;bh.contents={$:1,$0:bj};bl=bi.Trigger([bm,bj]);}else{bl=void(bh.contents={$:1,$0:bj});}return bl;});return bi;},Partition:function(bn,bo){return[o.Filter(bn,bo),o.Filter(function(bp){var bq;bq=bn(bp);return!bq;},bo)];},Scan:function(br,bs,bt){var bu,bv;bu={contents:bs};bv=function(bw){bu.contents=(br(bu.contents))(bw);return bu.contents;};return o.Map(bv,bt);},Split:function(bx,by){var bz,bE;bz=function(bA){var bB,bC,bD;bB=bx(bA);if(bB.$==0){bD=bB.$0;bC={$:1,$0:bD};}else{bC={$:0};}return bC;};bE=function(bF){var bG,bH,bI;bG=bx(bF);if(bG.$==1){bI=bG.$0;bH={$:1,$0:bI};}else{bH={$:0};}return bH;};return[o.Choose(bz,by),o.Choose(bE,by)];}},FSharpEvent:$.Class({},{New:function(){var bJ;bJ=$.New(this,{});bJ.event=$.New(k,{Handlers:n.New1()});return bJ;}}),HotStream:{HotStream:$.Class({Subscribe:function(bK){var bL,bM;this.Latest.contents.$==1?bK.OnNext(this.Latest.contents.$0):null;bM=this.Event;bL=i.subscribeTo(bM.event,function(bN){return bK.OnNext(bN);});return bL;},Trigger:function(bO){var bP;this.Latest.contents={$:1,$0:bO};bP=this.Event;return bP.event.Trigger(bO);}},{New:function(){return $.New(q,{Latest:{contents:{$:0}},Event:h.New()});}})},MailboxProcessor:$.Class({PostAndAsyncReply:function(bQ,bR){var bS,bV=this;bS=function(){var bU,bW;bU=bV.PostAndTryAsyncReply(bQ,bR);bW=function(bX){var bY,bZ,b0;if(bX.$==1){b0=bX.$0;bZ=b0;}else{bZ=r.Raise(new s("TimeoutException"));}bY=bZ;return t.Return(bY);};return t.Bind(bU,bW);};return t.Delay(bS);},PostAndTryAsyncReply:function(b1,b2){var b3,b4,cb=this;b3=r.DefaultArg(b2,this.get_DefaultTimeout());b4=$.Tupled(function(b5){var b6,b7,b8,b9,b_,ca,cc,cd,cg,ch;b6=b5[0];b7=b5[1];b8=b5[2];if(b3<0){b_=b1(function(b$){return b6({$:1,$0:b$});});ca=cb.mailbox.AddLast(b_);b9=cb.resume();}else{cc={contents:true};cd=b1(function(ce){var cf;if(cc.contents){cc.contents=false;cf=b6({$:1,$0:ce});}else{cf=null;}return cf;});cg=cb.mailbox.AddLast(cd);cb.resume();ch=u(function(){var cj;if(cc.contents){cc.contents=false;cj=b6({$:0});}else{cj=null;}return cj;},b3);b9=void ch;}return b9;});return t.FromContinuations(b4);},Receive:function(ck){var cl,co=this;cl=function(){var cn,cp;cn=co.TryReceive(ck);cp=function(cq){var cr,cs,ct;if(cq.$==1){ct=cq.$0;cs=ct;}else{cs=r.Raise(new s("TimeoutException"));}cr=cs;return t.Return(cr);};return t.Bind(cn,cp);};return t.Delay(cl);},Scan:function(cu,cv){var cw,cz=this;cw=function(){var cy,cA;cy=cz.TryScan(cu,cv);cA=function(cB){var cC,cD,cE;if(cB.$==1){cE=cB.$0;cD=cE;}else{cD=r.Raise(new s("TimeoutException"));}cC=cD;return t.Return(cC);};return t.Bind(cy,cA);};return t.Delay(cw);},Start:function(){var cF,cG,cL=this,cS;if(this.started){cF=r.FailWith("The MailboxProcessor has already been started.");}else{this.started=true;cG=function(){var cI,cO,cP;cI=function(){var cK,cM;cK=cL.initial.call(null,cL);cM=function(){return t.Return(null);};return t.Bind(cK,cM);};cO=t.Delay(cI);cP=function(cQ){var cR;cR=cL.errorEvent;cR.event.Trigger(cQ);return t.Return(null);};return t.TryWith(cO,cP);};cS=t.Delay(cG);cF=cL.startAsync(cS);}return cF;},TryReceive:function(cT){var cU,cV,c0=this;cU=r.DefaultArg(cT,this.get_DefaultTimeout());cV=$.Tupled(function(cW){var cX,cY,cZ,c1,c2,c3,c6,c7,c8,c$,dd,de;cX=cW[0];cY=cW[1];cZ=cW[2];if(b.Equals(c0.mailbox.get_First(),null)){if(cU<0){c3=function(){var c5;c5=c0.dequeue();cX({$:1,$0:c5});return t.Return(null);};c6=t.Delay(c3);c2=void(c0.savedCont={$:1,$0:c6});}else{c7={contents:true};c8=u(function(){var c_;if(c7.contents){c7.contents=false;c0.savedCont={$:0};c_=cX({$:0});}else{c_=null;}return c_;},cU);c$=function(){var db,dc;if(c7.contents){c7.contents=false;v(c8);dc=c0.dequeue();cX({$:1,$0:dc});db=t.Return(null);}else{db=t.Return(null);}return db;};dd=t.Delay(c$);c2=void(c0.savedCont={$:1,$0:dd});}c1=c2;}else{de=c0.dequeue();c1=cX({$:1,$0:de});}return c1;});return t.FromContinuations(cV);},TryScan:function(df,dg){var dh,di,dn=this;dh=r.DefaultArg(dg,this.get_DefaultTimeout());di=function(){var dk,dr,ds,dt,du,dx,d2;dk=function(){var dm,_do,dp,dq;dm=dn.mailbox.get_First();_do={$:0};while(!b.Equals(dm,null)){dp=df(dm.v);if(dp.$==0){dq=dm=dm.n;}else{dn.mailbox.Remove(dm);dm=null;dq=_do=dp;}}return _do;};dr=dk(null);if(dr.$==1){dt=dr.$0;du=function(dv){var dw;dw={$:1,$0:dv};return t.Return(dw);};ds=t.Bind(dt,du);}else{dx=$.Tupled(function(dy){var dz,dA,dB,dC,dD,dN,dO,dR;dz=dy[0];dA=dy[1];dB=dy[2];if(dh<0){dD=function(){var dF,dM;dF=function(){var dH,dI,dJ,dK;dH=df(dn.mailbox.get_First().v);if(dH.$==1){dJ=dH.$0;dn.mailbox.RemoveFirst();dK=function(dL){dz({$:1,$0:dL});return t.Return(null);};dI=t.Bind(dJ,dK);}else{dD(null);dI=t.Return(null);}return dI;};dM=t.Delay(dF);dn.savedCont={$:1,$0:dM};return;};dC=dD(null);}else{dN={contents:true};dO=u(function(){var dQ;if(dN.contents){dN.contents=false;dn.savedCont={$:0};dQ=dz({$:0});}else{dQ=null;}return dQ;},dh);dR=function(){var dT,d1;dT=function(){var dV,dW,dX,dY;dV=df(dn.mailbox.get_First().v);if(dV.$==1){dX=dV.$0;dn.mailbox.RemoveFirst();dY=function(dZ){var d0;if(dN.contents){dN.contents=false;v(dO);dz({$:1,$0:dZ});d0=t.Return(null);}else{d0=t.Return(null);}return d0;};dW=t.Bind(dX,dY);}else{dR(null);dW=t.Return(null);}return dW;};d1=t.Delay(dT);dn.savedCont={$:1,$0:d1};return;};dC=dR(null);}return dC;});d2=t.FromContinuations(dx);ds=d2;}return ds;};return t.Delay(di);},dequeue:function(){var d3;d3=this.mailbox.get_First().v;this.mailbox.RemoveFirst();return d3;},get_CurrentQueueLength:function(){return this.mailbox.get_Count();},get_DefaultTimeout:function(){return this["DefaultTimeout@"];},get_Error:function(){var d4;d4=this.errorEvent;return d4.event;},resume:function(){var d5,d6,d7;d5=this.savedCont;if(d5.$==1){d7=d5.$0;this.savedCont={$:0};d6=this.startAsync(d7);}else{d6=null;}return d6;},set_DefaultTimeout:function(d8){this["DefaultTimeout@"]=d8;return;},startAsync:function(d9){var d_;d_=this.token;return t.Start(d9,d_);}},{New:function(d$,ea){var eb,ec,ed,ee,ef,eh;eb=$.New(this,{});eb.initial=d$;eb.token=ea;eb.started=false;eb.errorEvent=h.New();eb.mailbox=x.New();eb.savedCont={$:0};ec=eb.token;if(ec.$==0){ed=null;}else{ee=ec.$0;ef=function(){return eb.resume();};eh=t.Register(ee,function(){return ef();});ed=void eh;}eb["DefaultTimeout@"]=-1;return eb;},Start:function(ej,ek){var el;el=y.New(ej,ek);el.Start();return el;}}),Observable:{Aggregate:function(em,en,eo){var ep;ep=function(eq){var er,es,ex;er={contents:en};es=function(et){return z.Protect(function(){return(eo(er.contents))(et);},function(ev){er.contents=ev;return eq.OnNext(ev);},function(ew){return eq.OnError(ew);});};ex=A.New(es,function(ey){return eq.OnError(ey);},function(){return eq.OnCompleted();});return em.Subscribe(ex);};return z.New(ep);},Choose:function(eA,eB){var eC;eC=function(eD){var eE,eL;eE=function(eF){var eH;eH=function(eI){return eD.OnNext(eI);};return z.Protect(function(){return eA(eF);},function(eJ){return d.iter(eH,eJ);},function(eK){return eD.OnError(eK);});};eL=A.New(eE,function(eM){return eD.OnError(eM);},function(){return eD.OnCompleted();});return eB.Subscribe(eL);};return z.New(eC);},CombineLatest:function(eO,eP,eQ){var eR;eR=function(eS){var eT,eU,eV,e5,e7,e_,fa,fd,fe;eT={contents:{$:0}};eU={contents:{$:0}};eV=function(){var eX,eY,eZ,e0,e1;eX=[eT.contents,eU.contents];if(eX[0].$==1){if(eX[1].$==1){e0=eX[0].$0;e1=eX[1].$0;eZ=z.Protect(function(){return(eQ(e0))(e1);},function(e3){return eS.OnNext(e3);},function(e4){return eS.OnError(e4);});}else{eZ=null;}eY=eZ;}else{eY=null;}return eY;};e5=function(e6){eT.contents={$:1,$0:e6};return eV(null);};e7=A.New(e5,function(){},function(){});e_=function(e$){eU.contents={$:1,$0:e$};return eV(null);};fa=A.New(e_,function(){},function(){});fd=eO.Subscribe(e7);fe=eP.Subscribe(fa);return f.Of(function(){fd.Dispose();return fe.Dispose();});};return z.New(eR);},Concat:function(fg,fh){var fi;fi=function(fj){var fk,fl,fq;fk={contents:{$:0}};fl=fg.Subscribe(A.New(function(fm){return fj.OnNext(fm);},function(){},function(){var fp;fp=fh.Subscribe(fj);fk.contents={$:1,$0:fp};}));fq=function(){fk.contents.$==1?fk.contents.$0.Dispose():null;return fl.Dispose();};return f.Of(fq);};return z.New(fi);},Drop:function(fs,ft){var fu;fu=function(fv){var fw,fx,fz;fw={contents:0};fx=function(fy){r.Increment(fw);return fw.contents>fs?fv.OnNext(fy):null;};fz=A.New(fx,function(fA){return fv.OnError(fA);},function(){return fv.OnCompleted();});return ft.Subscribe(fz);};return z.New(fu);},Filter:function(fC,fD){var fE;fE=function(fF){var fG,fN;fG=function(fH){var fJ;fJ=function(fK){return fF.OnNext(fK);};return z.Protect(function(){return fC(fH)?{$:1,$0:fH}:{$:0};},function(fL){return d.iter(fJ,fL);},function(fM){return fF.OnError(fM);});};fN=A.New(fG,function(fO){return fF.OnError(fO);},function(){return fF.OnCompleted();});return fD.Subscribe(fN);};return z.New(fE);},Map:function(fQ,fR){var fS;fS=function(fT){var fU,fZ;fU=function(fV){return z.Protect(function(){return fQ(fV);},function(fX){return fT.OnNext(fX);},function(fY){return fT.OnError(fY);});};fZ=A.New(fU,function(f0){return fT.OnError(f0);},function(){return fT.OnCompleted();});return fR.Subscribe(fZ);};return z.New(fS);},Merge:function(f2,f3){var f4;f4=function(f5){var f6,f7,f8,ga,gb,gf;f6={contents:false};f7={contents:false};f8=A.New(function(f9){return f5.OnNext(f9);},function(){},function(){f6.contents=true;return(f6.contents?f7.contents:false)?f5.OnCompleted():null;});ga=f2.Subscribe(f8);gb=A.New(function(gc){return f5.OnNext(gc);},function(){},function(){f7.contents=true;return(f6.contents?f7.contents:false)?f5.OnCompleted():null;});gf=f3.Subscribe(gb);return f.Of(function(){ga.Dispose();return gf.Dispose();});};return z.New(f4);},Never:function(){return z.New(function(){return f.Of(function(){});});},New:function(gj){return $.New(B,{Subscribe1:gj});},Observable:$.Class({Subscribe:function(gk){return this.Subscribe1.call(null,gk);}}),Of:function(gl){return z.New(function(gm){return f.Of(gl(function(gn){return gm.OnNext(gn);}));});},Protect:function(go,gp,gq){var gr,gs,gt,gu,gv,gw;try{gs={$:0,$0:go(null)};}catch(gt){gs={$:1,$0:gt};}gr=gs;if(gr.$==1){gv=gr.$0;gu=gq(gv);}else{gw=gr.$0;gu=gp(gw);}return gu;},Range:function(gx,gy){var gz;gz=function(gA){var gB;for(gB=gx;gB<=gx+gy;gB++){gA.OnNext(gB);}return f.Of(function(){});};return z.New(gz);},Return:function(gD){var gE;gE=function(gF){gF.OnNext(gD);gF.OnCompleted();return f.Of(function(){});};return z.New(gE);},SelectMany:function(gH){return z.New(function(gI){var gJ,gL;gJ={contents:function(){}};gL=i.subscribeTo(gH,function(gM){var gN;gN=i.subscribeTo(gM,function(gO){return gI.OnNext(gO);});gJ.contents=function(){gJ.contents.call(null,null);return gN.Dispose();};return;});return f.Of(function(){gJ.contents.call(null,null);return gL.Dispose();});});},Sequence:function(gR){var gS;gS=function(gT){var gU,gV,gW,gX;if(gT.$==1){gV=gT.$1;gW=gT.$0;gX=gS(gV);gU=z.CombineLatest(gW,gX,function(gY){return function(gZ){return $.New(D,{$:1,$0:gY,$1:gZ});};});}else{gU=z.Return($.New(D,{$:0}));}return gU;};return gS(C.ofSeq(gR));},Switch:function(g0){return z.New(function(g1){var g2,g3,g4;g2={contents:0};g3={contents:{$:0}};g4=i.subscribeTo(g0,function(g5){var g6,g7,g9;r.Increment(g2);g3.contents.$==1?g3.contents.$0.Dispose():null;g6=g2.contents;g7=i.subscribeTo(g5,function(g8){return g6===g2.contents?g1.OnNext(g8):null;});g9={$:1,$0:g7};g3.contents=g9;return;});return g4;});}},ObservableModule:{Pairwise:function(g_){var g$;g$=function(ha){var hb,hc,hh;hb={contents:{$:0}};hc=function(hd){var he,hf,hg;he=hb.contents;if(he.$==1){hg=he.$0;hf=ha.OnNext([hg,hd]);}else{hf=null;}hb.contents={$:1,$0:hd};return;};hh=A.New(hc,function(hi){return ha.OnError(hi);},function(){return ha.OnCompleted();});return g_.Subscribe(hh);};return z.New(g$);},Partition:function(hk,hl){var hm;hm=function(hn){var ho;ho=hk(hn);return!ho;};return[z.Filter(hk,hl),z.Filter(hm,hl)];},Scan:function(hp,hq,hr){var hs;hs=function(ht){var hu,hv,hA;hu={contents:hq};hv=function(hw){return z.Protect(function(){return(hp(hu.contents))(hw);},function(hy){hu.contents=hy;return ht.OnNext(hy);},function(hz){return ht.OnError(hz);});};hA=A.New(hv,function(hB){return ht.OnError(hB);},function(){return ht.OnCompleted();});return hr.Subscribe(hA);};return z.New(hs);},Split:function(hD,hE){var hF,hK,hL,hQ;hF=function(hG){var hH,hI,hJ;hH=hD(hG);if(hH.$==0){hJ=hH.$0;hI={$:1,$0:hJ};}else{hI={$:0};}return hI;};hK=z.Choose(hF,hE);hL=function(hM){var hN,hO,hP;hN=hD(hM);if(hN.$==1){hP=hN.$0;hO={$:1,$0:hP};}else{hO={$:0};}return hO;};hQ=z.Choose(hL,hE);return[hK,hQ];}},Observer:{New:function(hR,hS,hT){return $.New(E,{onNext:hR,onError:hS,onCompleted:hT});},Observer:$.Class({OnCompleted:function(){return this.onCompleted.call(null,null);},OnError:function(hU){return this.onError.call(null,hU);},OnNext:function(hV){return this.onNext.call(null,hV);}}),Of:function(hW){return $.New(E,{onNext:function(hX){return hW(hX);},onError:function(hY){return r.Raise(hY);},onCompleted:function(){return null;}});}}}}}});$.OnInit(function(){a=$.Safe($$.IntelliFactory.WebSharper);b=$.Safe(a.Unchecked);c=$.Safe(a.Seq);d=$.Safe(a.Option);e=$.Safe(a.Control);f=$.Safe(e.Disposable);g=$.Safe(a.IntrinsicFunctionProxy);h=$.Safe(e.FSharpEvent);i=$.Safe(a.Util);j=$.Safe(e.Event);k=$.Safe(j.Event);l=$.Safe(a.Collections);m=$.Safe(l.ResizeArray);n=$.Safe(m.ResizeArrayProxy);o=$.Safe(e.EventModule);p=$.Safe(e.HotStream);q=$.Safe(p.HotStream);r=$.Safe(a.Operators);s=$.Safe($$.Error);t=$.Safe(a.Concurrency);u=$.Safe($$.setTimeout);v=$.Safe($$.clearTimeout);w=$.Safe(l.LinkedList);x=$.Safe(w.ListProxy);y=$.Safe(e.MailboxProcessor);z=$.Safe(e.Observable);A=$.Safe(e.Observer);B=$.Safe(z.Observable);C=$.Safe(a.List);D=$.Safe(C.T);return E=$.Safe(A.Observer);});$.OnLoad(function(){return;});}());

(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E;$.Define($$,{IntelliFactory:{WebSharper:{Collections:{BalancedTree:{Add:function(F,G){return c.Put(function(){return function(I){return I;};},F,G);},Branch:function(J,K,L){return{Node:J,Left:K,Right:L,Height:1+d.Max(K==null?0:K.Height,L==null?0:L.Height),Count:1+(K==null?0:K.Count)+(L==null?0:L.Count)};},Build:function(M,N,O){var P,Q,R,S,T;P=O-N+1;if(P<=0){Q=null;}else{R=(N+O)/2>>0;S=c.Build(M,N,R-1);T=c.Build(M,R+1,O);Q=c.Branch(e.GetArray(M,R),S,T);}return Q;},Contains:function(U,V){return!((c.Lookup(U,V))[0]==null);},Enumerate:function(W,X){var Y;Y=$.Tupled(function(Z){var _0,_1,_2,_3,_4,_5,_6;_0=Z[0];_1=Z[1];if(_0==null){if(_1.$==1){_4=_1.$0[0];_5=_1.$1;_6=_1.$0[1];_3={$:1,$0:[_4,[_6,_5]]};}else{_3={$:0};}_2=_3;}else{_2=W?Y([_0.Right,$.New(h,{$:1,$0:[_0.Node,_0.Left],$1:_1})]):Y([_0.Left,$.New(h,{$:1,$0:[_0.Node,_0.Right],$1:_1})]);}return _2;});return f.unfold(Y,[X,$.New(h,{$:0})]);},Lookup:function(_7,_8){var _9,_,ba,bb,bc,bd;_9=[];_=_8;ba=true;while(ba){if(_==null){bb=ba=false;}else{bc=d.Compare(_7,_.Node);if(bc===0){bd=ba=false;}else{if(bc===1){_9.unshift([true,_.Node,_.Left]);bd=_=_.Right;}else{_9.unshift([false,_.Node,_.Right]);bd=_=_.Left;}}bb=bd;}}return[_,_9];},OfSeq:function(bd){var be;be=i.sort(f.toArray(f.distinct(bd)));return c.Build(be,0,be.length-1);},Put:function(bf,bg,bh){var bi,bj,bk;bi=c.Lookup(bg,bh);bj=bi[0];bk=bi[1];return bj==null?c.Rebuild(bk,c.Branch(bg,null,null)):c.Rebuild(bk,c.Branch((bf(bj.Node))(bg),bj.Left,bj.Right));},Rebuild:function(bl,bm){var bn,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC;bn=function(bo){return bo==null?0:bo.Height;};bp=bm;for(bq=0;bq<=e.GetLength(bl)-1;bq++){br=e.GetArray(bl,bq);if(br[0]){bt=br[1];bu=br[2];if(bn(bp)>bn(bu)+1){if(bn(bp.Left)===bn(bp.Right)+1){bx=bp.Left;bw=c.Branch(bx.Node,c.Branch(bt,bu,bx.Left),c.Branch(bp.Node,bx.Right,bp.Right));}else{bw=c.Branch(bp.Node,c.Branch(bt,bu,bp.Left),bp.Right);}bv=bw;}else{bv=c.Branch(bt,bu,bp);}bs=bv;}else{by=br[1];bz=br[2];if(bn(bp)>bn(bz)+1){if(bn(bp.Right)===bn(bp.Left)+1){bC=bp.Right;bB=c.Branch(bC.Node,c.Branch(bp.Node,bp.Left,bC.Left),c.Branch(by,bC.Right,bz));}else{bB=c.Branch(bp.Node,bp.Left,c.Branch(by,bp.Right,bz));}bA=bB;}else{bA=c.Branch(by,bp,bz);}bs=bA;}bp=bs;}return bp;},Remove:function(bD,bE){var bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP;bF=c.Lookup(bD,bE);bG=bF[0];bH=bF[1];if(bG==null){bI=bE;}else{if(bG.Right==null){bJ=c.Rebuild(bH,bG.Left);}else{if(bG.Left==null){bK=c.Rebuild(bH,bG.Right);}else{bM=bG.Left;bN=bG.Right;bL=f.append(c.Enumerate(false,bM),c.Enumerate(false,bN));bO=f.toArray(bL);bP=c.Build(bO,0,bO.length-1);bK=c.Rebuild(bH,bP);}bJ=bK;}bI=bJ;}return bI;},TryFind:function(bQ,bR){var bS;bS=(c.Lookup(bQ,bR))[0];return bS==null?{$:0}:{$:1,$0:bS.Node};}},Dictionary:$.Class({Add:function(bT,bU){var bV,bW;bV=this.hash.call(null,bT);if(this.data.hasOwnProperty(bV)){bW=d.FailWith("An item with the same key has already been added.");}else{this.data[bV]={K:bT,V:bU};bW=void(this.count=this.count+1);}return bW;},Clear:function(){this.data={};this.count=0;return;},ContainsKey:function(bX){return this.data.hasOwnProperty(this.hash.call(null,bX));},GetEnumerator:function(){var bY;bY=k.GetFieldValues(this.data);return l.Get(bY);},Remove:function(bZ){var b0,b1;b0=this.hash.call(null,bZ);if(this.data.hasOwnProperty(b0)){k.Delete(this.data,b0);this.count=this.count-1;b1=true;}else{b1=false;}return b1;},get_Item:function(b2){var b3,b4,b5;b3=this.hash.call(null,b2);if(this.data.hasOwnProperty(b3)){b5=this.data[b3];b4=b5.V;}else{b4=m.notPresent();}return b4;},set_Item:function(b6,b7){var b8;b8=this.hash.call(null,b6);!this.data.hasOwnProperty(b8)?void(this.count=this.count+1):null;this.data[b8]={K:b6,V:b7};return;}},{New:function(b9,b_){return $.New(this,n.New11(b9,function(b$){return function(ca){return b_.Equals(b$,ca);};},function(cb){return b_.GetHashCode(cb);}));},New1:function(cc){return $.New(this,n.New11(cc,function(cd){return function(ce){return o.Equals(cd,ce);};},function(cf){return o.Hash(cf);}));},New11:function(cg,ch,ci){var cj,ck,cl,cm;cj=$.New(this,{});cj.hash=ci;cj.count=0;cj.data={};ck=l.Get(cg);while(ck.MoveNext()){cl=ck.get_Current();cm=cl.K;cj.data[cj.hash.call(null,cm)]=cl.V;}return cj;},New12:function(cn){return $.New(this,n.New11([],function(co){return function(cp){return cn.Equals(co,cp);};},function(cq){return cn.GetHashCode(cq);}));},New2:function(){return $.New(this,n.New11([],function(cr){return function(cs){return o.Equals(cr,cs);};},function(ct){return o.Hash(ct);}));},New3:function(){return $.New(this,n.New2());},New4:function(cv,cw){return $.New(this,n.New12(cw));}}),DictionaryUtil:{notPresent:function(){return d.FailWith("The given key was not present in the dictionary.");}},FSharpMap:$.Class({Add:function(cx,cy){var cz,cA;cz=this.tree;cA=$.New(q,{Key:cx,Value:cy});return p.New1(c.Add(cA,cz));},CompareTo:function(cB){return f.compareWith(function(cC){return function(cD){return d.Compare(cC,cD);};},this,cB);},ContainsKey:function(cE){var cF,cG;cF=this.tree;cG=$.New(q,{Key:cE,Value:undefined});return c.Contains(cG,cF);},Equals:function(cH){return this.get_Count()===cH.get_Count()?f.forall2(function(cI){return function(cJ){return o.Equals(cI,cJ);};},this,cH):false;},GetEnumerator:function(){var cK,cL,cN,cO;cK=this.tree;cL=function(cM){return{K:cM.Key,V:cM.Value};};cN=c.Enumerate(false,cK);cO=f.map(cL,cN);return l.Get(cO);},GetHashCode:function(){var cP;cP=f.toArray(this);return o.Hash(cP);},Remove:function(cQ){var cR,cS;cR=this.tree;cS=$.New(q,{Key:cQ,Value:undefined});return p.New1(c.Remove(cS,cR));},TryFind:function(cT){var cU,cV,cW,cY;cU=this.tree;cV=$.New(q,{Key:cT,Value:undefined});cW=function(cX){return cX.Value;};cY=c.TryFind(cV,cU);return r.map(cW,cY);},get_Count:function(){var cZ;cZ=this.tree;return cZ==null?0:cZ.Count;},get_IsEmpty:function(){return this.tree==null;},get_Item:function(c0){var c1,c2,c3;c1=this.TryFind(c0);if(c1.$==0){c2=d.FailWith("The given key was not present in the dictionary.");}else{c3=c1.$0;c2=c3;}return c2;},get_Tree:function(){return this.tree;}},{New:function(c4){return $.New(this,p.New1(s.fromSeq(c4)));},New1:function(c5){var c6;c6=$.New(this,{});c6.tree=c5;return c6;}}),FSharpSet:$.Class({Add:function(c7){return t.New1(c.Add(c7,this.tree));},CompareTo:function(c8){return f.compareWith(function(c9){return function(c_){return d.Compare(c9,c_);};},this,c8);},Contains:function(c$){return c.Contains(c$,this.tree);},Equals:function(da){return this.get_Count()===da.get_Count()?f.forall2(function(db){return function(dc){return o.Equals(db,dc);};},this,da):false;},GetEnumerator:function(){var dd,de;dd=this.tree;de=c.Enumerate(false,dd);return l.Get(de);},GetHashCode:function(){var df;df=f.toArray(this);return-1741749453+o.Hash(df);},IsProperSubsetOf:function(dg){return this.IsSubsetOf(dg)?this.get_Count()<dg.get_Count():false;},IsProperSupersetOf:function(dh){return this.IsSupersetOf(dh)?this.get_Count()>dh.get_Count():false;},IsSubsetOf:function(di){return f.forall(function(dj){return di.Contains(dj);},this);},IsSupersetOf:function(dk){var dm=this;return f.forall(function(dl){return dm.Contains(dl);},dk);},Remove:function(dn){return t.New1(c.Remove(dn,this.tree));},add:function(_do){var dp,dq;dp=f.append(this,_do);dq=c.OfSeq(dp);return t.New1(dq);},get_Count:function(){var dr;dr=this.tree;return dr==null?0:dr.Count;},get_IsEmpty:function(){return this.tree==null;},get_MaximumElement:function(){var ds;ds=this.tree;return f.head(c.Enumerate(true,ds));},get_MinimumElement:function(){var dt;dt=this.tree;return f.head(c.Enumerate(false,dt));},get_Tree:function(){return this.tree;},sub:function(du){return u.Filter(function(dv){return!du.Contains(dv);},this);}},{New:function(dw){return $.New(this,t.New1(v.ofSeq(dw)));},New1:function(dx){var dy;dy=$.New(this,{});dy.tree=dx;return dy;}}),HashSet:{HashSet:$.Class({Add:function(dz){return this.add(dz);},Clear:function(){this.data=w.prototype.constructor.apply(undefined,[].concat([]));this.count=0;return;},Contains:function(dA){var dB;dB=this.data[this.hash.call(null,dA)];return dB==null?false:this.arrContains(dA,dB);},CopyTo:function(dC){var dD,dE,dF;dD=0;dE=y.concat(this.data);for(dF=0;dF<=dE.length-1;dF++){e.SetArray(dC,dF,dE[dF]);}return;},ExceptWith:function(dG){var dH,dI,dJ;dH=l.Get(dG);while(dH.MoveNext()){dI=dH.get_Current();dJ=this.Remove(dI);}return;},GetEnumerator:function(){var dK;dK=y.concat(this.data);return l.Get(dK);},IntersectWith:function(dL){var dM,dN,dO,dP,dQ,dR,dS;dM=z.New3(dL,this.equals,this.hash);dN=y.concat(this.data);for(dO=0;dO<=dN.length-1;dO++){dP=dN[dO];dQ=dM.Contains(dP);if(!dQ){dS=this.Remove(dP);dR=void dS;}else{dR=null;}}return;},IsProperSubsetOf:function(dT){var dU;dU=i.ofSeq(dT);return this.count<e.GetLength(dU)?this.IsSubsetOf(dU):false;},IsProperSupersetOf:function(dV){var dW;dW=i.ofSeq(dV);return this.count>e.GetLength(dW)?this.IsSupersetOf(dW):false;},IsSubsetOf:function(dX){var dY,dZ,d1;dY=z.New3(dX,this.equals,this.hash);dZ=function(d0){return dY.Contains(d0);};d1=y.concat(this.data);return f.forall(dZ,d1);},IsSupersetOf:function(d2){var d3,d5=this;d3=function(d4){return d5.Contains(d4);};return f.forall(d3,d2);},Overlaps:function(d6){var d7,d9=this;d7=function(d8){return d9.Contains(d8);};return f.exists(d7,d6);},Remove:function(d_){var d$,ea,eb,ec;d$=this.hash.call(null,d_);ea=this.data[d$];if(ea==null){eb=false;}else{if(this.arrRemove(d_,ea)){this.count=this.count-1;ec=true;}else{ec=false;}eb=ec;}return eb;},RemoveWhere:function(ed){var ee,ef,eg,eh,ei;ee=y.concat(this.data);for(ef=0;ef<=ee.length-1;ef++){eg=ee[ef];if(ed(eg)){ei=this.Remove(eg);eh=void ei;}else{eh=null;}}return;},SetEquals:function(ej){var ek;ek=z.New3(ej,this.equals,this.hash);return this.get_Count()===ek.get_Count()?this.IsSupersetOf(ek):false;},SymmetricExceptWith:function(el){var em,en,eo,ep,eq;em=l.Get(el);while(em.MoveNext()){en=em.get_Current();if(this.Contains(en)){ep=this.Remove(en);eo=void ep;}else{eq=this.Add(en);eo=void eq;}}return;},UnionWith:function(er){var es,et,eu;es=l.Get(er);while(es.MoveNext()){et=es.get_Current();eu=this.Add(et);}return;},add:function(ev){var ew,ex,ey,ez,eA,eB;ew=this.hash.call(null,ev);ex=this.data[ew];if(ex==null){this.data[ew]=[ev];this.count=this.count+1;ey=true;}else{if(this.arrContains(ev,ex)){ez=false;}else{eA=[ev];eB=ex.push.apply(ex,[].concat(eA));this.count=this.count+1;ez=true;}ey=ez;}return ey;},arrContains:function(eC,eD){var eE,eF,eG;eE=true;eF=0;eG=eD.length;while(eE?eF<eG:false){(this.equals.call(null,eD[eF]))(eC)?eE=false:eF=eF+1;}return!eE;},arrRemove:function(eH,eI){var eJ,eK,eL,eM,eN,eO,eP;eJ=true;eK=0;eL=eI.length;while(eJ?eK<eL:false){if((this.equals.call(null,eI[eK]))(eH)){eN=eK;eO=[];eP=eI.splice.apply(eI,[eN,1].concat(eO));eM=eJ=false;}else{eM=eK=eK+1;}}return!eJ;},get_Count:function(){return this.count;}},{New:function(eQ){return $.New(this,z.New3(f.empty(),function(eR){return function(eS){return eQ.Equals(eR,eS);};},function(eT){return eQ.GetHashCode(eT);}));},New1:function(eU,eV){return $.New(this,z.New3(eU,function(eW){return function(eX){return eV.Equals(eW,eX);};},function(eY){return eV.GetHashCode(eY);}));},New11:function(eZ){return $.New(this,z.New3(eZ,function(e0){return function(e1){return o.Equals(e0,e1);};},function(e2){return o.Hash(e2);}));},New2:function(){return $.New(this,z.New3(f.empty(),function(e3){return function(e4){return o.Equals(e3,e4);};},function(e5){return o.Hash(e5);}));},New3:function(e6,e7,e8){var e9,e_,e$,fa;e9=$.New(this,{});e9.equals=e7;e9.hash=e8;e9.data=w.prototype.constructor.apply(undefined,[].concat([]));e9.count=0;e_=l.Get(e6);while(e_.MoveNext()){e$=e_.get_Current();fa=e9.add(e$);}return e9;}}),HashSetUtil:{concat:function($o){var $0=this,$this=this;var r=[];for(var k in $o){r.push.apply(r,$o[k]);};return r;}}},LinkedList:{EnumeratorProxy:$.Class({Dispose:function(){return null;},MoveNext:function(){this.c=this.c.n;return!o.Equals(this.c,null);},get_Current:function(){return this.c.v;}},{New:function(fb){var fc;fc=$.New(this,{});fc.c=fb;return fc;}}),ListProxy:$.Class({AddAfter:function(fd,fe){var ff,fg,fh;ff=fd.n;fg={p:fd,n:ff,v:fe};o.Equals(fd.n,null)?void(this.p=fg):null;fd.n=fg;if(!o.Equals(ff,null)){ff.p=fg;fh=fg;}else{fh=null;}this.c=this.c+1;return fg;},AddBefore:function(fi,fj){var fk,fl,fm;fk=fi.p;fl={p:fk,n:fi,v:fj};o.Equals(fi.p,null)?void(this.n=fl):null;fi.p=fl;if(!o.Equals(fk,null)){fk.n=fl;fm=fl;}else{fm=null;}this.c=this.c+1;return fl;},AddFirst:function(fn){var fo,fp;if(this.c===0){fp={p:null,n:null,v:fn};this.n=fp;this.p=this.n;this.c=1;fo=fp;}else{fo=this.AddBefore(this.n,fn);}return fo;},AddLast:function(fq){var fr,fs;if(this.c===0){fs={p:null,n:null,v:fq};this.n=fs;this.p=this.n;this.c=1;fr=fs;}else{fr=this.AddAfter(this.p,fq);}return fr;},Clear:function(){this.c=0;this.n=null;this.p=null;return;},Contains:function(ft){var fu,fv;fu=false;fv=this.n;while(!o.Equals(fv,null)?!fu:false){fv.v==ft?fu=true:fv=fv.n;}return fu;},Find:function(fw){var fx,fy;fx=this.n;fy=true;while(fy?!o.Equals(fx,null):false){fx.v==fw?fy=false:fx=fx.n;}return fy?null:fx;},FindLast:function(fz){var fA,fB;fA=this.p;fB=true;while(fB?!o.Equals(fA,null):false){fA.v==fz?fB=false:fA=fA.p;}return fB?null:fA;},GetEnumerator:function(){return B.New(this);},Remove:function(fC){var fD,fE,fF,fG;fD=fC.p;fE=fC.n;if(o.Equals(fD,null)){fF=void(this.n=fE);}else{fD.n=fE;fF=fE;}if(o.Equals(fE,null)){fG=void(this.p=fD);}else{fE.p=fD;fG=fD;}this.c=this.c-1;return;},Remove1:function(fH){var fI,fJ;fI=this.Find(fH);if(o.Equals(fI,null)){fJ=false;}else{this.Remove(fI);fJ=true;}return fJ;},RemoveFirst:function(){return this.Remove(this.n);},RemoveLast:function(){return this.Remove(this.p);},get_Count:function(){return this.c;},get_First:function(){return this.n;},get_Last:function(){return this.p;}},{New:function(){return $.New(this,C.New1(f.empty()));},New1:function(fK){var fL,fM,fN,fO;fL=$.New(this,{});fL.c=0;fL.n=null;fL.p=null;fM=l.Get(fK);if(fM.MoveNext()){fL.n={p:null,n:null,v:fM.get_Current()};fL.p=fL.n;fN=void(fL.c=1);}else{fN=null;}while(fM.MoveNext()){fO={p:fL.p,n:null,v:fM.get_Current()};fL.p.n=fO;fL.p=fO;fL.c=fL.c+1;}return fL;}})},MapModule:{Exists:function(fP,fQ){var fR;fR=function(fS){return(fP(fS.K))(fS.V);};return f.exists(fR,fQ);},Filter:function(fT,fU){var fV,fW,fY,fZ,f0,f1;fV=fU.get_Tree();fW=function(fX){return(fT(fX.Key))(fX.Value);};fY=c.Enumerate(false,fV);fZ=f.filter(fW,fY);f0=f.toArray(fZ);f1=c.Build(f0,0,f0.length-1);return p.New1(f1);},FindKey:function(f2,f3){var f4;f4=function(f5){return(f2(f5.K))(f5.V)?{$:1,$0:f5.K}:{$:0};};return f.pick(f4,f3);},Fold:function(f6,f7,f8){var f9,f_,gb;f9=f8.get_Tree();f_=function(f$){return function(ga){return((f6(f$))(ga.Key))(ga.Value);};};gb=c.Enumerate(false,f9);return f.fold(f_,f7,gb);},FoldBack:function(gc,gd,ge){var gf,gg,gj;gf=gd.get_Tree();gg=function(gh){return function(gi){return((gc(gi.Key))(gi.Value))(gh);};};gj=c.Enumerate(true,gf);return f.fold(gg,ge,gj);},ForAll:function(gk,gl){var gm;gm=function(gn){return(gk(gn.K))(gn.V);};return f.forall(gm,gl);},Iterate:function(go,gp){var gq;gq=function(gr){return(go(gr.K))(gr.V);};return f.iter(gq,gp);},Map:function(gs,gt){var gu,gv,gx,gy,gz;gu=gt.get_Tree();gv=function(gw){return $.New(q,{Key:gw.Key,Value:(gs(gw.Key))(gw.Value)});};gx=c.Enumerate(false,gu);gy=f.map(gv,gx);gz=c.OfSeq(gy);return p.New1(gz);},OfArray:function(gA){var gB,gF,gG;gB=$.Tupled(function(gC){var gD,gE;gD=gC[0];gE=gC[1];return $.New(q,{Key:gD,Value:gE});});gF=f.map(gB,gA);gG=c.OfSeq(gF);return p.New1(gG);},Partition:function(gH,gI){var gJ,gL,gM,gN,gO,gP,gQ,gR;gJ=function(gK){return(gH(gK.Key))(gK.Value);};gM=gI.get_Tree();gL=f.toArray(c.Enumerate(false,gM));gN=i.partition(gJ,gL);gO=gN[1];gP=gN[0];gQ=c.Build(gP,0,gP.length-1);gR=c.Build(gO,0,gO.length-1);return[p.New1(gQ),p.New1(gR)];},Pick:function(gS,gT){var gU;gU=function(gV){return(gS(gV.K))(gV.V);};return f.pick(gU,gT);},ToSeq:function(gW){var gX,gY,g0;gX=gW.get_Tree();gY=function(gZ){return[gZ.Key,gZ.Value];};g0=c.Enumerate(false,gX);return f.map(gY,g0);},TryFind:function(g1,g2){return g2.TryFind(g1);},TryFindKey:function(g3,g4){var g5;g5=function(g6){return(g3(g6.K))(g6.V)?{$:1,$0:g6.K}:{$:0};};return f.tryPick(g5,g4);},TryPick:function(g7,g8){var g9;g9=function(g_){return(g7(g_.K))(g_.V);};return f.tryPick(g9,g8);}},MapUtil:{fromSeq:function(g$){var ha;ha=f.toArray(f.delay(function(){return f.collect($.Tupled(function(hc){var hd,he;hd=hc[1];he=hc[0];return[$.New(q,{Key:he,Value:hd})];}),f.distinctBy($.Tupled(function(hf){return hf[0];}),g$));}));i.sortInPlace(ha);return c.Build(ha,0,ha.length-1);}},Pair:$.Class({CompareTo:function(hg){return d.Compare(this.Key,hg.Key);},Equals:function(hh){return o.Equals(this.Key,hh.Key);},GetHashCode:function(){var hi;hi=this.Key;return o.Hash(hi);}}),ResizeArray:{ResizeArrayProxy:$.Class({Add:function(hj){return this.arr.push(hj);},AddRange:function(hk){var hm=this;return f.iter(function(hl){return hm.Add(hl);},hk);},Clear:function(){var hn,ho;ho=this.arr;hn=D.splice(this.arr,0,e.GetLength(ho),[]);return;},CopyTo:function(hp){return this.CopyTo1(hp,0);},CopyTo1:function(hq,hr){return this.CopyTo2(0,hq,hr,this.get_Count());},CopyTo2:function(hs,ht,hu,hv){return i.blit(this.arr,hs,ht,hu,hv);},GetEnumerator:function(){var hw;hw=this.arr;return l.Get(hw);},GetRange:function(hx,hy){return E.New(i.sub(this.arr,hx,hy));},Insert:function(hz,hA){var hB;hB=D.splice(this.arr,hz,0,[hA]);return;},InsertRange:function(hC,hD){var hE;hE=D.splice(this.arr,hC,0,f.toArray(hD));return;},RemoveAt:function(hF){var hG;hG=D.splice(this.arr,hF,1,[]);return;},RemoveRange:function(hH,hI){var hJ;hJ=D.splice(this.arr,hH,hI,[]);return;},Reverse:function(){return this.arr.reverse();},Reverse1:function(hK,hL){return i.reverse(this.arr,hK,hL);},ToArray:function(){return this.arr.slice();},get_Count:function(){var hM;hM=this.arr;return e.GetLength(hM);},get_Item:function(hN){return e.GetArray(this.arr,hN);},set_Item:function(hO,hP){return e.SetArray(this.arr,hO,hP);}},{New:function(hQ){var hR;hR=$.New(this,{});hR.arr=hQ;return hR;},New1:function(){return $.New(this,E.New([]));},New11:function(hS){return $.New(this,E.New(f.toArray(hS)));},New2:function(){return $.New(this,E.New([]));}}),splice:function($arr,$index,$howMany,$items){var $0=this,$this=this;return $$.Array.prototype.splice.apply($arr,[$index,$howMany].concat($items));}},SetModule:{Filter:function(hU,hV){var hW,hX;hW=f.toArray(f.filter(hU,hV));hX=c.Build(hW,0,hW.length-1);return t.New1(hX);},FoldBack:function(hY,hZ,h0){var h3;h3=hZ.get_Tree();return f.fold(function(h1){return function(h2){return(hY(h2))(h1);};},h0,c.Enumerate(true,h3));},Partition:function(h4,h5){var h6,h7,h8,h9,h_;h6=i.partition(h4,f.toArray(h5));h7=h6[1];h8=h6[0];h9=c.OfSeq(h8);h_=c.OfSeq(h7);return[t.New1(h9),t.New1(h_)];}},SetUtil:{ofSeq:function(h$){var ia;ia=f.toArray(h$);i.sortInPlace(ia);return c.Build(ia,0,ia.length-1);}}}}}});$.OnInit(function(){a=$.Safe($$.IntelliFactory.WebSharper);b=$.Safe(a.Collections);c=$.Safe(b.BalancedTree);d=$.Safe(a.Operators);e=$.Safe(a.IntrinsicFunctionProxy);f=$.Safe(a.Seq);g=$.Safe(a.List);h=$.Safe(g.T);i=$.Safe(a.Arrays);j=$.Safe(a.JavaScript);k=$.Safe(j.JS);l=$.Safe(a.Enumerator);m=$.Safe(b.DictionaryUtil);n=$.Safe(b.Dictionary);o=$.Safe(a.Unchecked);p=$.Safe(b.FSharpMap);q=$.Safe(b.Pair);r=$.Safe(a.Option);s=$.Safe(b.MapUtil);t=$.Safe(b.FSharpSet);u=$.Safe(b.SetModule);v=$.Safe(b.SetUtil);w=$.Safe($$.Array);x=$.Safe(b.HashSet);y=$.Safe(x.HashSetUtil);z=$.Safe(x.HashSet);A=$.Safe(b.LinkedList);B=$.Safe(A.EnumeratorProxy);C=$.Safe(A.ListProxy);D=$.Safe(b.ResizeArray);return E=$.Safe(D.ResizeArrayProxy);});$.OnLoad(function(){return;});}());

(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q;$.Define($$,{IntelliFactory:{Reactive:{Disposable:$.Class({Dispose:function(){return this.Dispose1.call(null,null);}},{New:function(r){return $.New(b,{Dispose1:r});}}),HotStream:$.Class({Subscribe:function(s){var t;this.Latest.contents.$==1?s.OnNext(this.Latest.contents.$0):null;t=this.Event;return t.event.Subscribe(s);},Trigger:function(u){var v;this.Latest.contents={$:1,$0:u};v=this.Event;return v.event.Trigger(u);}},{New:function(w){var x;x={$:1,$0:w};return $.New(c,{Latest:{contents:x},Event:f.New()});},New1:function(){return $.New(c,{Latest:{contents:{$:0}},Event:f.New()});}}),Observable:$.Class({Subscribe:function(y){return this.OnSubscribe.call(null,y);},SubscribeWith:function(z,A){return this.OnSubscribe.call(null,g.New(z,A));}},{New:function(B){return $.New(h,{OnSubscribe:B});}}),Observer:$.Class({OnCompleted:function(){return this.OnCompleted1.call(null,null);},OnError:function(){return null;},OnNext:function(D){return this.OnNext1.call(null,D);}},{New:function(E,F){return $.New(g,{OnNext1:E,OnCompleted1:F});}}),Reactive:{Aggregate:function(G,H,I){return h.New(function(J){var K;K={contents:H};return i.subscribeTo(G,function(L){K.contents=(I(K.contents))(L);return J.OnNext(K.contents);});});},Choose:function(M,N){var O;O=function(P){return i.subscribeTo(M,function(Q){var R,S,T;R=N(Q);if(R.$==0){S=null;}else{T=R.$0;S=P.OnNext(T);}return S;});};return h.New(O);},CollectLatest:function(U){return h.New(function(V){var W,X;W=k.New2();X={contents:0};return i.subscribeTo(U,function(Y){var Z,_0;l.Increment(X);Z=X.contents;_0=i.subscribeTo(Y,function(_1){var _2;W.set_Item(Z,_1);_2=m.delay(function(){return m.map(function(_4){return _4.V;},W);});return V.OnNext(_2);});return;});});},CombineLatest:function(_5,_6,_7){var _8;_8=function(_9){var _,ba,bb,bi,bk,bm,bn,bp,br,bs,bt;_={contents:{$:0}};ba={contents:{$:0}};bb=function(){var bd,be,bf,bg,bh;bd=[_.contents,ba.contents];if(bd[0].$==1){if(bd[1].$==1){bg=bd[0].$0;bh=bd[1].$0;bf=_9.OnNext((_7(bg))(bh));}else{bf=null;}be=bf;}else{be=null;}return be;};bi=function(bj){_.contents={$:1,$0:bj};return bb(null);};bk=function(){};bm=g.New(bi,bk);bn=function(bo){ba.contents={$:1,$0:bo};return bb(null);};bp=function(){};br=g.New(bn,bp);bs=_5.Subscribe(bm);bt=_6.Subscribe(br);return b.New(function(){bs.Dispose();return bt.Dispose();});};return h.New(_8);},Concat:function(bu,bv){var bw;bw=function(bx){var by,bz,bB,bD,bE;by={contents:{$:0}};bz=function(bA){return bx.OnNext(bA);};bB=function(){by.contents={$:1,$0:bv.Subscribe(bx)};};bD=g.New(bz,bB);bE=bu.Subscribe(bD);return b.New(function(){by.contents.$==1?by.contents.$0.Dispose():null;return bE.Dispose();});};return h.New(bw);},Default:$.Field(function(){return o.New();}),Drop:function(bG,bH){var bI;bI=function(bJ){var bK;bK={contents:0};return i.subscribeTo(bG,function(bL){l.Increment(bK);return bK.contents>bH?bJ.OnNext(bL):null;});};return h.New(bI);},Heat:function(bM){var bN;bN=c.New1();i.subscribeTo(bM,function(bO){return bN.Trigger(bO);});return bN;},Merge:function(bP,bQ){var bR;bR=function(bS){var bT,bU,bV,bX,bZ,b0,b1,b3,b5,b6;bT={contents:false};bU={contents:false};bV=function(bW){return bS.OnNext(bW);};bX=function(){bT.contents=true;return(bT.contents?bU.contents:false)?bS.OnCompleted():null;};bZ=g.New(bV,bX);b0=bP.Subscribe(bZ);b1=function(b2){return bS.OnNext(b2);};b3=function(){bU.contents=true;return(bT.contents?bU.contents:false)?bS.OnCompleted():null;};b5=g.New(b1,b3);b6=bQ.Subscribe(b5);return b.New(function(){b0.Dispose();return b6.Dispose();});};return h.New(bR);},Never:function(){return h.New(function(){return b.New(function(){});});},Range:function(b_,b$){var ca;ca=function(cb){var cc;for(cc=b_;cc<=b_+b$;cc++){cb.OnNext(cc);}return b.New(function(){});};return h.New(ca);},Reactive:$.Class({Aggregate:function(ce,cf,cg){return n.Aggregate(ce,cf,cg);},Choose:function(ch,ci){return n.Choose(ch,ci);},CollectLatest:function(cj){return n.CollectLatest(cj);},CombineLatest:function(ck,cl,cm){return n.CombineLatest(ck,cl,cm);},Concat:function(cn,co){return n.Concat(cn,co);},Drop:function(cp,cq){return n.Drop(cp,cq);},Heat:function(cr){return n.Heat(cr);},Merge:function(cs,ct){return n.Merge(cs,ct);},Never:function(){return n.Never();},Return:function(cu){return n.Return(cu);},Select:function(cv,cw){return n.Select(cv,cw);},SelectMany:function(cx){return n.SelectMany(cx);},Sequence:function(cy){return n.Sequence(cy);},Switch:function(cz){return n.Switch(cz);},Where:function(cA,cB){return n.Where(cA,cB);}},{New:function(){return $.New(this,{});}}),Return:function(cC){var cD;cD=function(cE){cE.OnNext(cC);cE.OnCompleted();return b.New(function(){});};return h.New(cD);},Select:function(cG,cH){return h.New(function(cI){return i.subscribeTo(cG,function(cJ){return cI.OnNext(cH(cJ));});});},SelectMany:function(cK){return h.New(function(cL){var cM,cO;cM={contents:function(){}};cO=i.subscribeTo(cK,function(cP){var cQ;cQ=i.subscribeTo(cP,function(cR){return cL.OnNext(cR);});cM.contents=function(){cM.contents.call(null,null);return cQ.Dispose();};return;});return b.New(function(){cM.contents.call(null,null);return cO.Dispose();});});},Sequence:function(cU){var cV;cV=function(cW){var cX,cY,cZ,c0;if(cW.$==1){cY=cW.$1;cZ=cW.$0;c0=cV(cY);cX=n.CombineLatest(cZ,c0,function(c1){return function(c2){return $.New(q,{$:1,$0:c1,$1:c2});};});}else{cX=n.Return($.New(q,{$:0}));}return cX;};return n.Select(cV(p.ofSeq(cU)),function(c3){return c3;});},Switch:function(c4){return h.New(function(c5){var c6,c7,c8;c6={contents:0};c7={contents:{$:0}};c8=i.subscribeTo(c4,function(c9){var c_,c$,db;l.Increment(c6);c7.contents.$==1?c7.contents.$0.Dispose():null;c_=c6.contents;c$=i.subscribeTo(c9,function(da){return c_===c6.contents?c5.OnNext(da):null;});db={$:1,$0:c$};c7.contents=db;return;});return c8;});},Where:function(dc,dd){var de;de=function(df){return i.subscribeTo(dc,function(dg){return dd(dg)?df.OnNext(dg):null;});};return h.New(de);}}}}});$.OnInit(function(){a=$.Safe($$.IntelliFactory.Reactive);b=$.Safe(a.Disposable);c=$.Safe(a.HotStream);d=$.Safe($$.IntelliFactory.WebSharper);e=$.Safe(d.Control);f=$.Safe(e.FSharpEvent);g=$.Safe(a.Observer);h=$.Safe(a.Observable);i=$.Safe(d.Util);j=$.Safe(d.Collections);k=$.Safe(j.Dictionary);l=$.Safe(d.Operators);m=$.Safe(d.Seq);n=$.Safe(a.Reactive);o=$.Safe(n.Reactive);p=$.Safe(d.List);return q=$.Safe(p.T);});$.OnLoad(function(){n.Default();return;});}());

(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p;$.Define($$,{IntelliFactory:{Formlets:{Base:{D:$.Class({Dispose:function(){return null;}},{New:function(){return $.New(this,{});}}),Form:$.Class({Dispose:function(){return this.Dispose1.call(null,null);}}),Formlet:$.Class({Build:function(){return this.Build1.call(null,null);},MapResult:function(q){var t=this;return $.New(c,{Layout:this.Layout,Build1:function(){var s,u,v,w,y;s=t.Build1.call(null,null);u=t.Utils.Reactive;v=s.State;w=function(x){return q(x);};u.Select(v,w);y=s.State;return $.New(d,{Body:s.Body,Dispose1:s.Dispose1,Notify:s.Notify,State:y});},Utils:t.Utils});},get_Layout:function(){return this.Layout;}}),FormletBuilder:$.Class({Bind:function(z,A){var B;B=this.F;return B.Bind(z,A);},Delay:function(C){return this.F.Delay(C);},Return:function(D){return this.F.Return(D);},ReturnFrom:function(E){return E;}},{New:function(F){var G;G=$.New(this,{});G.F=F;return G;}}),FormletProvider:$.Class({AppendLayout:function(H,I){var J;J=this.ApplyLayout(I);return this.WithLayout(H,J);},Apply:function(K,L){var M,P=this;M=function(){var O,Q,R,S,T,V,W,X,Y,_0,_1,_2,_3,_4,_5,_6,_9;O=P.BuildForm(K);Q=P.BuildForm(L);R=P.U.Reactive;S=O.Body;T=function(U){return $.New(f,{$:1,$0:U});};V=R.Select(S,T);W=P.U.Reactive;X=Q.Body;Y=function(Z){return $.New(f,{$:2,$0:Z});};_0=W.Select(X,Y);_1=P.U.Reactive;_2=_1.Merge(V,_0);_3=P.U.Reactive;_4=Q.State;_5=O.State;_6=function(_7){return function(_8){return g.Apply(_8,_7);};};_9=_3.CombineLatest(_4,_5,_6);return $.New(d,{Body:_2,Dispose1:function(){Q.Dispose1.call(null,null);return O.Dispose1.call(null,null);},Notify:function(ba){Q.Notify.call(null,ba);return O.Notify.call(null,ba);},State:_9});};return P.New(M);},ApplyLayout:function(ba){var bb,bi=this;bb=function(){var bd,be,bf,bg,bh;bd=ba.Build();be=ba.get_Layout().Apply.call(null,bd.Body);if(be.$==0){bg=bd.Body;}else{be.$0[1];bh=be.$0[0];bg=bi.U.Reactive.Return(e.Set(bh));}bf=bg;return $.New(d,{Body:bf,Dispose1:bd.Dispose1,Notify:bd.Notify,State:bd.State});};return bi.New(bb);},Bind:function(bj,bk){var bl;bl=this.Map(bk,bj);return this.Join(bl);},BindWith:function(bm,bn,bo){var bp,bs=this;bp=function(){var br,bt,bu,bv,bw,by,bz,bA,bB,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM;br=bs.Bind(bn,bo);bt=br.Build();bu=bs.U.Reactive;bv=bt.Body;bw=function(bx){return bx.$==1?true:false;};by=bs.U.DefaultLayout.Apply.call(null,bu.Where(bv,bw));bz=bs.U.Reactive;bA=bt.Body;bB=function(bC){return bC.$==2?true:false;};bD=bs.U.DefaultLayout.Apply.call(null,bz.Where(bA,bB));bE=[by,bD];if(bE[0].$==1){if(bE[1].$==1){bI=bE[0].$0[0];bJ=bE[1].$0[0];bK=bs.U.Reactive;bL=(bm(bI))(bJ);bM=e.Set(bL);bH=bK.Return(bM);}else{bH=bs.U.Reactive.Never();}bG=bH;}else{bG=bs.U.Reactive.Never();}bF=bG;return $.New(d,{Body:bF,Dispose1:bt.Dispose1,Notify:bt.Notify,State:bt.State});};return bs.New(bp);},BuildForm:function(bN){var bO,bP,bQ,bR,bS;bO=bN.Build();bP=bN.get_Layout().Apply.call(null,bO.Body);if(bP.$==1){bR=bP.$0[1];bS=bP.$0[0];bQ=$.New(d,{Body:this.U.Reactive.Return(e.Set(bS)),Dispose1:function(){bO.Dispose1.call(null,null);return bR.Dispose();},Notify:bO.Notify,State:bO.State});}else{bQ=bO;}return bQ;},Delay:function(bU){var bV,bX=this;bV=function(){return bX.BuildForm(bU(null));};return $.New(c,{Layout:bX.L.Delay(function(){return bU(null).get_Layout();}),Build1:bV,Utils:bX.U});},Deletable:function(bZ){var b0,b4=this;b0=function(b1){var b2,b3;if(b1.$==1){b3=b1.$0;b2=b4.Return({$:1,$0:b3});}else{b2=b4.ReturnEmpty({$:0});}return b2;};return b4.Replace(bZ,b0);},Empty:function(){var b5,b7=this;b5=function(){return $.New(d,{Body:b7.U.Reactive.Return(e.Delete()),Dispose1:function(){},Notify:function(){},State:b7.U.Reactive.Never()});};return b7.New(b5);},EmptyForm:function(){return $.New(d,{Body:this.U.Reactive.Never(),Dispose1:function(){},Notify:function(){},State:this.U.Reactive.Never()});},Fail:function(ca){return $.New(d,{Body:this.U.Reactive.Never(),Dispose1:function(cb){return cb;},Notify:function(){},State:this.U.Reactive.Return($.New(g,{$:1,$0:ca}))});},FailWith:function(cd){var ce,cg=this;ce=function(){return cg.Fail(cd);};return cg.New(ce);},FlipBody:function(ch){var ci,cm=this,cr,cs;ci=function(){var ck,cl,cn,co,cq;ck=ch.Build();cl=cm.U.Reactive;cn=ck.Body;co=function(cp){return e.FlipEdit(cp);};cq=cl.Select(cn,co);return $.New(d,{Body:cq,Dispose1:ck.Dispose1,Notify:ck.Notify,State:ck.State});};cr=cm.New(ci);cs=ch.get_Layout();return cm.WithLayout(cs,cr);},FromState:function(ct){var cu,cw=this;cu=function(){return $.New(d,{Body:cw.U.Reactive.Never(),Dispose1:function(){},Notify:function(){},State:ct});};return cw.New(cu);},InitWith:function(cz,cA){var cB,cF=this,cJ,cK;cB=function(){var cD,cE,cG,cH,cI;cD=cA.Build();cE=cF.U.Reactive;cG=cF.U.Reactive.Return($.New(g,{$:0,$0:cz}));cH=cD.State;cI=cE.Concat(cG,cH);return $.New(d,{Body:cD.Body,Dispose1:cD.Dispose1,Notify:cD.Notify,State:cI});};cJ=cF.New(cB);cK=cA.get_Layout();return cF.WithLayout(cK,cJ);},InitWithFailure:function(cL){var cM,cQ=this,cU,cV;cM=function(){var cO,cP,cR,cS,cT;cO=cL.Build();cP=cQ.U.Reactive;cR=cQ.U.Reactive.Return($.New(g,{$:1,$0:$.New(j,{$:0})}));cS=cO.State;cT=cP.Concat(cR,cS);return $.New(d,{Body:cO.Body,Dispose1:cO.Dispose1,Notify:cO.Notify,State:cT});};cU=cQ.New(cM);cV=cL.get_Layout();return cQ.WithLayout(cV,cU);},Join:function(cW){var cX,c0=this;cX=function(){var cZ,c1,c2,c3,c8,c9,c_,c$,da,df,dg,dh,di,dk,dl,dm,dn,_do,dq,dr,ds,dt,du,dw,dy;cZ=c0.BuildForm(cW);c1=c0.U.Reactive;c2=cZ.State;c3=function(c4){var c5,c6,c7;if(c4.$==1){c6=c4.$0;c5=c0.Fail(c6);}else{c7=c4.$0;c5=c0.BuildForm(c7);}return c5;};c8=c0.U.Reactive;c9=c1.Select(c2,c3);c_=c8.Heat(c9);c$=c0.U.Reactive;da=function(db){var dc,dd,de;dc=c0.U.Reactive.Return(e.Delete());dd=c0.U.Reactive;de=db.Body;return dd.Concat(dc,de);};df=c$.Select(c_,da);dg=c0.U.Reactive;dh=c0.U.Reactive.Switch(df);di=function(dj){return $.New(f,{$:2,$0:dj});};dk=dg.Select(dh,di);dl=c0.U.Reactive;dm=c0.U.Reactive;dn=cZ.Body;_do=function(dp){return $.New(f,{$:1,$0:dp});};dq=dm.Select(dn,_do);dr=dl.Merge(dq,dk);dt=c0.U.Reactive;du=function(dv){return dv.State;};ds=c0.U.Reactive.Switch(dt.Select(c_,du));dw=function(dx){return cZ.Notify.call(null,dx);};dy=function(){return cZ.Dispose1.call(null,null);};return $.New(d,{Body:dr,Dispose1:dy,Notify:dw,State:ds});};return c0.New(cX);},LiftResult:function(dA){var dB;dB=function(dC){return $.New(g,{$:0,$0:dC});};return this.MapResult(dB,dA);},Map:function(dD,dE){var dF;dF=function(dG){return g.Map(dD,dG);};return this.MapResult(dF,dE);},MapBody:function(dH,dI){var dJ,dO=this;dJ={Apply:function(dK){var dL,dM,dN,dP,dQ,dR,dS,dT;dL=dI.get_Layout().Apply.call(null,dK);if(dL.$==0){dN=dO.U.DefaultLayout.Apply.call(null,dK);if(dN.$==0){dP={$:0};}else{dQ=dN.$0[1];dR=dN.$0[0];dP={$:1,$0:[dH(dR),dQ]};}dM=dP;}else{dS=dL.$0[1];dT=dL.$0[0];dM={$:1,$0:[dH(dT),dS]};}return dM;}};return dO.WithLayout(dJ,dI);},MapResult:function(dU,dV){var dW,d0=this;dW=function(){var dY,dZ,d1,d2,d4;dY=dV.Build();dZ=d0.U.Reactive;d1=dY.State;d2=function(d3){return dU(d3);};d4=dZ.Select(d1,d2);return $.New(d,{Body:dY.Body,Dispose1:dY.Dispose1,Notify:dY.Notify,State:d4});};return $.New(c,{Layout:dV.get_Layout(),Build1:dW,Utils:d0.U});},Never:function(){var d5,d7=this;d5=function(){return $.New(d,{Body:d7.U.Reactive.Never(),Dispose1:function(){},Notify:function(){},State:d7.U.Reactive.Never()});};return d7.New(d5);},New:function(d_){return $.New(c,{Layout:this.L.Default(),Build1:d_,Utils:this.U});},Replace:function(d$,ea){var eb,ed;eb=function(ec){return ea(ec);};ed=this.Map(eb,d$);return this.Switch(ed);},ReplaceFirstWithFailure:function(ee){var ef,ej=this,ep,eq;ef=function(){var eh,ei,ek,el,em,en,eo;eh=ee.Build();ei=ej.U.Reactive;ek=eh.State;el=ei.Drop(ek,1);em=ej.U.Reactive;en=ej.U.Reactive.Return($.New(g,{$:1,$0:$.New(j,{$:0})}));eo=em.Concat(en,el);return $.New(d,{Body:eh.Body,Dispose1:eh.Dispose1,Notify:eh.Notify,State:eo});};ep=ej.New(ef);eq=ee.get_Layout();return ej.WithLayout(eq,ep);},Return:function(er){var es,eu=this;es=function(){return $.New(d,{Body:eu.U.Reactive.Never(),Dispose1:function(ev){return ev;},Notify:function(){},State:eu.U.Reactive.Return($.New(g,{$:0,$0:er}))});};return eu.New(es);},ReturnEmpty:function(ex){var ey,eA=this;ey=function(){return $.New(d,{Body:eA.U.Reactive.Return(e.Delete()),Dispose1:function(eB){return eB;},Notify:function(){},State:eA.U.Reactive.Return($.New(g,{$:0,$0:ex}))});};return eA.New(ey);},SelectMany:function(eD){var eE,eH=this;eE=function(){var eG,eI,eJ,eK,eP,eQ,eR,eS,eT,eU,eW,eX,eZ,e4,e5,e_,e$,fa,fb,fc,fd,ff,fg,fh,fi,fk,fl,fn;eG=eH.BuildForm(eD);eI=eH.U.Reactive;eJ=eG.State;eK=function(eL){var eM,eN,eO;if(eL.$==1){eL.$0;eM={$:0};}else{eN=eL.$0;eO=eH.BuildForm(eN);eM={$:1,$0:eO};}return eM;};eP=eH.U.Reactive;eQ=eI.Choose(eJ,eK);eR=eP.Heat(eQ);eS=eH.U.Reactive;eT=eG.Body;eU=function(eV){return $.New(f,{$:1,$0:eV});};eW=eS.Select(eT,eU);eX={contents:function(eY){return $.New(f,{$:1,$0:eY});}};eZ=function(){var e1;e1=eX.contents;eX.contents=function(e2){var e3;e3=e1(e2);return $.New(f,{$:2,$0:e3});};return;};e4=eH.U.Reactive;e5=function(e6){var e7,e8,e9;eZ(null);e7=eX.contents;e8=eH.U.Reactive;e9=e6.Body;return e8.Select(e9,e7);};e_=e4.Select(eR,e5);e$=eH.U.Reactive.SelectMany(e_);fa=eH.U.Reactive;fb=fa.Merge(eW,e$);fc=eH.U.Reactive;fd=function(fe){return fe.State;};ff=fc.Select(eR,fd);fg=eH.U.Reactive;fh=eH.U.Reactive.CollectLatest(ff);fi=function(fj){return g.Sequence(fj);};fk=fg.Select(fh,fi);fl=function(fm){return eG.Notify.call(null,fm);};fn=function(){return eG.Dispose1.call(null,null);};return $.New(d,{Body:fb,Dispose1:fn,Notify:fl,State:fk});};return eH.New(eE);},Sequence:function(fp){var fq,fr,fs,ft,fu,fx,fy;fq=i.ofSeq(fp);if(fq.$==1){fs=fq.$1;ft=fq.$0;fu=this.Return(function(fv){return function(fw){return $.New(j,{$:1,$0:fv,$1:fw});};});fx=this.Sequence(fs);fy=this.Apply(fu,ft);fr=this.Apply(fy,fx);}else{fr=this.Return($.New(j,{$:0}));}return fr;},Switch:function(fz){var fA,fD=this;fA=function(){var fC,fE,fF,fG,fH,fI,fN,fO,fP,fQ,fR,fS,fT,fU,fW,fX,fY,fZ,f1,f3;fC=fD.WithLayoutOrDefault(fz);fE=fD.ApplyLayout(fC);fF=fD.BuildForm(fE);fG=fD.U.Reactive;fH=fF.State;fI=function(fJ){var fK,fL,fM;if(fJ.$==1){fJ.$0;fK={$:0};}else{fL=fJ.$0;fM=fD.BuildForm(fL);fK={$:1,$0:fM};}return fK;};fN=fD.U.Reactive;fO=fG.Choose(fH,fI);fP=fN.Heat(fO);fQ=fD.U.Reactive;fR=fF.Body;fT=fD.U.Reactive;fU=function(fV){return fV.Body;};fS=fD.U.Reactive.Switch(fT.Select(fP,fU));fW=fQ.Concat(fR,fS);fY=fD.U.Reactive;fZ=function(f0){return f0.State;};fX=fD.U.Reactive.Switch(fY.Select(fP,fZ));f1=function(f2){return fF.Notify.call(null,f2);};f3=function(){return fF.Dispose1.call(null,null);};return $.New(d,{Body:fW,Dispose1:f3,Notify:f1,State:fX});};return fD.New(fA);},WithCancelation:function(f5,f6){var f7,gd,ge,gf,gg,gh,gj;f7=function(f8){return function(f9){var f_,f$,ga,gb,gc;f_=[f8,f9];if(f_[1].$==0){f$=$.New(g,{$:0,$0:{$:0}});}else{if(f_[0].$==1){gb=f_[0].$0;ga=$.New(g,{$:1,$0:gb});}else{gc=f_[0].$0;ga=$.New(g,{$:0,$0:{$:1,$0:gc}});}f$=ga;}return f$;};};gd=this.Return(f7);ge=this.LiftResult(f5);gf=this.LiftResult(f6);gg=this.Apply(gd,ge);gh=function(gi){return g.Join(gi);};gj=this.Apply(gg,gf);return this.MapResult(gh,gj);},WithLayout:function(gk,gl){return $.New(c,{Layout:gk,Build1:function(){return gl.Build();},Utils:this.U});},WithLayoutOrDefault:function(gn){var go;go=function(gp){return gp;};return this.MapBody(go,gn);},WithNotification:function(gq,gr){var gs,gv=this,gy,gz;gs=function(){var gu,gw;gu=gv.BuildForm(gr);gw=function(gx){gu.Notify.call(null,gx);return gq(gx);};return $.New(d,{Body:gu.Body,Dispose1:gu.Dispose1,Notify:gw,State:gu.State});};gy=gv.New(gs);gz=gr.get_Layout();return gv.WithLayout(gz,gy);},WithNotificationChannel:function(gA){var gB,gF=this,gN,gO;gB=function(){var gD,gE,gG,gH,gJ,gL,gM;gD=gA.Build();gE=gF.U.Reactive;gG=gD.State;gH=function(gI){return[gI,gD.Notify];};gJ=function(gK){return g.Map(gH,gK);};gL=gE.Select(gG,gJ);gM=gD.Notify;return $.New(d,{Body:gD.Body,Dispose1:gD.Dispose1,Notify:gM,State:gL});};gN=gF.New(gB);gO=gA.get_Layout();return gF.WithLayout(gO,gN);}},{New:function(gP){var gQ;gQ=$.New(this,{});gQ.U=gP;gQ.L=k.New({Reactive:gQ.U.Reactive});return gQ;}}),LayoutUtils:$.Class({Default:function(){return{Apply:function(){return{$:0};}};},Delay:function(gS){return{Apply:function(gT){return gS(null).Apply.call(null,gT);}};},New:function(gU){return{Apply:function(gV){var gW,gX,gY;gW=gU(null);gX={contents:$.New(l,{$:0})};gY=m.subscribeTo(gV,function(gZ){var g0,g1,g2,g3;g0=e.ReplacedTree(gZ,gX.contents);gX.contents=e.Apply(gZ,gX.contents);g1=e.Range(gZ,gX.contents);g2=g1[0];gW.Remove.call(null,g0.get_Sequence());g3=function(g4){return function(g5){return(gW.Insert.call(null,g2+g4))(g5);};};return n.iteri(g3,gZ);});return{$:1,$0:[gW.Body,gY]};}};}},{New:function(){return $.New(this,{});}}),Result:$.Class({},{Apply:function(g7,g8){var g9,g_,g$,ha,hb,hc,hd,he,hf,hg;g9=[g7,g8];if(g9[0].$==1){if(g9[1].$==1){ha=g9[0].$0;hb=g9[1].$0;g$=$.New(g,{$:1,$0:i.append(ha,hb)});}else{hc=g9[0].$0;g$=$.New(g,{$:1,$0:hc});}g_=g$;}else{if(g9[1].$==1){g9[0].$0;he=g9[1].$0;hd=$.New(g,{$:1,$0:he});}else{hf=g9[0].$0;hg=g9[1].$0;hd=$.New(g,{$:0,$0:hf(hg)});}g_=hd;}return g_;},Join:function(hh){var hi,hj,hk;if(hh.$==1){hj=hh.$0;hi=$.New(g,{$:1,$0:hj});}else{hk=hh.$0;hi=hk;}return hi;},Map:function(hl,hm){var hn,ho,hp;if(hm.$==1){ho=hm.$0;hn=$.New(g,{$:1,$0:ho});}else{hp=hm.$0;hn=$.New(g,{$:0,$0:hl(hp)});}return hn;},OfOption:function(hq){var hr,hs;if(hq.$==0){hr=$.New(g,{$:1,$0:$.New(j,{$:0})});}else{hs=hq.$0;hr=$.New(g,{$:0,$0:hs});}return hr;},Sequence:function(ht){var hu;hu=function(hv){return function(hw){var hx,hy,hz,hA,hB,hC,hD,hE,hF;if(hv.$==1){hy=hv.$0;if(hw.$==1){hA=hw.$0;hz=$.New(g,{$:1,$0:i.append(hy,hA)});}else{hw.$0;hz=$.New(g,{$:1,$0:hy});}hx=hz;}else{hB=hv.$0;if(hw.$==1){hD=hw.$0;hC=$.New(g,{$:1,$0:hD});}else{hE=hw.$0;hF=i.ofArray([hE]);hC=$.New(g,{$:0,$0:i.append(hB,hF)});}hx=hC;}return hx;};};return n.fold(hu,$.New(g,{$:0,$0:$.New(j,{$:0})}),ht);}}),Tree:{Apply:function(hG,hH){var hI;hI=function(hJ,hK){var hL,hM,hN,hO,hP,hQ,hR,hS,hT,hU;if(hJ.$==1){hM=hJ.$0;if(hK.$==2){hO=hK.$1;hP=hK.$0;hN=$.New(l,{$:2,$0:hI(hM,hP),$1:hO});}else{hN=hI($.New(f,{$:1,$0:hM}),$.New(l,{$:2,$0:$.New(l,{$:0}),$1:hK}));}hL=hN;}else{if(hJ.$==2){hQ=hJ.$0;if(hK.$==2){hS=hK.$1;hT=hK.$0;hR=$.New(l,{$:2,$0:hT,$1:hI(hQ,hS)});}else{hR=hI($.New(f,{$:2,$0:hQ}),$.New(l,{$:2,$0:hK,$1:$.New(l,{$:0})}));}hL=hR;}else{hU=hJ.$0;hL=hU;}}return hL;};return hI(hG,hH);},Count:function(hV){var hW,hX,hY,hZ,h0,h1,h2,h3,h4,h5,h6,h7,h8;hW=[];hX=$.New(j,{$:0});hW[3]=hV;hW[2]=hX;hW[1]=0;hW[0]=1;while(hW[0]){if(hW[3].$==2){hZ=hW[3].$1;h0=hW[3].$0;h1=$.New(j,{$:1,$0:hZ,$1:hW[2]});h2=hW[1];hW[3]=h0;hW[2]=h1;hW[1]=h2;hY=void(hW[0]=1);}else{h3=hW[3];h4=h3.$==0?0:1;if(hW[2].$==1){h6=hW[2].$1;h7=hW[2].$0;h8=hW[1]+h4;hW[3]=h7;hW[2]=h6;hW[1]=h8;h5=void(hW[0]=1);}else{hW[0]=0;h5=void(hW[1]=hW[1]+h4);}hY=h5;}}return hW[1];},DeepFlipEdit:function(h9){var h_,h$,ia,ib;if(h9.$==1){h$=h9.$0;h_=$.New(f,{$:2,$0:e.DeepFlipEdit(h$)});}else{if(h9.$==2){ia=h9.$0;h_=$.New(f,{$:1,$0:e.DeepFlipEdit(ia)});}else{ib=h9.$0;h_=$.New(f,{$:0,$0:ib});}}return h_;},Delete:function(){return $.New(f,{$:0,$0:$.New(l,{$:0})});},Edit:$.Class({GetEnumerator:function(){var ic;ic=this.get_Sequence();return o.Get(ic);},GetEnumerator1:function(){var id;id=this.get_Sequence();return o.Get(id);},get_Sequence:function(){var ie,_if,ig,ih;if(this.$==1){_if=this.$0;ie=_if.get_Sequence();}else{if(this.$==2){ig=this.$0;ie=ig.get_Sequence();}else{ih=this.$0;ie=ih.get_Sequence();}}return ie;}}),FlipEdit:function(ii){var ij,ik,il,im;if(ii.$==1){ik=ii.$0;ij=$.New(f,{$:2,$0:ik});}else{if(ii.$==2){il=ii.$0;ij=$.New(f,{$:1,$0:il});}else{im=ii.$0;ij=$.New(f,{$:0,$0:im});}}return ij;},FromSequence:function(_in){var io,ir;io=function(ip){return function(iq){return $.New(l,{$:2,$0:ip,$1:$.New(l,{$:1,$0:iq})});};};ir=$.New(l,{$:0});return n.fold(io,ir,_in);},Range:function(is,it){var iu,iv,iw,ix,iy,iz,iA,iB,iC,iD,iE,iF,iG,iH;iu=[];iu[3]=0;iu[2]=it;iu[1]=is;iu[0]=1;while(iu[0]){if(iu[1].$==1){iw=iu[1].$0;if(iu[2].$==2){iu[2].$1;iy=iu[2].$0;iu[3]=iu[3];iu[2]=iy;iu[1]=iw;ix=void(iu[0]=1);}else{iz=iu[3];iA=$.New(l,{$:0});iu[3]=iz;iu[2]=iA;iu[1]=iw;ix=void(iu[0]=1);}iv=ix;}else{if(iu[1].$==2){iB=iu[1].$0;if(iu[2].$==2){iD=iu[2].$1;iE=iu[2].$0;iu[3]=iu[3]+e.Count(iE);iu[2]=iD;iu[1]=iB;iC=void(iu[0]=1);}else{iF=iu[2];iG=iu[3]+e.Count(iF);iH=$.New(l,{$:0});iu[3]=iG;iu[2]=iH;iu[1]=iB;iC=void(iu[0]=1);}iv=iC;}else{iu[1].$0;iu[0]=0;iv=void(iu[1]=[iu[3],e.Count(iu[2])]);}}}return iu[1];},ReplacedTree:function(iI,iJ){var iK,iL,iM,iN,iO,iP,iQ;if(iI.$==1){iL=iI.$0;if(iJ.$==2){iJ.$1;iN=iJ.$0;iM=e.ReplacedTree(iL,iN);}else{iM=e.ReplacedTree($.New(f,{$:1,$0:iL}),$.New(l,{$:2,$0:$.New(l,{$:0}),$1:iJ}));}iK=iM;}else{if(iI.$==2){iO=iI.$0;if(iJ.$==2){iQ=iJ.$1;iJ.$0;iP=e.ReplacedTree(iO,iQ);}else{iP=e.ReplacedTree($.New(f,{$:2,$0:iO}),$.New(l,{$:2,$0:iJ,$1:$.New(l,{$:0})}));}iK=iP;}else{iI.$0;iK=iJ;}}return iK;},Set:function(iR){return $.New(f,{$:0,$0:$.New(l,{$:1,$0:iR})});},ShowEdit:function(iS){var iT;iT=function(iU){var iV,iW,iX;if(iU.$==1){iW=iU.$0;iV="Left > "+iT(iW);}else{if(iU.$==2){iX=iU.$0;iV="Right > "+iT(iX);}else{iV="Replace";}}return iV;};return iT(iS);},Transform:function(iY,iZ){var i0,i1,i2,i3,i4,i5;if(iZ.$==1){i1=iZ.$0;i2=e.Transform(iY,i1);i0=$.New(f,{$:1,$0:i2});}else{if(iZ.$==2){i3=iZ.$0;i4=e.Transform(iY,i3);i0=$.New(f,{$:2,$0:i4});}else{i5=iZ.$0;i0=$.New(f,{$:0,$0:iY(i5)});}}return i0;},Tree:$.Class({GetEnumerator:function(){var i6;i6=this.get_Sequence();return o.Get(i6);},GetEnumerator1:function(){var i7;i7=this.get_Sequence();return o.Get(i7);},Map:function(i8){var i9,i_,i$,ja;if(this.$==1){i_=this.$0;i9=$.New(l,{$:1,$0:i8(i_)});}else{if(this.$==2){i$=this.$1;ja=this.$0;i9=$.New(l,{$:2,$0:ja.Map(i8),$1:i$.Map(i8)});}else{i9=$.New(l,{$:0});}}return i9;},get_Sequence:function(){var jb,jc,jd,je;if(this.$==1){jc=this.$0;jb=[jc];}else{if(this.$==2){jd=this.$1;je=this.$0;jb=n.append(je.get_Sequence(),jd.get_Sequence());}else{jb=n.empty();}}return jb;}})},Validator:$.Class({Is:function(jf,jg,jh){return this.Validate(jf,jg,jh);},IsEmail:function(ji){var jk=this;return function(jj){return jk.IsRegexMatch("^[A-Za-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[A-Za-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[A-Za-z0-9](?:[A-Za-z0-9-]*[A-Za-z0-9])?\\.)+[A-Za-z0-9](?:[A-Za-z0-9-]*[A-Za-z0-9])?$",ji,jj);};},IsEqual:function(jl,jm,jn){var jo;jo=function(jp){return p.Equals(jp,jl);};return this.Validate(jo,jm,jn);},IsFloat:function(jq){var js=this;return function(jr){return js.IsRegexMatch("^\\s*(\\+|-)?((\\d+(\\.\\d+)?)|(\\.\\d+))\\s*$",jq,jr);};},IsGreaterThan:function(jt,ju,jv){var jw;jw=function(jx){return p.Compare(jx,jt)===1;};return this.Validate(jw,ju,jv);},IsInt:function(jy){var jA=this;return function(jz){return jA.IsRegexMatch("^-?\\d+$",jy,jz);};},IsLessThan:function(jB,jC,jD){var jE;jE=function(jF){return p.Compare(jF,jB)===-1;};return this.Validate(jE,jC,jD);},IsNotEmpty:function(jG,jH){var jI;jI=function(jJ){return jJ!=="";};return this.Validate(jI,jG,jH);},IsNotEqual:function(jK,jL,jM){var jN;jN=function(jO){return!p.Equals(jO,jK);};return this.Validate(jN,jL,jM);},IsRegexMatch:function(jP,jQ,jR){var jS,jV=this;jS=function(jT){var jU;jU=jV.VP;return jU.Matches(jP,jT);};return jV.Validate(jS,jQ,jR);},IsTrue:function(jW,jX){var jY;jY=function(jZ){return jZ;};return this.Validate(jY,jW,jX);},Validate:function(j0,j1,j2){var j3;j3=j2.MapResult(function(j4){var j5,j6,j7;if(j4.$==1){j6=j4.$0;j5=$.New(g,{$:1,$0:j6});}else{j7=j4.$0;j5=j0(j7)?$.New(g,{$:0,$0:j7}):$.New(g,{$:1,$0:i.ofArray([j1])});}return j5;});return j3;}},{New:function(j8){var j9;j9=$.New(this,{});j9.VP=j8;return j9;}})}}}});$.OnInit(function(){a=$.Safe($$.IntelliFactory.Formlets);b=$.Safe(a.Base);c=$.Safe(b.Formlet);d=$.Safe(b.Form);e=$.Safe(b.Tree);f=$.Safe(e.Edit);g=$.Safe(b.Result);h=$.Safe($$.IntelliFactory.WebSharper);i=$.Safe(h.List);j=$.Safe(i.T);k=$.Safe(b.LayoutUtils);l=$.Safe(e.Tree);m=$.Safe(h.Util);n=$.Safe(h.Seq);o=$.Safe(h.Enumerator);return p=$.Safe(h.Unchecked);});$.OnLoad(function(){return;});}());

(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3;$.Define($$,{IntelliFactory:{WebSharper:{Formlets:{Body:$.Class({},{New:function(_4,_5){return $.New(c,{Element:_4,Label:_5});}}),Controls:{Button:function(_6){var _7;_7=function(){return f.Button(g.ofArray([f.Text(_6)]));};return h.ElementButton(_7);},Checkbox:function(_9){return h.CheckboxControl(false,_9);},CheckboxControl:function(_,ba){var bb;bb=function(){var bd,be,bf,bg,bh,bi,bj,bp,bq,br,bs,bt,bu,bv;bd=j.New($.New(m,{$:0,$0:ba}));if(_){bg=f.Attr();bf=g.ofArray([bg.NewAttr("disabled","disabled")]);}else{bf=$.New(n,{$:0});}be=bf;bi=f.Attr();bh=o.add(f.Input(g.ofArray([bi.NewAttr("type","checkbox"),f.Attr().Class("inputCheckbox")])),be);bj=function(bk){return function(){var bm,bn,bo;if(!_){bn=p(bk.get_Body()).prop("checked");bo=$.New(m,{$:0,$0:bn});bm=bd.Trigger(bo);}else{bm=null;}return bm;};};q.Events().OnClick(bj,bh);bp=bh;if(ba){br=bp["HtmlProvider@33"];bs=bp.get_Body();bq=br.SetAttribute(bs,"defaultChecked","true");}else{bt=bp["HtmlProvider@33"];bu=bp.get_Body();bq=bt.RemoveAttribute(bu,"checked");}bv=function(){var bx,by,bz,bA,bB,bC,bD;if(ba){by=bp["HtmlProvider@33"];bz=bp.get_Body();bx=by.SetProperty(bz,"checked",true);}else{bA=bp["HtmlProvider@33"];bB=bp.get_Body();bA.RemoveAttribute(bB,"checked");bC=bp["HtmlProvider@33"];bD=bp.get_Body();bx=bC.SetProperty(bD,"checked",false);}return bd.Trigger($.New(m,{$:0,$0:ba}));};bv(null);return[bp,bv,bd];};return r.MkFormlet(bb);},CheckboxGroup:function(bD){return h.CheckboxGroupControl(false,bD);},CheckboxGroupControl:function(bE,bF){var bG,bU,bV,bW,b0;bG=$.Tupled(function(bH){var bI,bJ,bK,bL,bM,bQ,bR,bT;bI=bH[0];bJ=bH[1];bK=bH[2];bL=h.CheckboxControl(bE,bK);bM=function(){var bO,bP;bO=g.ofArray([f.Text(bI)]);bP=f.Tags();return bP.NewTag("label",bO);};bQ={$:1,$0:bM};bR=function(bS){return[bS,bJ];};bT=s.WithLabel(bQ,bL);return s.Map(bR,bT);});bU=g.map(bG,bF);bV=s.Sequence(bU);bW=$.Tupled(function(bX){var bY,bZ;bY=bX[0];bZ=bX[1];return bY?{$:1,$0:bZ}:{$:0};});b0=function(b1){return g.choose(bW,b1);};return s.Map(b0,bV);},ElementButton:function(b2){var b3;b3=function(){var b5,b6,b7,b8,b$,ca;b5=j.New($.New(m,{$:1,$0:$.New(n,{$:0})}));b6={contents:0};b7=b2(null);b8=function(){return function(){b5.Trigger($.New(m,{$:0,$0:b6.contents}));return t.Increment(b6);};};q.Events().OnClick(b8,b7);b$=b7;ca=function(){b6.contents=0;return b5.Trigger($.New(m,{$:1,$0:$.New(n,{$:0})}));};return[b$,ca,b5];};return r.MkFormlet(b3);},Input:function(cc){return h.InputField(false,"text",u.InputTextClass(),cc);},InputControl:function(cd,ce){var cf;cf=function(){var ch,ci,cj;ch=j.New($.New(m,{$:0,$0:cd}));ci=ce(ch);ci.set_Value(cd);cj=function(){ci.set_Value(cd);return ch.Trigger($.New(m,{$:0,$0:cd}));};return[ci,cj,ch];};return r.MkFormlet(cf);},InputField:function(cl,cm,cn,co){return h.InputControl(co,function(cp){var cq,cr,cs,ct,cu,cv,cw,cx;if(cl){cs=f.Attr();cr=g.ofArray([cs.NewAttr("readonly","readonly")]);}else{cr=$.New(n,{$:0});}cq=cr;cu=f.Attr();ct=g.ofArray([cu.NewAttr("type",cm),f.Attr().Class(cn)]);cv=g.append(ct,cq);cw=f.Input(cv);cx=function(){return!cl?cp.Trigger($.New(m,{$:0,$0:cw.get_Value()})):null;};h.OnTextChange(cx,cw);return cw;});},OnTextChange:function(cz,cA){var cB,cC,cF,cH;cB={contents:cA.get_Value()};cC=function(){var cE;if(cA.get_Value()!==cB.contents){cB.contents=cA.get_Value();cE=cz(null);}else{cE=null;}return cE;};cF=function(){return cC(null);};q.Events().OnChange(cF,cA);cH=function(){return function(){return cC(null);};};q.Events().OnKeyUp(cH,cA);cA.Dom.oninput=cC;return;},Password:function(cK){return h.InputField(false,"password","inputPassword",cK);},RadioButtonGroup:function(cL,cM){return h.RadioButtonGroupControl(false,cL,cM);},RadioButtonGroupControl:function(cN,cO,cP){var cQ;cQ=function(){var cS,cT,cU,cV,cW,c0,c1,c7,c8,c_,c$,di,dj,dw,dD,dQ,dR,dS,dT;cS="id"+v.round(v.random()*100000000);if(cO.$==0){cU={$:0};}else{cV=cO.$0;cW=function(cX){return $.Tupled(function(cY){var cZ;cY[0];cZ=cY[1];return[cX,cZ];});};c0=g.mapi(cW,cP);c1=$.Tupled(function(c2){var c3,c4,c5,c6;c3=c2[0];c4=c2[1];if(cO.$==0){c5={$:0};}else{c6=cO.$0;c5=c6===c3?{$:1,$0:$.New(m,{$:0,$0:c4})}:{$:0};}return c5;});cU=w.tryPick(c1,c0);}cT=cU;c7=j.New($.New(m,{$:1,$0:$.New(n,{$:0})}));c8=function(c9){return j.New(c9);};c_=x.Maybe(c7,c8,cT);c$=$.Tupled(function(da){var db,dc,dd,de,df,dg,dh;db=da[0];dc=da[1];de=f.Attr();df=f.Attr();if(cN){dh=f.Attr();dg=g.ofArray([dh.NewAttr("disabled","disabled")]);}else{dg=$.New(n,{$:0});}dd=o.add(f.Input(g.ofArray([f.Attr().Class("inputRadio"),de.NewAttr("type","radio"),df.NewAttr("name",cS)])),dg);return[dd,db,dc];});di=g.map(c$,cP);dj=function(dk,dl,dm){var dn,_do,dp,dq,dr,ds,dt,du,dv;if(cO.$==0){_do=dk["HtmlProvider@33"];dp=dk.get_Body();_do.RemoveAttribute(dp,"checked");dn=c_.Trigger($.New(m,{$:1,$0:$.New(n,{$:0})}));}else{dq=cO.$0;if(dq===dm){ds=dk["HtmlProvider@33"];dt=dk.get_Body();ds.SetProperty(dt,"checked",true);dr=c_.Trigger($.New(m,{$:0,$0:dl}));}else{du=dk["HtmlProvider@33"];dv=dk.get_Body();dr=du.SetProperty(dv,"checked",false);}dn=dr;}return dn;};dw=function(){var dy;dy=function(dz){return $.Tupled(function(dA){var dB,dC;dB=dA[0];dA[1];dC=dA[2];return dj(dB,dC,dz);});};return w.iteri(dy,di);};dD=function(dE){return $.Tupled(function(dF){var dG,dH,dI,dJ,dM;dG=dF[0];dH=dF[1];dI=dF[2];dj(dG,dI,dE);dJ=function(){return function(){return!cN?c_.Trigger($.New(m,{$:0,$0:dI})):null;};};q.Events().OnClick(dJ,dG);dM={$:1,$0:function(){var dO,dP;dO=g.ofArray([f.Text(dH)]);dP=f.Tags();return dP.NewTag("label",dO);}};return $.New(c,{Element:dG,Label:dM});});};dQ=g.mapi(dD,di);dR=y.FromSequence(dQ);dS=$.New(z,{$:0,$0:dR});dT=r.RX().Return(dS);return $.New(A,{Body:dT,Dispose1:function(){},Notify:function(){return dw(null);},State:c_});};return s.New(cQ);},ReadOnlyCheckbox:function(dW){return h.CheckboxControl(true,dW);},ReadOnlyInput:function(dX){return h.InputField(true,"text",u.InputTextClass(),dX);},ReadOnlyRadioButtonGroup:function(dY,dZ){return h.RadioButtonGroupControl(true,dY,dZ);},ReadOnlySelect:function(d0,d1){return h.SelectControl(true,d0,d1);},ReadOnlyTextArea:function(d2){return h.TextAreaControl(true,d2);},Select:function(d3,d4){return h.SelectControl(false,d3,d4);},SelectControl:function(d5,d6,d7){var d8;d8=function(){var d_,ea,eb,ec,ed,el,em,en,eo,ep,eq,er,es,ex;d_=$.Tupled(function(d$){return d$[1];});ea=g.map(d_,d7);eb=B.ofSeq(ea);ec=(d6>=0?d6<d7.get_Length():false)?d6:0;ed=function(ee){return $.Tupled(function(ef){var eg,eh,ei,ej,ek;eg=ef[0];ef[1];eh=f.Tags();ej=f.Attr();ek=$$.String(ee);ei=g.ofArray([f.Text(eg),ej.NewAttr("value",ek)]);return eh.NewTag("option",ei);});};el=g.mapi(ed,d7);em=f.Select(el);if(d5){ep=f.Attr();eo=o.add(em,g.ofArray([ep.NewAttr("disabled","disabled")]));}else{eo=em;}en=eo;eq=$.New(m,{$:0,$0:C.GetArray(eb,ec)});er=j.New(eq);es=function(){var eu,ev,ew;eu=$$.String(ec);ev=en["HtmlProvider@33"];ew=en.get_Body();ev.SetProperty(ew,"value",eu);return er.Trigger(eq);};es(null);ex=function(){var ez,eA,eB,eC;if(!d5){eA=en.get_Value();eB=C.GetArray(eb,eA<<0);eC=$.New(m,{$:0,$0:eB});ez=er.Trigger(eC);}else{ez=null;}return ez;};q.Events().OnChange(ex,en);es(null);return[en,es,er];};return r.MkFormlet(d8);},TextArea:function(eD){return h.TextAreaControl(false,eD);},TextAreaControl:function(eE,eF){return h.InputControl(eF,function(eG){var eH,eI,eJ,eK,eL;if(eE){eJ=f.Attr();eI=g.ofArray([eJ.NewAttr("readonly","readonly")]);}else{eI=$.New(n,{$:0});}eH=eI;eK=f.TextArea(eH);eL=function(){return!eE?eG.Trigger($.New(m,{$:0,$0:eK.get_Value()})):null;};h.OnTextChange(eL,eK);return eK;});}},CssConstants:{InputTextClass:$.Field(function(){return"inputText";})},Data:{$:function(eN,eO){var eP,eQ;eP=r.BaseFormlet();eQ=eP.Apply(eN,eO);return r.OfIFormlet(eQ);},BaseFormlet:function(){return D.New(r.UtilsProvider());},DefaultLayout:$.Field(function(){return r.Layout().get_Vertical();}),Formlet:$.Class({Build:function(){return this.buildInternal.call(null,null);},MapResult:function(eR){var eS,eV=this;eS=E.New(function(){var eU,eW,eX,eY;eU=eV.buildInternal.call(null,null);eW=eV.utils.Reactive;eX=eU.State;eY=function(eZ){return eR(eZ);};return $.New(A,{Body:eU.Body,Dispose1:eU.Dispose1,Notify:eU.Notify,State:eW.Select(eX,eY)});},eV.layoutInternal,eV.formletBase,eV.utils);return eS;},Render:function(){return this.Run(function(){}).Render();},Run:function(e1){var e2,e3,e4,e5,e6,e9,e_,e$,fa,fb,fc,fd;e2=this.get_ElementInternal();if(e2.$==0){e4=this.formletBase.ApplyLayout(this);e5=e4.Build();e6=G.subscribeTo(e5.State,function(e7){var e8;e8=m.Map(e1,e7);return;});e9=e4.get_Layout().Apply.call(null,e5.Body);if(e9.$==0){fa=r.DefaultLayout().Apply.call(null,e5.Body).$0;fb=fa[0];e$=fb.Element;}else{fc=e9.$0[0];e$=fc.Element;}e_=e$;this.set_ElementInternal({$:1,$0:e_});e3=e_;}else{fd=e2.$0;e3=fd;}return e3;},get_Body:function(){return this.Run(function(){}).get_Body();},get_ElementInternal:function(){return this["ElementInternal@"];},get_Layout:function(){return this.layoutInternal;},set_ElementInternal:function(ff){this["ElementInternal@"]=ff;return;}},{New:function(fg,fh,fi,fj){var fk;fk=$.New(this,F.New());fk.buildInternal=fg;fk.layoutInternal=fh;fk.formletBase=fi;fk.utils=fj;fk["ElementInternal@"]={$:0};return fk;}}),Layout:$.Field(function(){return H.New(I.New({Reactive:J.Default()}));}),MkFormlet:function(fl){var fm,fn,fy;fm=r.BaseFormlet();fn=function(){var fp,fq,fr,fs,ft,fv,fw;fp=fl(null);fq=fp[2];fr=fp[1];fs=fp[0];ft=function(){return fr(null);};fv=r.NewBody(fs,{$:0});fw=y.Set(fv);return $.New(A,{Body:r.RX().Return(fw),Dispose1:function(){return null;},Notify:ft,State:fq});};fy=fm.New(fn);return r.OfIFormlet(fy);},NewBody:function(fz,fA){return c.New(fz,fA);},OfIFormlet:function(fB){var fC;fC=E.New(function(){return fB.Build();},fB.get_Layout(),r.BaseFormlet(),r.UtilsProvider());return r.PropagateRenderFrom(fB,fC);},PropagateRenderFrom:function(fE,fF){fE.hasOwnProperty("Render")?void(fF.Render=fE.Render):null;return fF;},RX:$.Field(function(){return J.Default();}),UtilsProvider:function(){return{Reactive:r.RX(),DefaultLayout:r.DefaultLayout()};},Validator:$.Field(function(){return K.New(L.New());}),ValidatorProvidor:$.Class({Matches:function(fG,fH){return fH.match(new M(fG));}},{New:function(){return $.New(this,{});}})},ElementStore:$.Class({Init:function(){this.store=O.New2();return;},RegisterElement:function(fI,fJ){var fK;fK=this.store.ContainsKey(fI);return!fK?this.store.set_Item(fI,fJ):null;},Remove:function(fL){var fM,fN;if(this.store.ContainsKey(fL)){(this.store.get_Item(fL))(null);fN=this.store.Remove(fL);fM=void fN;}else{fM=null;}return fM;}},{New:function(){return $.New(this,{});},NewElementStore:function(){var fO;fO=P.New();fO.Init();return fO;}}),Enhance:{Cancel:function(fP,fQ){return s.Replace(fP,function(fR){return fQ(fR)?s.Empty():s.Return(fR);});},CustomMany:function(fS,fT){var fU,fW,fX,fZ,f1,f2,f3,f4,f5,f6,gc,gd,ge,gf,gh,gi;fU=h.ElementButton(function(){return o.add(f.Div(g.ofArray([f.Attr().Class(fS.AddIconClass)])),g.ofArray([f.Div($.New(n,{$:0}))]));});fW=s.InitWith(1,fU);fX=function(){};fZ=h.ElementButton(function(){return o.add(f.Div(g.ofArray([f.Attr().Class(fS.RemoveIconClass)])),g.ofArray([f.Div($.New(n,{$:0}))]));});f1=s.Map(fX,fZ);f2=s.WithCancelation(fT,f1);f3=r.Layout().get_Horizontal();f4=s.WithLayout(f3,f2);f5=Q.Deletable(f4);f6=function(){var f8,f_,ga,gb;f8=function(f9){return g.ofSeq(f9);};f_=Q.Many_(fW,function(){return f5;});ga=s.Map(f8,f_);gb=s.WithLayoutOrDefault(ga);return s.ApplyLayout(gb);};gc=j.New($.New(m,{$:0,$0:null}));gd=r.BaseFormlet().FromState(gc);ge=r.OfIFormlet(gd);gf=function(){return gc.Trigger($.New(m,{$:0,$0:null}));};gh=s.Do();gi=gh.Delay(function(){return gh.Bind(ge,function(){return gh.ReturnFrom(f6(null));});});return s.WithNotification(gf,gi);},Deletable:function(gl){return Q.Replace(gl,function(gm){var gn,go;if(gm.$==1){go=gm.$0;gn=s.Return({$:1,$0:go});}else{gn=s.ReturnEmpty({$:0});}return gn;});},FormButtonConfiguration:$.Class({},{get_Default:function(){return $.New(R,{Label:{$:0},Style:{$:0},Class:{$:0}});}}),FormContainerConfiguration:$.Class({},{get_Default:function(){var gp;gp={$:0};return $.New(S,{Header:{$:0},Padding:T.get_Default(),Description:gp,BackgroundColor:{$:0},BorderColor:{$:0},CssClass:{$:0},Style:{$:0}});}}),InputButton:function(gq,gr){var gs;gs=function(){var gu,gv,gw,gy,gz,gA,gB,gE,gF,gG,gH,gI,gJ,gK,gL,gM,gN,gO,gP,gQ,gR,gS,gT;gu=j.New($.New(m,{$:1,$0:$.New(n,{$:0})}));gv={contents:0};gw=x.Maybe("Submit",function(gx){return gx;},gq.Label);gz=f.Attr();gA=f.Attr();gy=o.add(f.Input(g.ofArray([gz.NewAttr("type","button")])),g.ofArray([f.Attr().Class("submitButton"),gA.NewAttr("value",gw)]));gB=function(){return function(){t.Increment(gv);return gu.Trigger($.New(m,{$:0,$0:gv.contents}));};};q.Events().OnClick(gB,gy);gE=gy;if(!gr){gH=gE["HtmlProvider@33"];gI=gE.get_Body();gG=gH.AddClass(gI,"disabledButton");}else{gG=null;}gJ=gq.Style;if(gJ.$==1){gL=gJ.$0;gM=gE["HtmlProvider@33"];gN=gE.get_Body();gK=gM.SetStyle(gN,gL);}else{gK=null;}gO=gq.Class;if(gO.$==1){gQ=gO.$0;gR=gE["HtmlProvider@33"];gS=gE.get_Body();gP=gR.AddClass(gS,gQ);}else{gP=null;}gF=gE;gT=function(){gv.contents=0;return gu.Trigger($.New(m,{$:1,$0:$.New(n,{$:0})}));};gu.Trigger($.New(m,{$:1,$0:$.New(n,{$:0})}));return[gF,gT,gu];};return r.MkFormlet(gs);},Many:function(gV){return Q.CustomMany(U.get_Default(),gV);},ManyConfiguration:$.Class({},{get_Default:function(){return $.New(U,{AddIconClass:"addIcon",RemoveIconClass:"removeIcon"});}}),Many_:function(gW,gX){var gY,g0,g2,g4,g5,g6;gY=function(gZ){return gX(gZ);};g0=function(g1){return g1;};g2=function(g3){return w.choose(g0,g3);};g4=s.Map(gY,gW);g5=s.SelectMany(g4);g6=s.FlipBody(g5);return s.Map(g2,g6);},Padding:$.Class({},{get_Default:function(){return $.New(T,{Left:{$:0},Right:{$:0},Top:{$:0},Bottom:{$:0}});}}),Replace:function(g7,g8){var g9,hd;g9=function(g_){var g$,ha,hb,hc;if(g_.$==1){ha=g_.$0;hb=s.FailWith(ha);g$=$.New(m,{$:0,$0:hb});}else{hc=g_.$0;g$=$.New(m,{$:0,$0:g8(hc)});}return g$;};hd=s.MapResult(g9,g7);return s.Switch(hd);},ValidationFrameConfiguration:$.Class({},{get_Default:function(){return $.New(V,{ValidClass:{$:1,$0:"successFormlet"},ValidStyle:{$:0},ErrorClass:{$:1,$0:"errorFormlet"},ErrorStyle:{$:0}});}}),ValidationIconConfiguration:$.Class({},{get_Default:function(){return $.New(W,{ValidIconClass:"validIcon",ErrorIconClass:"errorIcon"});}}),WithCssClass:function(he,hf){var hg;hg=function(hh){var hi,hj;hi=hh["HtmlProvider@33"];hj=hh.get_Body();hi.AddClass(hj,he);return hh;};return s.MapElement(hg,hf);},WithCustomFormContainer:function(hk,hl){var hm,hn;hm=s.ApplyLayout(hl);hn=function(ho){var hp,hq,hr,hw,hx,hy,hz,hG,hH,hI,hN,hO,hP,hR,hS,hU,hV,hX,hY,h0,h1,h3,h4,ia,ib,ic,id,ie,_if,ig,ih,ii,ij;hp=hk.Description;hq=$.New(n,{$:0});hr=function(hs){var ht,hu,hv;if(hs.$==1){hu=hs.$0;ht=g.ofArray([hu(null)]);}else{hv=hs.$0;ht=g.ofArray([f.P(g.ofArray([f.Tags().text(hv)]))]);}return ht;};hw=x.Maybe(hq,hr,hp);hx=hk.Header;hy=x.InTable(g.ofArray([g.ofArray([o.add(f.Div(g.ofArray([f.Attr().Class("headerPanel")])),hw)]),g.ofArray([ho])]));hz=function(hA){var hB,hC,hD,hE,hF;if(hA.$==1){hD=hA.$0;hC=hD(null);}else{hE=hA.$0;hC=f.H1(g.ofArray([f.Tags().text(hE)]));}hB=hC;hF=o.add(f.Div(g.ofArray([f.Attr().Class("headerPanel")])),$.New(n,{$:1,$0:hB,$1:hw}));return x.InTable(g.ofArray([g.ofArray([hF]),g.ofArray([ho])]));};hG=x.Maybe(hy,hz,hx);hH=o.add(f.TD(g.ofArray([f.Attr().Class("formlet")])),g.ofArray([hG]));hI=function(hJ){var hK,hL,hM;hK="border-color: "+hJ;hL=hH["HtmlProvider@33"];hM=hH.get_Body();return hL.SetStyle(hM,hK);};hN=hk.BorderColor;x.Maybe(null,hI,hN);hP=function(hQ){return hQ;};hR=hk.BackgroundColor;hS=function(hT){return $$.String(hT)+"px";};hU=hk.Padding.Left;hV=function(hW){return $$.String(hW)+"px";};hX=hk.Padding.Right;hY=function(hZ){return $$.String(hZ)+"px";};h0=hk.Padding.Top;h1=function(h2){return $$.String(h2)+"px";};h3=hk.Padding.Bottom;hO=g.ofArray([["background-color",x.MapOption(hP,hR)],["padding-left",x.MapOption(hS,hU)],["padding-right",x.MapOption(hV,hX)],["padding-top",x.MapOption(hY,h0)],["padding-bottom",x.MapOption(h1,h3)]]);h4=$.Tupled(function(h5){var h6,h7,h8,h9,h_,h$;h6=h5[0];h7=h5[1];if(h7.$==0){h8=null;}else{h9=h7.$0;h_=hH["HtmlProvider@33"];h$=hH.get_Body();h8=h_.SetCss(h$,h6,h9);}return h8;});w.iter(h4,hO);ia=hk.Style;if(ia.$==0){ib=null;}else{ic=ia.$0;id=hH["HtmlProvider@33"];ie=hH.get_Body();ib=id.SetStyle(ie,ic);}_if=hk.CssClass;if(_if.$==0){ig=null;}else{ih=_if.$0;ii=hH["HtmlProvider@33"];ij=hH.get_Body();ig=ii.AddClass(ij,ih);}return f.Table(g.ofArray([f.TBody(g.ofArray([f.TR(g.ofArray([hH]))]))]));};return s.MapElement(hn,hm);},WithCustomResetButton:function(ik,il){var im,_in,io,ip;im=ik.Label;if(im.$==0){io=$.New(R,{Label:{$:1,$0:"Reset"},Style:ik.Style,Class:ik.Class});}else{im.$0;io=ik;}_in=io;ip=Q.InputButton(_in,true);return Q.WithResetFormlet(il,ip);},WithCustomSubmitAndResetButtons:function(iq,ir,is){var it;it=function(iu){return function(iv){var iw,ix,iy,iz,iB,iC,iD,iF,iG,iH,iK,iN;if(iv.$==1){iy=iv.$0;iz=function(){return $.New(m,{$:1,$0:iy});};iB=Q.InputButton(iq,false);ix=s.MapResult(iz,iB);}else{iC=iv.$0;iD=function(){return iC;};iF=Q.InputButton(iq,true);ix=s.Map(iD,iF);}iw=ix;iG=s.Do();iH=iG.Delay(function(){return iG.Bind(s.LiftResult(Q.InputButton(ir,true)),function(iJ){iJ.$==0?iu(null):null;return iG.Return(null);});});iK=r.$(r.$(s.Return(function(iL){return function(){return iL;};}),iw),iH);iN=r.Layout().get_Horizontal();return s.WithLayout(iN,iK);};};return Q.WithSubmitAndReset(is,it);},WithCustomSubmitButton:function(iO,iP){var iQ,iR,iS;iQ=iO.Label;if(iQ.$==0){iS=$.New(R,{Label:{$:1,$0:"Submit"},Style:iO.Style,Class:iO.Class});}else{iQ.$0;iS=iO;}iR=iS;return Q.WithSubmitFormlet(iP,function(iT){var iU,iW,iX;iU=function(){};iW=iT.$==0?true:false;iX=Q.InputButton(iR,iW);return s.Map(iU,iX);});},WithCustomValidationFrame:function(iY,iZ){var i0;i0=function(i1){return function(i2){var i3,i4;i3=f.Div(g.ofArray([i2.Element]));i4=function(i5){var i6;i6=G.subscribeTo(i1,function(i7){var i8,i9,i_,i$,ja,jb,jc,jd,je,jf,jg,jh,ji,jj,jk,jl,jm,jn,jo,jp,jq,jr,js,jt,ju,jv,jw,jx,jy,jz,jA,jB,jC,jD,jE,jF;if(i7.$==1){i9=i7.$0;i_=iY.ValidClass;if(i_.$==1){ja=i_.$0;jb=i5["HtmlProvider@33"];jc=i5.get_Body();i$=jb.RemoveClass(jc,ja);}else{i$=null;}jd=iY.ErrorClass;if(jd.$==1){jf=jd.$0;jg=i5["HtmlProvider@33"];jh=i5.get_Body();je=jg.AddClass(jh,jf);}else{je=null;}ji=iY.ErrorStyle;if(ji.$==1){jk=ji.$0;jl=i5["HtmlProvider@33"];jm=i5.get_Body();jj=jl.SetStyle(jm,jk);}else{jn=i5["HtmlProvider@33"];jo=i5.get_Body();jj=jn.SetStyle(jo,"");}i8=jj;}else{jp=iY.ErrorClass;if(jp.$==1){jr=jp.$0;js=i5["HtmlProvider@33"];jt=i5.get_Body();jq=js.RemoveClass(jt,jr);}else{jq=null;}ju=iY.ValidClass;if(ju.$==1){jw=ju.$0;jx=i5["HtmlProvider@33"];jy=i5.get_Body();jv=jx.AddClass(jy,jw);}else{jv=null;}jz=iY.ValidStyle;if(jz.$==1){jB=jz.$0;jC=i5["HtmlProvider@33"];jD=i5.get_Body();jA=jC.SetStyle(jD,jB);}else{jE=i5["HtmlProvider@33"];jF=i5.get_Body();jA=jE.SetStyle(jF,"");}i8=jA;}return i8;});return;};o.OnAfterRender(i4,i3);return i3;};};return Q.WrapFormlet(i0,iZ);},WithCustomValidationIcon:function(jG,jH){var jI,jJ,jV,jW,jY,j2,j3;jI=s.WithLayoutOrDefault(jH);jJ=function(jK){var jL;jL=function(){var jN,jO,jP,jS,jT,jU;if(jK.$==1){jO=jK.$0;jP=function(jQ){return function(jR){return jQ+" "+jR;};};jS=w.fold(jP,"",jO);jT=f.Attr();jN=o.add(f.Div(g.ofArray([f.Attr().Class(jG.ErrorIconClass),jT.NewAttr("title",jS)])),g.ofArray([f.Div($.New(n,{$:0}))]));}else{jU=f.Attr();jN=o.add(f.Div(g.ofArray([f.Attr().Class(jG.ValidIconClass),jU.NewAttr("title","")])),g.ofArray([f.Div($.New(n,{$:0}))]));}return jN;};return s.OfElement(jL);};jV=s.Do();jW=function(jX){return m.Join(jX);};jY=jV.Delay(function(){return jV.Bind(s.LiftResult(jI),function(j0){return jV.Bind(jJ(j0),function(){return jV.Return(j0);});});});j2=s.MapResult(jW,jY);j3=r.Layout().get_Horizontal();return s.WithLayout(j3,j2);},WithErrorFormlet:function(j4,j5){var j6,j7,j9;j6=s.Do();j7=function(j8){return m.Join(j8);};j9=j6.Delay(function(){return j6.Bind(s.LiftResult(j5),function(j$){var ka,kb,kc;if(j$.$==1){kb=j$.$0;kc=s.Do();ka=kc.Delay(function(){return kc.Bind(j4(kb),function(){return kc.Return(j$);});});}else{j$.$0;ka=s.Return(j$);}return j6.ReturnFrom(ka);});});return s.MapResult(j7,j9);},WithErrorSummary:function(kf,kg){var kh,kr,ks,ku;kh=function(ki){return s.OfElement(function(){var kk,kl,km,kn,kp,kq;kl=g.ofArray([f.Text(kf)]);km=f.Tags();kn=function(ko){return f.LI(g.ofArray([f.Text(ko)]));};kp=g.map(kn,ki);kk=g.ofArray([km.NewTag("legend",kl),f.UL(kp)]);kq=f.Tags();return kq.NewTag("fieldset",kk);});};kr=s.Do();ks=function(kt){return m.Join(kt);};ku=kr.Delay(function(){return kr.Bind(s.LiftResult(kg),function(kw){var kx,ky,kz,kB;if(kw.$==1){ky=kw.$0;kz=function(){return kw;};kB=kh(ky);kx=s.Map(kz,kB);}else{kw.$0;kx=s.Return(kw);}return kr.ReturnFrom(kx);});});return s.MapResult(ks,ku);},WithFormContainer:function(kC){return Q.WithCustomFormContainer(S.get_Default(),kC);},WithJsonPost:function(kD,kE){var kF,kG,kH,kI,kJ,kK,kL,kM,kN,kO,kP,kQ,kR,kS,kT,kU,kV,kW,kX,kY,kZ,k0,k1,k2,k3,k4,k5,la,lb,le;kF=kD.PostUrl;if(kF.$==0){kH=$.New(n,{$:0});}else{kI=kF.$0;kJ=f.Attr();kH=g.ofArray([kJ.NewAttr("action",kI)]);}kG=kH;kK=kD.EncodingType;if(kK.$==0){kM=$.New(n,{$:0});}else{kN=kK.$0;kO=f.Attr();kM=g.ofArray([kO.NewAttr("enctype",kN)]);}kL=kM;kP=f.Tags();kR=f.Attr();kS=f.Attr();kT=kD.ParameterName;kQ=g.ofArray([kR.NewAttr("type","hidden"),kS.NewAttr("name",kT)]);kU=kP.NewTag("input",kQ);kV=f.Tags();kX=f.Attr();kY=f.Attr();kW=g.ofArray([kX.NewAttr("type","submit"),kY.NewAttr("value","Submit")]);kZ=kV.NewTag("input",kW);k1=f.Attr();k2=f.Attr();k0=$.New(n,{$:1,$0:k1.NewAttr("method","POST"),$1:$.New(n,{$:1,$0:k2.NewAttr("style","display:none"),$1:kG})});k3=g.append(k0,kL);k4=o.add(f.Form(k3),g.ofArray([kU,kZ]));k5=function(k6){var k7,k8,k9,k_,k$;k7=kD.EncodingType;if(k7.$==0){k8=null;}else{k9=k7.$0;if(k9==="multipart/form-data"){k$=p(k6.get_Body()).attr("encoding","multipart/form-data");k_=void k$;}else{k_=null;}k8=k_;}return k8;};o.OnAfterRender(k5,k4);la=k4;lb=function(lc){var ld;ld=X.stringify(lc);p(kU.get_Body()).val(ld);return p(kZ.get_Body()).click();};le=s.Map(lb,kE);return f.Div(g.ofArray([la,le]));},WithLabel:function(lf,lg){return s.WithLabel({$:1,$0:lf},lg);},WithLabelAbove:function(lh){var li;li=function(lj){var lk,ll,lm,ln,lo,lp;lk=lj.Label;if(lk.$==0){lm=f.Span($.New(n,{$:0}));}else{ln=lk.$0;lm=ln(null);}ll=lm;lo=f.Table(g.ofArray([f.TBody(g.ofArray([f.TR(g.ofArray([f.TD(g.ofArray([ll]))])),f.TR(g.ofArray([f.TD(g.ofArray([lj.Element]))]))]))]));lp={$:0};return $.New(c,{Element:lo,Label:lp});};return s.MapBody(li,lh);},WithLabelAndInfo:function(lq,lr,ls){var lt;lt=function(){var lv,lw,lx;lv=g.ofArray([f.Text(lq)]);lw=f.Tags();lx=f.Attr();return x.InTable(g.ofArray([g.ofArray([lw.NewTag("label",lv),f.Span(g.ofArray([lx.NewAttr("title",lr),f.Attr().Class("infoIcon")]))])]));};return Q.WithLabel(lt,ls);},WithLabelConfiguration:function(ly,lz){var lA,lB;lA=s.ApplyLayout(lz);lB=r.Layout().LabelLayout(ly);return s.WithLayout(lB,lA);},WithLabelLeft:function(lC){var lD;lD=function(lE){var lF,lG,lH,lI,lJ,lK;lF=lE.Label;if(lF.$==0){lH=f.Span($.New(n,{$:0}));}else{lI=lF.$0;lH=lI(null);}lG=lH;lJ=f.Table(g.ofArray([f.TBody(g.ofArray([f.TR(g.ofArray([f.TD(g.ofArray([lE.Element])),f.TD(g.ofArray([lG]))]))]))]));lK={$:0};return $.New(c,{Element:lJ,Label:lK});};return s.MapBody(lD,lC);},WithLegend:function(lL,lM){var lN;lN=function(lO){var lP,lQ,lR,lS,lT,lU,lV,lW;lQ=g.ofArray([f.Tags().text(lL)]);lR=f.Tags();lS=lO.Label;if(lS.$==0){lT=lO.Element;}else{lU=lS.$0;lT=x.InTable(g.ofArray([g.ofArray([lU(null),lO.Element])]));}lP=g.ofArray([lR.NewTag("legend",lQ),lT]);lV=f.Tags();lW=lV.NewTag("fieldset",lP);return $.New(c,{Element:lW,Label:{$:0}});};return s.MapBody(lN,lM);},WithResetAction:function(lX,lY){var lZ,l4,l5,l6,l7;lZ=function(){var l1,l2;l1=lY.Build();l2=function(l3){return lX(null)?l1.Notify.call(null,l3):null;};return $.New(A,{Body:l1.Body,Dispose1:l1.Dispose1,Notify:l2,State:l1.State});};l4=s.New(lZ);l5=lY.get_Layout();l6=s.WithLayout(l5,l4);l7=r.PropagateRenderFrom(lY,l6);return r.OfIFormlet(l7);},WithResetButton:function(l8){return Q.WithCustomResetButton(R.get_Default(),l8);},WithResetFormlet:function(l9,l_){var l$,ma,mb,mc,md,me,mf,mg,mi,mo,mp;l$=s.WithLayoutOrDefault(l9);ma=s.ApplyLayout(l$);mb=s.InitWithFailure(ma);mc=s.LiftResult(mb);md=s.WithNotificationChannel(mc);me=s.LiftResult(l_);mf=s.Do();mg=function(mh){return m.Join(mh);};mi=mf.Delay(function(){return mf.Bind(md,$.Tupled(function(mk){var ml,mm;ml=mk[0];mm=mk[1];return mf.Bind(me,function(mn){mn.$==0?mm(null):null;return mf.Return(ml);});}));});mo=s.MapResult(mg,mi);mp=r.PropagateRenderFrom(md,mo);return r.OfIFormlet(mp);},WithRowConfiguration:function(mq,mr){var ms,mt;ms=s.ApplyLayout(mr);mt=r.Layout().RowLayout(mq);return s.WithLayout(mt,ms);},WithSubmitAndReset:function(mu,mv){var mw,mx,mF;mw=s.Do();mx=mw.Delay(function(){var mz,mA;mz=s.InitWithFailure(mu);mA=s.LiftResult(mz);return mw.Bind(s.WithNotificationChannel(mA),$.Tupled(function(mB){var mC,mD;mC=mB[0];mD=mB[1];return mw.ReturnFrom((mv(function(mE){return mD(mE);}))(mC));}));});mF=r.PropagateRenderFrom(mu,mx);return r.OfIFormlet(mF);},WithSubmitAndResetButtons:function(mG){var mH,mI,mJ,mK;mH=R.get_Default();mI=$.New(R,{Label:{$:1,$0:"Submit"},Style:mH.Style,Class:mH.Class});mJ=R.get_Default();mK=$.New(R,{Label:{$:1,$0:"Reset"},Style:mJ.Style,Class:mJ.Class});return Q.WithCustomSubmitAndResetButtons(mI,mK,mG);},WithSubmitButton:function(mL){return Q.WithCustomSubmitButton(R.get_Default(),mL);},WithSubmitFormlet:function(mM,mN){var mO,mP,mR,mW,mX;mO=s.Do();mP=function(mQ){return m.Join(mQ);};mR=mO.Delay(function(){var mT;mT=s.InitWithFailure(mM);return mO.Bind(s.LiftResult(mT),function(mU){return mO.Bind(mN(mU),function(){return mO.Return(mU);});});});mW=s.MapResult(mP,mR);mX=r.PropagateRenderFrom(mM,mW);return r.OfIFormlet(mX);},WithTextLabel:function(mY,mZ){return Q.WithLabel(function(){var m1,m2;m1=g.ofArray([f.Text(mY)]);m2=f.Tags();return m2.NewTag("label",m1);},mZ);},WithValidationFrame:function(m3){return Q.WithCustomValidationFrame(V.get_Default(),m3);},WithValidationIcon:function(m4){return Q.WithCustomValidationIcon(W.get_Default(),m4);},WrapFormlet:function(m5,m6){var m7;m7=function(){var m9,m_,m$,na,nb;m9=s.WithLayoutOrDefault(m6);m_=s.BuildForm(m9);m$=m9.get_Layout().Apply.call(null,m_.Body).$0;m$[1];na=m$[0];nb=(m5(m_.State))(na);return[nb,function(){return m_.Notify.call(null,null);},m_.State];};return r.MkFormlet(m7);}},Formlet:{ApplyLayout:function(nd){var ne,nf;ne=r.BaseFormlet().ApplyLayout(nd);nf=r.PropagateRenderFrom(nd,ne);return r.OfIFormlet(nf);},Bind:function(ng,nh){var ni,nj,nm,nn;ni=r.BaseFormlet();nj=function(nk){var nl;nl=nh(nk);return nl;};nm=ni.Bind(ng,nj);nn=r.PropagateRenderFrom(ng,nm);return r.OfIFormlet(nn);},BindWith:function(no,np,nq){var nr,ns,nu,nv;nr=r.BaseFormlet();ns=function(nt){return nq(nt);};nu=nr.BindWith(no,np,ns);nv=r.PropagateRenderFrom(np,nu);return r.OfIFormlet(nv);},BuildForm:function(nw){return r.BaseFormlet().BuildForm(nw);},BuildFormlet:function(nx){return r.MkFormlet(nx);},Choose:function(ny){var nz,nA,nG,nH,nI,nX,nY,n0,n1;nz={contents:0};nA=function(nB){var nC,nE,nF;nC=function(nD){t.Increment(nz);return[nD,nz.contents];};nE=s.Map(nC,nB);nF=s.InitWithFailure(nE);return s.LiftResult(nF);};nG=w.map(nA,ny);nH=s.Sequence(nG);nI=function(nJ){var nK,nO,nP,nS,nT,nU;nK=function(nL){var nM,nN;if(nL.$==0){nN=nL.$0;nM={$:1,$0:nN};}else{nM={$:0};}return nM;};nO=g.choose(nK,nJ);nP=$.Tupled(function(nQ){var nR;nQ[0];nR=nQ[1];return nR;});nS=g.sortBy(nP,nO);nT=g.rev(nS);nU=$.Tupled(function(nV){var nW;nW=nV[0];nV[1];return{$:1,$0:nW};});return w.tryPick(nU,nT);};nX=s.Map(nI,nH);nY=function(nZ){return nZ.$==1;};n0=r.Validator().Is(nY,"",nX);n1=function(n2){return n2.$0;};return s.Map(n1,n0);},Delay:function(n3){var n4;n4=r.BaseFormlet().Delay(function(){return n3(null);});return r.OfIFormlet(n4);},Deletable:function(n6){var n7,n8;n7=r.BaseFormlet().Deletable(n6);n8=r.PropagateRenderFrom(n6,n7);return r.OfIFormlet(n8);},Do:$.Field(function(){return Y.New();}),Empty:function(){var n9;n9=r.BaseFormlet().Empty();return r.OfIFormlet(n9);},FailWith:function(n_){var n$;n$=r.BaseFormlet().FailWith(n_);return r.OfIFormlet(n$);},FlipBody:function(oa){var ob,oc;ob=r.BaseFormlet().FlipBody(oa);oc=r.PropagateRenderFrom(oa,ob);return r.OfIFormlet(oc);},Flowlet:function(od){var oe,of,og,oh;oe=r.BaseFormlet();of=r.Layout().get_Flowlet();og=oe.WithLayout(of,od);oh=r.PropagateRenderFrom(od,og);return r.OfIFormlet(oh);},Horizontal:function(oi){var oj,ok,ol,om;oj=r.BaseFormlet();ok=r.Layout().get_Horizontal();ol=oj.WithLayout(ok,oi);om=r.PropagateRenderFrom(oi,ol);return r.OfIFormlet(om);},InitWith:function(on,oo){var op,oq,or;op=r.BaseFormlet();oq=op.InitWith(on,oo);or=r.PropagateRenderFrom(oo,oq);return r.OfIFormlet(or);},InitWithFailure:function(os){var ot,ou;ot=r.BaseFormlet().InitWithFailure(os);ou=r.PropagateRenderFrom(os,ot);return r.OfIFormlet(ou);},Join:function(ov){var ow,oy,oz,oA,oB;ow=function(ox){return ox;};oy=s.Map(ow,ov);oz=r.BaseFormlet();oA=oz.Join(oy);oB=r.PropagateRenderFrom(ov,oA);return r.OfIFormlet(oB);},LiftResult:function(oC){var oD,oE;oD=r.BaseFormlet().LiftResult(oC);oE=r.PropagateRenderFrom(oC,oD);return r.OfIFormlet(oE);},Map:function(oF,oG){var oH,oI,oJ;oH=r.BaseFormlet();oI=oH.Map(oF,oG);oJ=r.PropagateRenderFrom(oG,oI);return r.OfIFormlet(oJ);},MapBody:function(oK,oL){var oM,oN,oO;oM=r.BaseFormlet();oN=oM.MapBody(oK,oL);oO=r.PropagateRenderFrom(oL,oN);return r.OfIFormlet(oO);},MapElement:function(oP,oQ){var oR,oS,oU,oV;oR=r.BaseFormlet();oS=function(oT){return $.New(c,{Element:oP(oT.Element),Label:oT.Label});};oU=oR.MapBody(oS,oQ);oV=r.PropagateRenderFrom(oQ,oU);return r.OfIFormlet(oV);},MapResult:function(oW,oX){var oY,oZ,o0;oY=r.BaseFormlet();oZ=oY.MapResult(oW,oX);o0=r.PropagateRenderFrom(oX,oZ);return r.OfIFormlet(o0);},Never:function(){var o1;o1=r.BaseFormlet().Never();return r.OfIFormlet(o1);},New:function(o2){var o3;o3=r.BaseFormlet().New(o2);return r.OfIFormlet(o3);},OfElement:function(o4){var o5;o5=function(){var o7;o7=o4(null);return[o7,function(){},r.RX().Return($.New(m,{$:0,$0:null}))];};return r.MkFormlet(o5);},Render:function(o9){var o_;o_=o9.Run(function(){});return r.PropagateRenderFrom(o9,o_);},Replace:function(pa,pb){var pc,pd,pf,pg;pc=r.BaseFormlet();pd=function(pe){return pb(pe);};pf=pc.Replace(pa,pd);pg=r.PropagateRenderFrom(pa,pf);return r.OfIFormlet(pg);},ReplaceFirstWithFailure:function(ph){var pi,pj;pi=r.BaseFormlet().ReplaceFirstWithFailure(ph);pj=r.PropagateRenderFrom(ph,pi);return r.OfIFormlet(pj);},Return:function(pk){var pl;pl=r.BaseFormlet().Return(pk);return r.OfIFormlet(pl);},ReturnEmpty:function(pm){var pn;pn=r.BaseFormlet().ReturnEmpty(pm);return r.OfIFormlet(pn);},Run:function(po,pp){return pp.Run(po);},SelectMany:function(pq){var pr,pt,pu,pv,pw;pr=function(ps){return ps;};pt=s.Map(pr,pq);pu=r.BaseFormlet();pv=pu.SelectMany(pt);pw=r.PropagateRenderFrom(pq,pv);return r.OfIFormlet(pw);},Sequence:function(px){var py,pA,pB,pC;py=function(pz){return pz;};pA=w.map(py,px);pB=r.BaseFormlet();pC=pB.Sequence(pA);return r.OfIFormlet(pC);},Switch:function(pD){var pE,pG,pH,pI,pJ;pE=function(pF){return pF;};pG=s.Map(pE,pD);pH=r.BaseFormlet();pI=pH.Switch(pG);pJ=r.PropagateRenderFrom(pD,pI);return r.OfIFormlet(pJ);},Vertical:function(pK){var pL,pM,pN,pO;pL=r.BaseFormlet();pM=r.Layout().get_Vertical();pN=pL.WithLayout(pM,pK);pO=r.PropagateRenderFrom(pK,pN);return r.OfIFormlet(pO);},WithCancelation:function(pP,pQ){var pR,pS,pT;pR=r.BaseFormlet();pS=pR.WithCancelation(pP,pQ);pT=r.PropagateRenderFrom(pP,pS);return r.OfIFormlet(pT);},WithLabel:function(pU,pV){var pW,pX,pZ,p0;pW=r.BaseFormlet();pX=function(pY){return $.New(c,{Element:pY.Element,Label:pU});};pZ=pW.MapBody(pX,pV);p0=r.PropagateRenderFrom(pV,pZ);return r.OfIFormlet(p0);},WithLayout:function(p1,p2){var p3,p4,p5;p3=r.BaseFormlet();p4=p3.WithLayout(p1,p2);p5=r.PropagateRenderFrom(p2,p4);return r.OfIFormlet(p5);},WithLayoutOrDefault:function(p6){var p7,p8;p7=r.BaseFormlet().WithLayoutOrDefault(p6);p8=r.PropagateRenderFrom(p6,p7);return r.OfIFormlet(p8);},WithNotification:function(p9,p_){var p$,qa,qb;p$=r.BaseFormlet();qa=p$.WithNotification(p9,p_);qb=r.PropagateRenderFrom(p_,qa);return r.OfIFormlet(qb);},WithNotificationChannel:function(qc){var qd,qe;qd=r.BaseFormlet().WithNotificationChannel(qc);qe=r.PropagateRenderFrom(qc,qd);return r.OfIFormlet(qe);}},FormletBuilder:$.Class({Bind:function(qf,qg){var qh,qi,ql,qm;qh=r.BaseFormlet();qi=function(qj){var qk;qk=qg(qj);return qk;};ql=qh.Bind(qf,qi);qm=r.PropagateRenderFrom(qf,ql);return r.OfIFormlet(qm);},Delay:function(qn){var qo;qo=r.BaseFormlet().Delay(function(qp){return qn(qp);});return r.OfIFormlet(qo);},Return:function(qq){var qr;qr=r.BaseFormlet().Return(qq);return r.OfIFormlet(qr);},ReturnFrom:function(qs){return r.OfIFormlet(qs);}},{New:function(){return $.New(this,{});}}),Layout:{FormRowConfiguration:$.Class({},{get_Default:function(){return $.New(_0,{Padding:{$:0},Color:{$:0},Class:{$:0},Style:{$:0},LabelConfiguration:{$:0}});}}),LabelConfiguration:$.Class({},{get_Default:function(){return $.New(_1,{Align:{$:0},VerticalAlign:{$:1},Placement:{$:0}});}}),Padding:$.Class({},{get_Default:function(){return $.New(_2,{Left:{$:0},Right:{$:0},Top:{$:0},Bottom:{$:0}});}})},LayoutProvider:$.Class({ColumnLayout:function(qt){var qu,qv,qF=this;qu=this.LayoutUtils;qv=function(){var qx,qy,qz,qA,qM;qx=f.TR($.New(n,{$:0}));qy=f.Table(g.ofArray([f.TBody(g.ofArray([qx]))]));qz=P.NewElementStore();qA=function(qB){return function(qC){var qD,qE,qG,qH,qI;qD=qC.Element.get_Id();qE=f.TD(g.ofArray([f.Table(g.ofArray([f.TBody(g.ofArray([qF.MakeRow(qt,qB,qC)]))]))]));qG=p(qx.get_Body());qH={contents:0};qI={contents:false};qG.children().each(function(){var qJ,qK;qJ=p(this);if(qB===qH.contents){p(qE.get_Body()).insertBefore(qJ);qE.Render();qK=void(qI.contents=true);}else{qK=null;}return t.Increment(qH);});!qI.contents?qx.AppendI(qE):null;return qz.RegisterElement(qD,function(){return qE["HtmlProvider@33"].Remove(qE.get_Body());});};};qM=function(qN){var qO,qP;qO=_3.Get(qN);while(qO.MoveNext()){qP=qO.get_Current();qz.Remove(qP.Element.get_Id());}return;};return{Body:$.New(c,{Element:qy,Label:{$:0}}),SyncRoot:null,Insert:qA,Remove:qM};};return qu.New(qv);},HorizontalAlignElem:function(qQ,qR){var qS,qT,qU;qS=qQ.$==0?"left":"right";qT=f.Attr();qU="float:"+qS+";";return o.add(f.Div(g.ofArray([qT.NewAttr("style",qU)])),g.ofArray([qR]));},LabelLayout:function(qV){var qW,qX;qW=_0.get_Default();qX={$:1,$0:qV};return this.RowLayout($.New(_0,{Padding:qW.Padding,Color:qW.Color,Class:qW.Class,Style:qW.Style,LabelConfiguration:qX}));},MakeLayout:function(qY){var qZ,q0;qZ=this.LayoutUtils;q0=function(){var q2,q3,q4,ra;q2=qY(null);q3=P.NewElementStore();q4=function(q5){return function(q6){var q7,q8;q7=q6.Element.get_Id();q8=(q2.Insert.call(null,q5))(q6);return q3.RegisterElement(q7,function(){var q_,q$;q_=_3.Get(q8);while(q_.MoveNext()){q$=q_.get_Current();q$["HtmlProvider@33"].Remove(q$.get_Body());}return;});};};ra=function(rb){var rc,rd;rc=_3.Get(rb);while(rc.MoveNext()){rd=rc.get_Current();q3.Remove(rd.Element.get_Id());}return;};return{Body:$.New(c,{Element:q2.Panel,Label:{$:0}}),SyncRoot:null,Insert:q4,Remove:ra};};return qZ.New(q0);},MakeRow:function(re,rf,rg){var rh,ri,rj,rl,rm,ro,rp,rq,rs,rt,ru,rw,rx,ry,rA,rB,rC,r7,r8,r9,r_,r$,sa,sb,sc,se,sf,sg,sh,si,sj,sk,sl,sm,sn,so,sr,ss,st,su,sx,sy,sz,sA,sC,sD,sE,sF,sG,sJ,sK,sL,sM;rh=re.Padding;ri=_2.get_Default();rj=function(rk){return rk;};rl=x.Maybe(ri,rj,rh);rm=function(rn){return rn;};ro=rl.Left;rp=x.Maybe(0,rm,ro);rq=function(rr){return rr;};rs=rl.Top;rt=x.Maybe(0,rq,rs);ru=function(rv){return rv;};rw=rl.Right;rx=x.Maybe(0,ru,rw);ry=function(rz){return rz;};rA=rl.Bottom;rB=x.Maybe(0,ry,rA);rC=function(rD){return function(rE){return function(rF){return function(rG){return function(rH){return function(rI){return function(rJ){var rK,rL,rP,rS,rT,rU,rX,rY,rZ,r0,r1,r2,r3,r4,r5,r6;rK=g.ofArray([["padding-left: ",rD],["padding-top: ",rE],["padding-right: ",rF],["padding-bottom: ",rG]]);rL=$.Tupled(function(rM){var rN,rO;rN=rM[0];rO=rM[1];return rN+$$.String(rO)+"px;";});rP=function(rQ){return function(rR){return rQ+rR;};};rS=g.map(rL,rK);rT=w.reduce(rP,rS);rU=function(rV){var rW;rW=rV.$==1?"middle":rV.$==2?"bottom":"top";return"vertical-align: "+rW+";";};rX=x.Maybe("",rU,rI);rY=f.Attr();rZ=rT+";"+rX;r0=rY.NewAttr("style",rZ);if(rH){r3=f.Attr();r2=g.ofArray([r3.NewAttr("colspan","2")]);}else{r2=$.New(n,{$:0});}r1=r2;r4=$.New(n,{$:1,$0:r0,$1:r1});r5=g.ofArray([rJ]);r6=g.append(r4,r5);return f.TD(r6);};};};};};};};r7=rg.Element;r8=rg.Label;if(r8.$==1){r$=r8.$0;sa=re.LabelConfiguration;sb=_1.get_Default();sc=function(sd){return sd;};se=x.Maybe(sb,sc,sa);sf=se.Align;sg=r$(null);sh=this.HorizontalAlignElem(sf,sg);si=se.Placement;if(si.$==3){sk=x.InTable(g.ofArray([g.ofArray([r7]),g.ofArray([sh])]));sj=g.ofArray([((((((rC(rp))(rt))(rx))(rB))(true))({$:0}))(sk)]);}else{if(si.$==0){sj=g.ofArray([((((((rC(rp))(rt))(0))(rB))(false))({$:1,$0:se.VerticalAlign}))(sh),((((((rC(0))(rt))(rx))(rB))(false))({$:0}))(r7)]);}else{if(si.$==1){sj=g.ofArray([((((((rC(rp))(rt))(0))(rB))(false))({$:1,$0:se.VerticalAlign}))(r7),((((((rC(0))(rt))(rx))(rB))(false))({$:0}))(sh)]);}else{sl=x.InTable(g.ofArray([g.ofArray([sh]),g.ofArray([r7])]));sj=g.ofArray([((((((rC(rp))(rt))(rx))(rB))(true))({$:0}))(sl)]);}}}r_=sj;}else{r_=g.ofArray([((((((rC(rp))(rt))(rx))(rB))(true))({$:0}))(r7)]);}r9=r_;sm=re.Class;sn=$.New(n,{$:0});so=function(sp){var sq;sq=sp(rf);return g.ofArray([f.Attr().Class(sq)]);};sr=x.Maybe(sn,so,sm);ss=re.Color;st=$.New(n,{$:0});su=function(sv){var sw;sw=sv(rf);return g.ofArray(["background-color: "+sw]);};sx=x.Maybe(st,su,ss);sy=re.Style;sz=$.New(n,{$:0});sA=function(sB){return g.ofArray([sB(rf)]);};sC=x.Maybe(sz,sA,sy);sD=g.append(sx,sC);if(sD.$==0){sF=$.New(n,{$:0});}else{sG=w.reduce(function(sH){return function(sI){return sH+";"+sI;};},sD);sJ=f.Attr();sF=g.ofArray([sJ.NewAttr("style",sG)]);}sE=sF;sK=g.append(sE,r9);sL=g.append(sE,sK);sM=g.append(sr,sL);return f.TR(sM);},RowLayout:function(sN){var sO,sP,sZ=this;sO=this.LayoutUtils;sP=function(){var sR,sS,sT,sU,s6;sR=f.TBody($.New(n,{$:0}));sS=f.Table(g.ofArray([sR]));sT=P.NewElementStore();sU=function(sV){return function(sW){var sX,sY,s0,s1,s2;sX=sW.Element.get_Id();sY=sZ.MakeRow(sN,sV,sW);s0=p(sR.get_Body());s1={contents:0};s2={contents:false};s0.children().each(function(){var s3,s4;s3=p(this);if(sV===s1.contents){p(sY.get_Body()).insertBefore(s3);sY.Render();s4=void(s2.contents=true);}else{s4=null;}return t.Increment(s1);});!s2.contents?sR.AppendI(sY):null;return sT.RegisterElement(sX,function(){return sY["HtmlProvider@33"].Remove(sY.get_Body());});};};s6=function(s7){var s8,s9;s8=_3.Get(s7);while(s8.MoveNext()){s9=s8.get_Current();sT.Remove(s9.Element.get_Id());}return;};return{Body:$.New(c,{Element:sS,Label:{$:0}}),SyncRoot:null,Insert:sU,Remove:s6};};return sO.New(sP);},VerticalAlignedTD:function(s_,s$){var ta,tb,tc,td;ta=s_.$==1?"middle":s_.$==2?"bottom":"top";tb=f.TD(g.ofArray([s$]));tc=tb["HtmlProvider@33"];td=tb.get_Body();tc.SetCss(td,"vertical-align",ta);return tb;},get_Flowlet:function(){var te;te=function(){var tg,th;tg=f.Div($.New(n,{$:0}));th=function(){return function(tj){var tk,tl;tk=tj.Label.$==1?tj.Label.$0.call(null,null):f.Span($.New(n,{$:0}));tl=x.InTable(g.ofArray([g.ofArray([tk,f.Div(g.ofArray([tj.Element]))])]));tg["HtmlProvider@33"].Clear(tg.get_Body());tg.AppendI(tl);return g.ofArray([tl]);};};return{Insert:th,Panel:tg};};return this.MakeLayout(te);},get_Horizontal:function(){return this.ColumnLayout(_0.get_Default());},get_Vertical:function(){return this.RowLayout(_0.get_Default());}},{New:function(tm){var tn;tn=$.New(this,{});tn.LayoutUtils=tm;return tn;}}),Utils:{InTable:function(to){var tp,tu,tv;tp=function(tq){var tr,tt;tr=function(ts){return f.TD(g.ofArray([ts]));};tt=g.map(tr,tq);return f.TR(tt);};tu=g.map(tp,to);tv=f.TBody(tu);return f.Table(g.ofArray([tv]));},MapOption:function(tw,tx){var ty,tz;if(tx.$==1){tz=tx.$0;ty={$:1,$0:tw(tz)};}else{ty={$:0};}return ty;},Maybe:function(tA,tB,tC){var tD,tE;if(tC.$==0){tD=tA;}else{tE=tC.$0;tD=tB(tE);}return tD;}}}}}});$.OnInit(function(){a=$.Safe($$.IntelliFactory.WebSharper);b=$.Safe(a.Formlets);c=$.Safe(b.Body);d=$.Safe(a.Html);e=$.Safe(d.Client);f=$.Safe(e.Default);g=$.Safe(a.List);h=$.Safe(b.Controls);i=$.Safe($$.IntelliFactory.Reactive);j=$.Safe(i.HotStream);k=$.Safe($$.IntelliFactory.Formlets);l=$.Safe(k.Base);m=$.Safe(l.Result);n=$.Safe(g.T);o=$.Safe(e.Operators);p=$.Safe($$.jQuery);q=$.Safe(e.EventsPervasives);r=$.Safe(b.Data);s=$.Safe(b.Formlet);t=$.Safe(a.Operators);u=$.Safe(b.CssConstants);v=$.Safe($$.Math);w=$.Safe(a.Seq);x=$.Safe(b.Utils);y=$.Safe(l.Tree);z=$.Safe(y.Edit);A=$.Safe(l.Form);B=$.Safe(a.Arrays);C=$.Safe(a.IntrinsicFunctionProxy);D=$.Safe(l.FormletProvider);E=$.Safe(r.Formlet);F=$.Safe(e.Pagelet);G=$.Safe(a.Util);H=$.Safe(b.LayoutProvider);I=$.Safe(l.LayoutUtils);J=$.Safe(i.Reactive);K=$.Safe(l.Validator);L=$.Safe(r.ValidatorProvidor);M=$.Safe($$.RegExp);N=$.Safe(a.Collections);O=$.Safe(N.Dictionary);P=$.Safe(b.ElementStore);Q=$.Safe(b.Enhance);R=$.Safe(Q.FormButtonConfiguration);S=$.Safe(Q.FormContainerConfiguration);T=$.Safe(Q.Padding);U=$.Safe(Q.ManyConfiguration);V=$.Safe(Q.ValidationFrameConfiguration);W=$.Safe(Q.ValidationIconConfiguration);X=$.Safe($$.JSON);Y=$.Safe(b.FormletBuilder);Z=$.Safe(b.Layout);_0=$.Safe(Z.FormRowConfiguration);_1=$.Safe(Z.LabelConfiguration);_2=$.Safe(Z.Padding);return _3=$.Safe(a.Enumerator);});$.OnLoad(function(){$.Inherit(E,F);s.Do();r.Validator();r.RX();r.Layout();r.DefaultLayout();u.InputTextClass();return;});}());

(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w;$.Define($$,{Site:{ChartControl:{Main:function(x){var y,z,A,B,C,D;y={};y.text="Monthly Average Temperature";y.x=-20;z={};z.text="Source: WorldClimate.com";z.x=-20;A={};A.categories=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];B={};B.title={text:"Temperature (C)"};B.plotLines=[{value:0,width:1,color:"#808080"}];C={};C.valueSuffix="C";D={};D.layout="vertical";D.align="right";D.verticalAlign="middle";D.borderWidth=0;a(x).highcharts({title:y,subtitle:z,xAxis:A,yAxis:B,tooltip:C,legend:D,series:[{name:"Tokyo",data:[7,6.9,9.5,14.5,18.2,21.5,25.2,26.5,23.3,18.3,13.9,9.6]},{name:"New York",data:[-0.2,0.8,5.7,11.3,17,22,24.8,24.1,20.1,14.1,8.6,2.5]},{name:"Berlin",data:[-0.9,0.6,3.5,8.4,13.5,17,18.6,17.9,14.3,9,3.9,1]},{name:"London",data:[3.9,4.2,5.7,8.5,11.9,15.2,17,16.6,14.2,10.3,6.6,4.8]}]});},Sample:$.Field(function(){return c.Build().Id("Highcharts").FileName("Highchart.fs").Keywords(e.ofArray(["highcharts","charts"])).Render(function(E){return f.Main(E);}).Create();})},Client:{All:$.Field(function(){var F;F=function(G){return g.Singleton(G);};return g.Create(e.ofArray([F(h.Sample()),F(f.Sample()),F(i.Sample())]));}),Main:$.Field(function(){i.Main(l.Div($.New(m,{$:0})).Dom);return n.All().Show();})},MapControl:{Main:function(H){var I,J,K,L,M,O;I={};I.spacingBottom=20;J={};J.text="Europe time zones";K={};K.enabled=true;L={};M={};M.enabled=true;M.color="white";M.formatter=function(){var N;N=this.point.properties;return N?5>N.labelrank?N["iso-a2"]:null:null;};M.format=null;M.style={fontWeight:"bold"};O={};O.headerFormat="";O.pointFormat="{point.name}: <b>{series.name}</b>";L.map={allAreas:false,joinBy:["iso-a2","code"],dataLabels:M,tooltip:O};a(H).highcharts("Map",{chart:I,title:J,legend:K,plotOptions:L,series:[{name:"UTC",mapData:h.map(),data:o.map(function(P){return{code:P};},["IE","IS","GB","PT"])},{name:"UTC +1",mapData:h.map(),data:o.map(function(Q){return{code:Q};},["NO","SE","DK","DE","NL","BE","LU","ES","FR","PL","CZ","AT","CH","LI","SK","HU","SI","IT","SM","HR","BA","YF","ME","AL","MK"])},{name:"UTC +2",mapData:h.map(),data:o.map(function(R){return{code:R};},["FI","EE","LV","LT","BY","UA","MD","RO","BG","GR","TR","CY"])},{name:"UTC +3",mapData:h.map(),data:o.map(function(S){return{code:S};},["RU"])}]});},Sample:$.Field(function(){return c.Build().Id("Highmaps").FileName("Highmap.fs").Keywords(e.ofArray(["highmaps","charts"])).Render(function(T){return h.Main(T);}).Create();}),map:$.Field(function(){return $$.Highcharts.maps["custom/europe"];})},Samples:{Build:function(){var U;U={$:0};return $.New(p,{BFileName:{$:0},BId:U,BKeywords:$.New(m,{$:0}),BRender:{$:0},BTitle:{$:0}});},Builder:$.Class({Create:function(){var V,W;V=c.req("Id",c.op_PlusPlus(this.BId,this.BTitle));W=q.DefaultArg(c.op_PlusPlus(this.BTitle,this.BId),"Sample");return $.New(r,{FileName:c.req("FileName",this.BFileName),Id:V,Keywords:this.BKeywords,Render:c.req("Render",this.BRender),Title:W});},FileName:function(X){this.BFileName={$:1,$0:X};return this;},Id:function(Y){this.BId={$:1,$0:Y};return this;},Keywords:function(Z){this.BKeywords=Z;return this;},Render:function(_0){this.BRender={$:1,$0:_0};return this;},Title:function(_1){this.BTitle={$:1,$0:_1};return this;}}),Clear:function(_2){while(_2.hasChildNodes()){_2.removeChild(_2.firstChild);}return;},Sample:$.Class({Show:function(){var _3,_4,_5,_6,_9=this;_3=s.getElementById("sample-main");_4=s.getElementById("sample-side");c.Clear(_3);c.Clear(_4);this.Render.call(null,_3);_5="http://github.com/intellifactory/websharper.highcharts/blob/master/Site/"+this.FileName;_6=l.Div($.New(m,{$:0}));t.OnAfterRender(function(_7){var _8,_;_8=s.getElementById(_9.Id);if(u.Equals(_8,null)){return null;}else{_=_8.cloneNode(true);_.attributes.removeNamedItem("id");return _7.AppendN(_);}},_6);return l.Div(e.ofArray([_6,t.add(l.A(e.ofArray([l.Attr().Class("btn btn-primary btn-lg"),l.HRef(_5)])),e.ofArray([l.Text("Source")]))])).AppendTo("sample-side");}}),Set:$.Class({Show:function(){var bc=this;return a(function(){var bb,bd,bg;bb=bc.$0;bd=function(be,bf){a("#sample-navs ul").children("li").removeClass("active");a(bf).addClass("active");return be.Show();};bg=t.add(l.UL(e.ofArray([l.Attr().Class("nav nav-pills")])),e.mapi(function(bh){return function(bi){var bj,bk,bm;bj=l.LI(e.ofArray([t.add(l.A(e.ofArray([l.HRef("#")])),e.ofArray([l.Text(bi.Title)]))]));t.OnAfterRender(function(bl){return bh===0?bd(bi,bl.Dom):null;},bj);bk=bj;bm=function(bn){return function(){return bd(bi,bn.Dom);};};v.Events().OnClick(bm,bk);return bk;};},bb));return bg.AppendTo("sample-navs");});}},{Create:function(bo){return $.New(g,{$:0,$0:w.toList(w.delay(function(){return w.collect(function(bq){return bq.$0;},bo);}))});},Singleton:function(br){return $.New(g,{$:0,$0:e.ofArray([br])});}}),op_PlusPlus:function(bs,bt){return bs.$==0?bt:bs;},req:function(bu,bv){return bv.$==1?bv.$0:q.FailWith("Required property not set: "+bu);}},StockControl:{Main:function(bw){a.getJSON("http://www.highcharts.com/samples/data/jsonp.php?filename=aapl-c.json&callback=?",$.Tupled(function(bx){var by,bz,bA;by=bx[0];bz={};bz.text="AAPL stock price";bA={};bA.selected=1;bA.inputEnabled=a(bw).width()>480;a(bw).highcharts("StockChart",{title:bz,rangeSelector:bA,series:[{name:"AAPL",data:by}]});return;}));},Sample:$.Field(function(){return c.Build().Id("Highstock").FileName("Highstock.fs").Keywords(e.ofArray(["highstock","charts"])).Render(function(bB){return i.Main(bB);}).Create();})}}});$.OnInit(function(){a=$.Safe($$.jQuery);b=$.Safe($$.Site);c=$.Safe(b.Samples);d=$.Safe($$.IntelliFactory.WebSharper);e=$.Safe(d.List);f=$.Safe(b.ChartControl);g=$.Safe(c.Set);h=$.Safe(b.MapControl);i=$.Safe(b.StockControl);j=$.Safe(d.Html);k=$.Safe(j.Client);l=$.Safe(k.Default);m=$.Safe(e.T);n=$.Safe(b.Client);o=$.Safe(d.Arrays);p=$.Safe(c.Builder);q=$.Safe(d.Operators);r=$.Safe(c.Sample);s=$.Safe($$.document);t=$.Safe(k.Operators);u=$.Safe(d.Unchecked);v=$.Safe(k.EventsPervasives);return w=$.Safe(d.Seq);});$.OnLoad(function(){i.Sample();h.map();h.Sample();n.Main();n.All();f.Sample();return;});}());


if (typeof IntelliFactory !=='undefined')
  IntelliFactory.Runtime.Start();
